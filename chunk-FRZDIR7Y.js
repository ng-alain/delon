import{$d as et,C as N,Db as q,Dd as w,F as j,Fa as F,Fh as st,Ga as _,Ka as r,La as $,Ld as z,Na as A,Oa as W,Qb as V,Rb as X,Tb as k,Vd as O,Y as v,_ as P,a as g,ae as b,b as T,cc as G,da as B,fb as H,gb as Z,h as x,ha as D,hh as it,ia as M,jd as Y,k as E,kd as J,m as I,ma as R,od as K,q as S,qd as tt,sb as Q,tb as U,w as L}from"./chunk-VFWUNNP7.js";var nt=["fixedEl"],rt=["*"],C=function(s){return s.resize="resize",s.scroll="scroll",s.touchstart="touchstart",s.touchmove="touchmove",s.touchend="touchend",s.pageshow="pageshow",s.load="LOAD",s}(C||{});function lt(s){return typeof window<"u"&&s===window}function ot(s){return lt(s)?{top:0,left:0,bottom:0}:s.getBoundingClientRect()}var ht="affix",d="ant-affix",ct=20,a=class a{get target(){let t=this.nzTarget;return(typeof t=="string"?this.document.querySelector(t):t)||window}constructor(t,e,i,o,n,l,f,h,c,y){this.nzConfigService=i,this.scrollSrv=o,this.ngZone=n,this.platform=l,this.renderer=f,this.nzResizeObserver=h,this.cdr=c,this.directionality=y,this._nzModuleName=ht,this.nzChange=new A,this.dir="ltr",this.positionChangeSubscription=x.EMPTY,this.offsetChanged$=new I(1),this.destroy$=new E,this.placeholderNode=t.nativeElement,this.document=e}ngOnInit(){this.directionality.change?.pipe(v(this.destroy$)).subscribe(t=>{this.dir=t,this.registerListeners(),this.updatePosition({}),this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(t){let{nzOffsetBottom:e,nzOffsetTop:i,nzTarget:o}=t;(e||i)&&this.offsetChanged$.next(),o&&this.registerListeners()}ngAfterViewInit(){this.registerListeners()}ngOnDestroy(){this.removeListeners()}registerListeners(){if(!this.platform.isBrowser)return;this.removeListeners();let t=this.target===window?this.document.body:this.target;this.positionChangeSubscription=this.ngZone.runOutsideAngular(()=>j(...Object.keys(C).map(e=>N(this.target,e)),this.offsetChanged$.pipe(L(()=>({}))),this.nzResizeObserver.observe(t)).pipe(P(ct,void 0,{trailing:!0}),v(this.destroy$)).subscribe(e=>this.updatePosition(e))),this.timeout=setTimeout(()=>this.updatePosition({}))}removeListeners(){clearTimeout(this.timeout),this.positionChangeSubscription.unsubscribe(),this.destroy$.next(!0),this.destroy$.complete()}getOffset(t,e){let i=t.getBoundingClientRect(),o=ot(e),n=this.scrollSrv.getScroll(e,!0),l=this.scrollSrv.getScroll(e,!1),f=this.document.body,h=f.clientTop||0,c=f.clientLeft||0;return{top:i.top-o.top+n-h,left:i.left-o.left+l-c,width:i.width,height:i.height}}setAffixStyle(t,e){let i=this.affixStyle,o=this.target===window;if(t.type==="scroll"&&i&&e&&o||w(i,e))return;let n=!!e,l=this.fixedEl.nativeElement;this.renderer.setStyle(l,"cssText",O(e)),this.affixStyle=e,n?l.classList.add(d):l.classList.remove(d),this.updateRtlClass(),(e&&!i||!e&&i)&&this.nzChange.emit(n)}setPlaceholderStyle(t){let e=this.placeholderStyle;w(t,e)||(this.renderer.setStyle(this.placeholderNode,"cssText",O(t)),this.placeholderStyle=t)}syncPlaceholderStyle(t){if(!this.affixStyle)return;this.renderer.setStyle(this.placeholderNode,"cssText",""),this.placeholderStyle=void 0;let e={width:this.placeholderNode.offsetWidth,height:this.fixedEl.nativeElement.offsetHeight};this.setAffixStyle(t,g(g({},this.affixStyle),e)),this.setPlaceholderStyle(e)}updatePosition(t){if(!this.platform.isBrowser)return;let e=this.target,i=this.nzOffsetTop,o=this.scrollSrv.getScroll(e,!0),n=this.getOffset(this.placeholderNode,e),l=this.fixedEl.nativeElement,f={width:l.offsetWidth,height:l.offsetHeight},h={top:!1,bottom:!1};typeof i!="number"&&typeof this.nzOffsetBottom!="number"?(h.top=!0,i=0):(h.top=typeof i=="number",h.bottom=typeof this.nzOffsetBottom=="number");let c=ot(e),y=e.innerHeight||e.clientHeight;if(o>=n.top-i&&h.top){let m=n.width,u=c.top+i;this.setAffixStyle(t,{position:"fixed",top:u,left:c.left+n.left,width:m}),this.setPlaceholderStyle({width:m,height:f.height})}else if(o<=n.top+f.height+this.nzOffsetBottom-y&&h.bottom){let m=e===window?0:window.innerHeight-c.bottom,u=n.width;this.setAffixStyle(t,{position:"fixed",bottom:m+this.nzOffsetBottom,left:c.left+n.left,width:u}),this.setPlaceholderStyle({width:u,height:n.height})}else t.type===C.resize&&this.affixStyle&&this.affixStyle.position==="fixed"&&this.placeholderNode.offsetWidth?this.setAffixStyle(t,T(g({},this.affixStyle),{width:this.placeholderNode.offsetWidth})):this.setAffixStyle(t),this.setPlaceholderStyle();t.type==="resize"&&this.syncPlaceholderStyle(t)}updateRtlClass(){let t=this.fixedEl.nativeElement;this.dir==="rtl"?t.classList.contains(d)?t.classList.add(`${d}-rtl`):t.classList.remove(`${d}-rtl`):t.classList.remove(`${d}-rtl`)}};a.\u0275fac=function(e){return new(e||a)(r(F),r(G),r(et),r(it),r(W),r(Y),r(_),r(st),r($),r(K,8))},a.\u0275cmp=D({type:a,selectors:[["nz-affix"]],viewQuery:function(e,i){if(e&1&&X(nt,7),e&2){let o;V(o=k())&&(i.fixedEl=o.first)}},inputs:{nzTarget:"nzTarget",nzOffsetTop:"nzOffsetTop",nzOffsetBottom:"nzOffsetBottom"},outputs:{nzChange:"nzChange"},exportAs:["nzAffix"],standalone:!0,features:[R,q],ngContentSelectors:rt,decls:3,vars:0,consts:[["fixedEl",""]],template:function(e,i){e&1&&(Q(),H(0,"div",null,0),U(2),Z())},dependencies:[tt,J],encapsulation:2,changeDetection:0});var p=a;S([b(),z(void 0)],p.prototype,"nzOffsetTop",void 0);S([b(),z(void 0)],p.prototype,"nzOffsetBottom",void 0);var Dt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=M({type:t}),t.\u0275inj=B({imports:[p]});let s=t;return s})();export{p as a,Dt as b};
