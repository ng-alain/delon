import{a as Ht,b as Ft,c as Lt}from"./chunk-DFTH5LK6.js";import{a as Vt,b as $t}from"./chunk-LANDAJ75.js";import{a as Nt,e as jt}from"./chunk-4LMKEQTT.js";import{a as Pt,b as Ut}from"./chunk-WCHKEMEB.js";import{$a as p,Aa as Ve,Ab as P,Ba as F,Bh as Ot,Cb as ze,D as Je,Da as rt,Db as q,Dh as Dt,Eb as $e,Eh as At,F as Ze,Fa as ot,Fb as Ie,Fe as Mt,Ga as Me,Ge as Et,H as k,Ja as l,Jc as pt,Ka as u,Kc as dt,Kd as vt,L as et,La as L,Lc as ee,Ma as st,Na as j,Pb as lt,Pg as It,Qb as de,Qc as te,Qg as kt,Ra as V,Rb as he,Sa as m,Sc as ht,Ta as at,Tb as fe,Tc as I,Tg as x,Ua as me,Ub as J,Uc as ft,Vg as _e,W as tt,Y as Le,Yc as _t,a as le,ab as g,ag as Ne,bb as $,bg as je,ca as ve,cc as ct,da as Te,db as G,dd as gt,de as D,ea as ue,eb as K,ed as Be,ee as Tt,fa as w,fb as d,ga as it,gb as h,gc as ut,h as be,ha as v,hb as Ee,hc as mt,ia as ye,ib as Y,ic as Ge,id as we,ja as nt,jb as Q,jd as Oe,k as ce,l as Xe,lb as E,lf as De,ma as Se,md as Ct,me as yt,mf as Ae,na as R,nc as Z,oa as M,od as ie,pb as C,q as f,qd as xt,rb as c,s as qe,sb as W,se as Ke,tb as X,uc as ke,ue as St,wa as Re,wd as bt,wh as Bt,xb as O,xe as Rt,yb as z,zb as pe,zg as zt,zh as wt}from"./chunk-KLO4GQEX.js";function Xt(r,t){if(r&1){let n=E();d(0,"li",5),C("click",function(i){R(n);let o=c();return M(o.click(i,"refresh"))}),h()}if(r&2){let n=c();m("innerHTML",n.i18n.refresh,F)}}function qt(r,t){if(r&1){let n=E();d(0,"li",7),C("click",function(i){let s=R(n).$implicit,a=c(2);return M(a.click(i,"custom",s))}),h()}if(r&2){let n=t.$implicit,e=c(2);m("nzDisabled",e.isDisabled(n))("innerHTML",n.title,F),V("data-type",n.id)}}function Jt(r,t){if(r&1&&(Ee(0,"li",6),G(1,qt,1,3,"li",8,$)),r&2){let n=c();K(1,n.customContextMenu)}}var Pe=(()=>{let t=class t{set i18n(e){this._i18n=le(le({},this.i18nSrv.getData("reuseTab")),e)}get i18n(){return this._i18n}get includeNonCloseable(){return this.event.ctrlKey}constructor(e){this.i18nSrv=e,this.close=new j}notify(e){this.close.next({type:e,item:this.item,includeNonCloseable:this.includeNonCloseable})}ngOnInit(){this.includeNonCloseable&&(this.item.closable=!0)}click(e,i,o){if(e.preventDefault(),e.stopPropagation(),!(i==="close"&&!this.item.closable)&&!(i==="closeRight"&&this.item.last)){if(o){if(this.isDisabled(o))return;o.fn(this.item,o)}this.notify(i)}}isDisabled(e){return e.disabled?e.disabled(this.item):!1}closeMenu(e){e.type==="click"&&e.button===2||this.notify(null)}};t.\u0275fac=function(i){return new(i||t)(u(zt))},t.\u0275cmp=v({type:t,selectors:[["reuse-tab-context-menu"]],hostBindings:function(i,o){i&1&&C("click",function(a){return o.closeMenu(a)},!1,Ve)("contextmenu",function(a){return o.closeMenu(a)},!1,Ve)},inputs:{i18n:"i18n",item:"item",event:"event",customContextMenu:"customContextMenu"},outputs:{close:"close"},standalone:!0,features:[q],decls:6,vars:7,consts:[["nz-menu",""],["nz-menu-item","","data-type","refresh",3,"innerHTML"],["nz-menu-item","","data-type","close",3,"nzDisabled","innerHTML","click"],["nz-menu-item","","data-type","closeOther",3,"innerHTML","click"],["nz-menu-item","","data-type","closeRight",3,"nzDisabled","innerHTML","click"],["nz-menu-item","","data-type","refresh",3,"innerHTML","click"],["nz-menu-divider",""],["nz-menu-item","",3,"nzDisabled","innerHTML","click"],["nz-menu-item","",3,"nzDisabled","innerHTML"]],template:function(i,o){i&1&&(d(0,"ul",0),p(1,Xt,1,1,"li",1),d(2,"li",2),C("click",function(a){return o.click(a,"close")}),h(),d(3,"li",3),C("click",function(a){return o.click(a,"closeOther")}),h(),d(4,"li",4),C("click",function(a){return o.click(a,"closeRight")}),h(),p(5,Jt,3,0),h()),i&2&&(l(1),g(1,o.item.active?1:-1),l(1),m("nzDisabled",!o.item.closable)("innerHTML",o.i18n.close,F),l(1),m("innerHTML",o.i18n.closeOther,F),l(1),m("nzDisabled",o.item.last)("innerHTML",o.i18n.closeRight,F),l(1),g(5,o.customContextMenu.length>0?5:-1))},dependencies:[At,Ot,wt,Dt],encapsulation:2,changeDetection:0});let r=t;return r})();var U=(()=>{let t=class t{constructor(e){this.overlay=e,this.ref=null,this.show=new ce,this.close=new ce}remove(){this.ref&&(this.ref.detach(),this.ref.dispose(),this.ref=null)}open(e){this.remove();let{event:i,item:o,customContextMenu:s}=e,{x:a,y:b}=i,_=[new Ke({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new Ke({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})],N=this.overlay.position().flexibleConnectedTo({x:a,y:b}).withPositions(_);this.ref=this.overlay.create({positionStrategy:N,panelClass:"reuse-tab__cm",scrollStrategy:this.overlay.scrollStrategies.close()});let xe=this.ref.attach(new yt(Pe)),S=xe.instance;S.i18n=this.i18n,S.item=le({},o),S.customContextMenu=s,S.event=i;let We=new be;We.add(S.close.subscribe(Wt=>{this.close.next(Wt),this.remove()})),xe.onDestroy(()=>We.unsubscribe())}};t.\u0275fac=function(i){return new(i||t)(w(St))},t.\u0275prov=ve({token:t,factory:t.\u0275fac});let r=t;return r})();var Ue=(()=>{let t=class t{set i18n(e){this.srv.i18n=e}constructor(e){this.srv=e,this.sub$=new be,this.change=new j,this.sub$.add(e.show.subscribe(i=>this.srv.open(i))),this.sub$.add(e.close.subscribe(i=>this.change.emit(i)))}ngOnDestroy(){this.sub$.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)(u(U))},t.\u0275cmp=v({type:t,selectors:[["reuse-tab-context"]],inputs:{i18n:"i18n"},outputs:{change:"change"},standalone:!0,features:[q],decls:0,vars:0,template:function(i,o){},encapsulation:2});let r=t;return r})();var He=(()=>{let t=class t{constructor(e){this.srv=e}_onContextMenu(e){this.srv.show.next({event:e,item:this.item,customContextMenu:this.customContextMenu}),e.preventDefault(),e.stopPropagation()}};t.\u0275fac=function(i){return new(i||t)(u(U))},t.\u0275dir=nt({type:t,selectors:[["","reuse-tab-context-menu",""]],hostBindings:function(i,o){i&1&&C("contextmenu",function(a){return o._onContextMenu(a)})},inputs:{item:["reuse-tab-context-menu","item"],customContextMenu:"customContextMenu"},exportAs:["reuseTabContextMenu"],standalone:!0});let r=t;return r})();var B=function(r){return r[r.Menu=0]="Menu",r[r.MenuForce=1]="MenuForce",r[r.URL=2]="URL",r}(B||{});var ne=new ue("REUSE_TAB_STORAGE_KEY"),re=new ue("REUSE_TAB_STORAGE_STATE");var ge=new ue("REUSE_TAB_CACHED_MANAGER");var oe=(()=>{let t=class t{get snapshot(){return this.injector.get(te).snapshot}get inited(){return this._inited}get curUrl(){return this.getUrl(this.snapshot)}set max(e){this._max=Math.min(Math.max(e,2),100);for(let i=this.cached.list.length;i>this._max;i--)this.cached.list.pop()}set keepingScroll(e){this._keepingScroll=e,this.initScroll()}get keepingScroll(){return this._keepingScroll}get items(){return this.cached.list}get count(){return this.cached.list.length}get change(){return this._cachedChange.asObservable()}set title(e){let i=this.curUrl;typeof e=="string"&&(e={text:e}),this.cached.title[i]=e,this.di("update current tag title: ",e),this._cachedChange.next({active:"title",url:i,title:e,list:this.cached.list})}index(e){return this.cached.list.findIndex(i=>i.url===e)}exists(e){return this.index(e)!==-1}get(e){return e&&this.cached.list.find(i=>i.url===e)||null}remove(e,i){let o=typeof e=="string"?this.index(e):e,s=o!==-1?this.cached.list[o]:null;return!s||!i&&!s.closable?!1:(this.destroy(s._handle),this.cached.list.splice(o,1),delete this.cached.title[e],!0)}close(e,i=!1){return this.removeUrlBuffer=e,this.remove(e,i),this._cachedChange.next({active:"close",url:e,list:this.cached.list}),this.di("close tag",e),!0}closeRight(e,i=!1){let o=this.index(e);for(let s=this.count-1;s>o;s--)this.remove(s,i);return this.removeUrlBuffer=null,this._cachedChange.next({active:"closeRight",url:e,list:this.cached.list}),this.di("close right tages",e),!0}clear(e=!1){this.cached.list.forEach(i=>{!e&&i.closable&&this.destroy(i._handle)}),this.cached.list=this.cached.list.filter(i=>!e&&!i.closable),this.removeUrlBuffer=null,this._cachedChange.next({active:"clear",list:this.cached.list}),this.di("clear all catch")}move(e,i){let o=this.cached.list.findIndex(a=>a.url===e);if(o===-1)return;let s=this.cached.list.slice();s.splice(i<0?s.length+i:i,0,s.splice(o,1)[0]),this.cached.list=s,this._cachedChange.next({active:"move",url:e,position:i,list:this.cached.list})}replace(e){let i=this.curUrl;this.exists(i)?this.close(i,!0):this.removeUrlBuffer=i,this.injector.get(I).navigateByUrl(e)}getTitle(e,i){if(this.cached.title[e])return this.cached.title[e];if(i&&i.data&&(i.data.titleI18n||i.data.title))return{text:i.data.title,i18n:i.data.titleI18n};let o=this.getMenu(e);return o?{text:o.text,i18n:o.i18n}:{text:e}}clearTitleCached(){this.cached.title={}}set closable(e){let i=this.curUrl;this.cached.closable[i]=e,this.di("update current tag closable: ",e),this._cachedChange.next({active:"closable",closable:e,list:this.cached.list})}getClosable(e,i){if(typeof this.cached.closable[e]<"u")return this.cached.closable[e];if(i&&i.data&&typeof i.data.reuseClosable=="boolean")return i.data.reuseClosable;let o=this.mode!==B.URL?this.getMenu(e):null;return o&&typeof o.reuseClosable=="boolean"?o.reuseClosable:!0}clearClosableCached(){this.cached.closable={}}getTruthRoute(e){let i=e;for(;i.firstChild;)i=i.firstChild;return i}getUrl(e){let i=this.getTruthRoute(e),o=[];for(;i;)o.push(i.url.join("/")),i=i.parent;return`/${o.filter(a=>a).reverse().join("/")}`}can(e){let i=this.getUrl(e);if(i===this.removeUrlBuffer)return!1;if(e.data&&typeof e.data.reuse=="boolean")return e.data.reuse;if(this.mode!==B.URL){let o=this.getMenu(i);if(!o)return!1;if(this.mode===B.Menu){if(o.reuse===!1)return!1}else if(!o.reuse||o.reuse!==!0)return!1;return!0}return!this.isExclude(i)}isExclude(e){return this.excludes.findIndex(i=>i.test(e))!==-1}refresh(e){this._cachedChange.next({active:"refresh",data:e})}destroy(e){e&&e.componentRef&&e.componentRef.destroy&&e.componentRef.destroy()}di(...e){}constructor(e,i,o,s,a){this.injector=e,this.menuService=i,this.cached=o,this.stateKey=s,this.stateSrv=a,this._inited=!1,this._max=10,this._keepingScroll=!1,this._cachedChange=new Xe(null),this.removeUrlBuffer=null,this.positionBuffer={},this.debug=!1,this.routeParamMatchMode="strict",this.mode=B.Menu,this.excludes=[],this.storageState=!1,this.cached==null&&(this.cached={list:[],title:{},closable:{}})}init(){this.initScroll(),this._inited=!0,this.loadState()}loadState(){this.storageState&&(this.cached.list=this.stateSrv.get(this.stateKey).map(e=>({title:{text:e.title},url:e.url,position:e.position})),this._cachedChange.next({active:"loadState"}))}getMenu(e){let i=this.menuService.getPathByUrl(e);return!i||i.length===0?null:i.pop()}runHook(e,i,o="init"){if(typeof i=="number"&&(i=this.cached.list[i]._handle?.componentRef),i==null||!i.instance)return;let s=i.instance,a=s[e];typeof a=="function"&&(e==="_onReuseInit"?a.call(s,o):a.call(s))}hasInValidRoute(e){return!e.routeConfig||!!e.routeConfig.loadChildren||!!e.routeConfig.children}shouldDetach(e){return this.hasInValidRoute(e)?!1:(this.di("#shouldDetach",this.can(e),this.getUrl(e)),this.can(e))}store(e,i){let o=this.getUrl(e),s=this.index(o),a=s===-1,b={title:this.getTitle(o,e),closable:this.getClosable(o,e),position:this.getKeepingScroll(o,e)?this.positionBuffer[o]:null,url:o,_snapshot:e,_handle:i};if(a){if(this.count>=this._max){let _=this.cached.list.findIndex(N=>N.closable);_!==-1&&this.remove(_,!1)}this.cached.list.push(b)}else{let _=this.cached.list[s]._handle?.componentRef;i==null&&_!=null&&Je(100).subscribe(()=>this.runHook("_onReuseInit",_)),this.cached.list[s]=b}this.removeUrlBuffer=null,this.di("#store",a?"[new]":"[override]",o),i&&i.componentRef&&this.runHook("_onReuseDestroy",i.componentRef),a||this._cachedChange.next({active:"override",item:b,list:this.cached.list})}shouldAttach(e){if(this.hasInValidRoute(e))return!1;let i=this.getUrl(e),o=this.get(i),s=!!(o&&o._handle);return this.di("#shouldAttach",s,i),s||this._cachedChange.next({active:"add",url:i,list:this.cached.list}),s}retrieve(e){if(this.hasInValidRoute(e))return null;let i=this.getUrl(e),o=this.get(i),s=o&&o._handle||null;return this.di("#retrieve",i,s),s}shouldReuseRoute(e,i){let o=e.routeConfig===i.routeConfig;if(!o)return!1;let s=e.routeConfig&&e.routeConfig.path||"";return s.length>0&&~s.indexOf(":")&&(this.routeParamMatchMode==="strict"?o=this.getUrl(e)===this.getUrl(i):o=s===(i.routeConfig&&i.routeConfig.path||"")),this.di("====================="),this.di("#shouldReuseRoute",o,`${this.getUrl(i)}=>${this.getUrl(e)}`,e,i),o}getKeepingScroll(e,i){if(i&&i.data&&typeof i.data.keepingScroll=="boolean")return i.data.keepingScroll;let o=this.mode!==B.URL?this.getMenu(e):null;return o&&typeof o.keepingScroll=="boolean"?o.keepingScroll:this.keepingScroll}get isDisabledInRouter(){return this.injector.get(ht,{}).scrollPositionRestoration==="disabled"}get ss(){return this.injector.get(kt)}initScroll(){this._router$&&this._router$.unsubscribe(),this._router$=this.injector.get(I).events.subscribe(e=>{if(e instanceof dt){let i=this.curUrl;this.getKeepingScroll(i,this.getTruthRoute(this.snapshot))?this.positionBuffer[i]=this.ss.getScrollPosition(this.keepingScrollContainer):delete this.positionBuffer[i]}else if(e instanceof ee){let i=this.curUrl,o=this.get(i);o&&o.position&&this.getKeepingScroll(i,this.getTruthRoute(this.snapshot))&&(this.isDisabledInRouter?this.ss.scrollToPosition(this.keepingScrollContainer,o.position):setTimeout(()=>this.ss.scrollToPosition(this.keepingScrollContainer,o.position),1))}})}ngOnDestroy(){let{_cachedChange:e,_router$:i}=this;this.clear(),this.cached.list=[],e.complete(),i&&i.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)(w(Re),w(we),w(ge,8),w(ne,8),w(re,8))},t.\u0275prov=ve({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var ni=["tabset"];function ri(r,t){}var oi=r=>({$implicit:r});function si(r,t){if(r&1&&p(0,ri,0,0,"ng-template",6),r&2){let n=c(2).$implicit,e=c();m("ngTemplateOutlet",e.titleRender)("ngTemplateOutletContext",Ie(2,oi,n))}}function ai(r,t){if(r&1&&z(0),r&2){let n=c(2).$implicit;P(" ",n.title," ")}}function li(r,t){if(r&1){let n=E();d(0,"i",8),C("click",function(i){R(n);let o=c(2).$index,s=c();return M(s._close(i,o,!1))}),h()}}function ci(r,t){if(r&1&&(d(0,"div",5)(1,"span"),p(2,si,1,4,null,6)(3,ai,1,1),h()(),p(4,li,1,0,"i",7)),r&2){let n=c().$implicit,e=c();m("reuse-tab-context-menu",n)("customContextMenu",e.customContextMenu),V("title",n.title),l(1),at("max-width",e.tabMaxWidth,"px"),me("reuse-tab__name-width",e.tabMaxWidth),l(1),g(2,e.titleRender?2:3),l(2),g(4,n.closable?4:-1)}}function ui(r,t){if(r&1){let n=E();d(0,"nz-tab",3),C("nzClick",function(){let o=R(n).$index,s=c();return M(s._to(o))}),p(1,ci,5,9,"ng-template",null,4,J),h()}if(r&2){let n=O(2);m("nzTitle",n)}}var se=class se{set keepingScrollContainer(t){this._keepingScrollContainer=typeof t=="string"?this.doc.querySelector(t):t}constructor(t,n,e,i,o,s,a,b,_,N){this.srv=t,this.cdr=n,this.router=e,this.route=i,this.i18nSrv=o,this.doc=s,this.platform=a,this.directionality=b,this.stateKey=_,this.stateSrv=N,this.destroy$=it(st),this.list=[],this.pos=0,this.dir="ltr",this.mode=B.Menu,this.debug=!1,this.allowClose=!0,this.keepingScroll=!1,this.storageState=!1,this.customContextMenu=[],this.tabBarStyle=null,this.tabType="line",this.routeParamMatchMode="strict",this.disabled=!1,this.change=new j,this.close=new j}genTit(t){return t.i18n&&this.i18nSrv?this.i18nSrv.fanyi(t.i18n):t.text}get curUrl(){return this.srv.getUrl(this.route.snapshot)}genCurItem(){let t=this.curUrl,n=this.srv.getTruthRoute(this.route.snapshot);return{url:t,title:this.genTit(this.srv.getTitle(t,n)),closable:this.allowClose&&this.srv.count>0&&this.srv.getClosable(t,n),active:!1,last:!1,index:0}}genList(t){let n=this.srv.items.map((o,s)=>({url:o.url,title:this.genTit(o.title),closable:this.allowClose&&o.closable&&this.srv.count>0,position:o.position,index:s,active:!1,last:!1})),e=this.curUrl,i=n.findIndex(o=>o.url===e)===-1;if(t&&t.active==="close"&&t.url===e){i=!1;let o=0,s=this.list.find(a=>a.url===e);s.index===n.length?o=n.length-1:s.index<n.length&&(o=Math.max(0,s.index)),this.router.navigateByUrl(n[o].url)}i&&n.splice(this.pos+1,0,this.genCurItem()),n.forEach((o,s)=>o.index=s),n.length===1&&(n[0].closable=!1),this.list=n,this.cdr.detectChanges(),this.updatePos()}updateTitle(t){let n=this.list.find(e=>e.url===t.url);n&&(n.title=this.genTit(t.title),this.cdr.detectChanges())}refresh(t){this.srv.runHook("_onReuseInit",this.pos===t.index?this.srv.componentRef:t.index,"refresh")}saveState(){!this.srv.inited||!this.storageState||this.stateSrv.update(this.stateKey,this.list)}contextMenuChange(t){let n=null;switch(t.type){case"refresh":this.refresh(t.item);break;case"close":this._close(null,t.item.index,t.includeNonCloseable);break;case"closeRight":n=()=>{this.srv.closeRight(t.item.url,t.includeNonCloseable),this.close.emit(null)};break;case"closeOther":n=()=>{this.srv.clear(t.includeNonCloseable),this.close.emit(null)};break}n&&(!t.item.active&&t.item.index<=this.list.find(e=>e.active).index?this._to(t.item.index,n):n())}_to(t,n){t=Math.max(0,Math.min(t,this.list.length-1));let e=this.list[t];this.router.navigateByUrl(e.url).then(i=>{i&&(this.item=e,this.change.emit(e),n&&n())})}_close(t,n,e){t!=null&&(t.preventDefault(),t.stopPropagation());let i=this.list[n];return(this.canClose?this.canClose({item:i,includeNonCloseable:e}):qe(!0)).pipe(k(o=>o)).subscribe(()=>{this.srv.close(i.url,e),this.close.emit(i),this.cdr.detectChanges()}),!1}activate(t){this.srv.componentRef={instance:t}}updatePos(){let t=this.srv.getUrl(this.route.snapshot),n=this.list.filter(s=>s.url===t||!this.srv.isExclude(s.url));if(n.length===0)return;let e=n[n.length-1],i=n.find(s=>s.url===t);e.last=!0;let o=i==null?e.index:i.index;n.forEach((s,a)=>s.active=o===a),this.pos=o,this.tabset.nzSelectedIndex=o,this.list=n,this.cdr.detectChanges(),this.saveState()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(D(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.platform.isBrowser&&(this.srv.change.pipe(D(this.destroy$)).subscribe(t=>{switch(t?.active){case"title":this.updateTitle(t);return;case"override":if(t?.list?.length===this.list.length){this.updatePos();return}break}this.genList(t)}),this.i18nSrv.change.pipe(k(()=>this.srv.inited),D(this.destroy$),et(100)).subscribe(()=>this.genList({active:"title"})),this.srv.init())}ngOnChanges(t){this.platform.isBrowser&&(t.max&&(this.srv.max=this.max),t.excludes&&(this.srv.excludes=this.excludes),t.mode&&(this.srv.mode=this.mode),t.routeParamMatchMode&&(this.srv.routeParamMatchMode=this.routeParamMatchMode),t.keepingScroll&&(this.srv.keepingScroll=this.keepingScroll,this.srv.keepingScrollContainer=this._keepingScrollContainer),t.storageState&&(this.srv.storageState=this.storageState),this.srv.debug=this.debug,this.cdr.detectChanges())}};se.\u0275fac=function(n){return new(n||se)(u(oe),u(L),u(I),u(te),u(Be,8),u(ct),u(Oe),u(ie,8),u(ne,8),u(re,8))},se.\u0275cmp=v({type:se,selectors:[["reuse-tab"],["","reuse-tab",""]],viewQuery:function(n,e){if(n&1&&he(ni,5),n&2){let i;de(i=fe())&&(e.tabset=i.first)}},hostVars:10,hostBindings:function(n,e){n&2&&me("reuse-tab",!0)("reuse-tab__line",e.tabType==="line")("reuse-tab__card",e.tabType==="card")("reuse-tab__disabled",e.disabled)("reuse-tab-rtl",e.dir==="rtl")},inputs:{mode:"mode",i18n:"i18n",debug:"debug",max:"max",tabMaxWidth:"tabMaxWidth",excludes:"excludes",allowClose:"allowClose",keepingScroll:"keepingScroll",storageState:"storageState",keepingScrollContainer:"keepingScrollContainer",customContextMenu:"customContextMenu",tabBarExtraContent:"tabBarExtraContent",tabBarGutter:"tabBarGutter",tabBarStyle:"tabBarStyle",tabType:"tabType",routeParamMatchMode:"routeParamMatchMode",disabled:"disabled",titleRender:"titleRender",canClose:"canClose"},outputs:{change:"change",close:"close"},exportAs:["reuseTab"],standalone:!0,features:[ze([U]),Se,q],decls:5,vars:7,consts:[[3,"nzSelectedIndex","nzAnimated","nzType","nzTabBarExtraContent","nzTabBarGutter","nzTabBarStyle"],["tabset",""],[3,"i18n","change"],[3,"nzTitle","nzClick"],["titleTemplate",""],[1,"reuse-tab__name",3,"reuse-tab-context-menu","customContextMenu"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-icon","","nzType","close","class","reuse-tab__op"],["nz-icon","","nzType","close",1,"reuse-tab__op",3,"click"],[3,"nzTitle"]],template:function(n,e){n&1&&(d(0,"nz-tabset",0,1),G(2,ui,3,1,"nz-tab",9,$),h(),d(4,"reuse-tab-context",2),C("change",function(o){return e.contextMenuChange(o)}),h()),n&2&&(m("nzSelectedIndex",e.pos)("nzAnimated",!1)("nzType",e.tabType)("nzTabBarExtraContent",e.tabBarExtraContent)("nzTabBarGutter",e.tabBarGutter)("nzTabBarStyle",e.tabBarStyle),K(2,e.list),l(4),m("i18n",e.i18n))},dependencies:[Z,Lt,Ft,Ht,He,Ue,je,Ne],encapsulation:2,changeDetection:0});var y=se;f([x()],y.prototype,"debug",void 0);f([_e()],y.prototype,"max",void 0);f([_e()],y.prototype,"tabMaxWidth",void 0);f([x()],y.prototype,"allowClose",void 0);f([x()],y.prototype,"keepingScroll",void 0);f([x()],y.prototype,"storageState",void 0);f([x()],y.prototype,"disabled",void 0);var Ye=["*"];function _i(r,t){}function gi(r,t){if(r&1&&(Y(0),d(1,"span",3),p(2,_i,0,0,"ng-template",4),Ee(3,"span",5),h(),Q()),r&2){let n=c(),e=O(2);l(1),m("nzDropdownMenu",n.nzOverlay),l(1),m("ngTemplateOutlet",e)}}function Ci(r,t){r&1&&(d(0,"span",6),X(1),h())}function xi(r,t){if(r&1&&(Y(0),z(1),Q()),r&2){let n=c(2);l(1),P(" ",n.nzBreadCrumbComponent.nzSeparator," ")}}function bi(r,t){if(r&1&&(d(0,"nz-breadcrumb-separator"),p(1,xi,2,1,"ng-container",7),h()),r&2){let n=c();l(1),m("nzStringTemplateOutlet",n.nzBreadCrumbComponent.nzSeparator)}}function vi(r,t){if(r&1){let n=E();d(0,"nz-breadcrumb-item")(1,"a",2),C("click",function(i){let s=R(n).$implicit,a=c(2);return M(a.navigate(s.url,i))}),z(2),h()()}if(r&2){let n=t.$implicit;l(1),V("href",n.url,rt),l(1),pe(n.label)}}function Ti(r,t){if(r&1&&(Y(0),p(1,vi,3,2,"nz-breadcrumb-item",1),Q()),r&2){let n=c();l(1),m("ngForOf",n.breadcrumbs)}}var Fe=class{},yi=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=v({type:t,selectors:[["nz-breadcrumb-separator"]],hostAttrs:[1,"ant-breadcrumb-separator"],exportAs:["nzBreadcrumbSeparator"],ngContentSelectors:Ye,decls:1,vars:0,template:function(i,o){i&1&&(W(),X(0))},encapsulation:2});let r=t;return r})(),Qe=(()=>{let t=class t{constructor(e){this.nzBreadCrumbComponent=e}};t.\u0275fac=function(i){return new(i||t)(u(Fe))},t.\u0275cmp=v({type:t,selectors:[["nz-breadcrumb-item"]],inputs:{nzOverlay:"nzOverlay"},exportAs:["nzBreadcrumbItem"],ngContentSelectors:Ye,decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["noMenuTpl",""],[4,"ngIf"],["nz-dropdown","",1,"ant-breadcrumb-overlay-link",3,"nzDropdownMenu"],[3,"ngTemplateOutlet"],["nz-icon","","nzType","down"],[1,"ant-breadcrumb-link"],[4,"nzStringTemplateOutlet"]],template:function(i,o){if(i&1&&(W(),p(0,gi,4,2,"ng-container",0)(1,Ci,2,0,"ng-template",null,1,J)(3,bi,2,1,"nz-breadcrumb-separator",2)),i&2){let s=O(2);m("ngIf",!!o.nzOverlay)("ngIfElse",s),l(3),m("ngIf",o.nzBreadCrumbComponent.nzSeparator)}},dependencies:[Ge,Z,De,Nt,Ne,yi],encapsulation:2,changeDetection:0});let r=t;return r})(),H=class H{constructor(t,n,e,i,o){this.injector=t,this.cdr=n,this.elementRef=e,this.renderer=i,this.directionality=o,this.nzAutoGenerate=!1,this.nzSeparator="/",this.nzRouteLabel="breadcrumb",this.nzRouteLabelFn=s=>s,this.breadcrumbs=[],this.dir="ltr",this.destroy$=new ce}ngOnInit(){this.nzAutoGenerate&&this.registerRouterChange(),this.directionality.change?.pipe(Le(this.destroy$)).subscribe(t=>{this.dir=t,this.prepareComponentForRtl(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.prepareComponentForRtl()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}navigate(t,n){n.preventDefault(),this.injector.get(I).navigateByUrl(t)}registerRouterChange(){try{let t=this.injector.get(I),n=this.injector.get(te);t.events.pipe(k(e=>e instanceof ee),Le(this.destroy$),tt(!0)).subscribe(()=>{this.breadcrumbs=this.getBreadcrumbs(n.root),this.cdr.markForCheck()})}catch{throw new Error(`${bt} You should import RouterModule if you want to use 'NzAutoGenerate'.`)}}getBreadcrumbs(t,n="",e=[]){let i=t.children;if(i.length===0)return e;for(let o of i)if(o.outlet===pt){let s=o.snapshot.url.map(_=>_.path).filter(_=>_).join("/"),a=s?`${n}/${s}`:n,b=this.nzRouteLabelFn(o.snapshot.data[this.nzRouteLabel]);if(s&&b){let _={label:b,params:o.snapshot.params,url:a};e.push(_)}return this.getBreadcrumbs(o,a,e)}return e}prepareComponentForRtl(){this.dir==="rtl"?this.renderer.addClass(this.elementRef.nativeElement,"ant-breadcrumb-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-breadcrumb-rtl")}};H.\u0275fac=function(n){return new(n||H)(u(Re),u(L),u(ot),u(Me),u(ie,8))},H.\u0275cmp=v({type:H,selectors:[["nz-breadcrumb"]],hostAttrs:[1,"ant-breadcrumb"],inputs:{nzAutoGenerate:"nzAutoGenerate",nzSeparator:"nzSeparator",nzRouteLabel:"nzRouteLabel",nzRouteLabelFn:"nzRouteLabelFn"},exportAs:["nzBreadcrumb"],features:[ze([{provide:Fe,useExisting:H}])],ngContentSelectors:Ye,decls:2,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(n,e){n&1&&(W(),X(0),p(1,Ti,2,1,"ng-container",0)),n&2&&(l(1),m("ngIf",e.nzAutoGenerate&&e.breadcrumbs.length))},dependencies:[mt,Ge,Qe],encapsulation:2,changeDetection:0});var Ce=H;f([vt()],Ce.prototype,"nzAutoGenerate",void 0);var Qt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=ye({type:t}),t.\u0275inj=Te({imports:[ke,Ae,Rt,Bt,jt,je,xt]});let r=t;return r})();var Ri=["conTpl"],Mi=["affix"];function Ei(r,t){}function zi(r,t){if(r&1&&(d(0,"nz-affix",0,2),p(2,Ei,0,0,"ng-template",3),h()),r&2){let n=c(),e=O(3);m("nzOffsetTop",n.fixedOffsetTop),l(2),m("ngTemplateOutlet",e)}}function Ii(r,t){}function ki(r,t){if(r&1&&p(0,Ii,0,0,"ng-template",3),r&2){c();let n=O(3);m("ngTemplateOutlet",n)}}function Bi(r,t){}function wi(r,t){if(r&1&&p(0,Bi,0,0,"ng-template",3),r&2){let n=c(2);m("ngTemplateOutlet",n.breadcrumb)}}function Oi(r,t){if(r&1&&(d(0,"a",16),z(1),h()),r&2){let n=c().$implicit;m("routerLink",n.link),l(1),pe(n.title)}}function Di(r,t){if(r&1&&z(0),r&2){let n=c().$implicit;P(" ",n.title," ")}}function Ai(r,t){if(r&1&&(d(0,"nz-breadcrumb-item"),p(1,Oi,2,2,"a",16)(2,Di,1,1),h()),r&2){let n=t.$implicit;l(1),g(1,n.link?1:2)}}function Ni(r,t){if(r&1&&(d(0,"nz-breadcrumb"),G(1,Ai,3,1,"nz-breadcrumb-item",null,$),h()),r&2){let n=c(3);K(1,n.paths)}}function ji(r,t){if(r&1&&p(0,Ni,3,0,"nz-breadcrumb"),r&2){let n=c(2);g(0,n.paths&&n.paths.length>0?0:-1)}}function Pi(r,t){}function Ui(r,t){if(r&1&&(d(0,"div",17),p(1,Pi,0,0,"ng-template",3),h()),r&2){let n=c(2);l(1),m("ngTemplateOutlet",n.logo)}}function Hi(r,t){}function Fi(r,t){if(r&1&&p(0,Hi,0,0,"ng-template",3),r&2){let n=c(3);m("ngTemplateOutlet",n._titleTpl)}}function Li(r,t){if(r&1&&(Y(0),z(1),Q()),r&2){let n=c(5);l(1),pe(n.titleSub)}}function Vi(r,t){if(r&1&&(d(0,"small"),p(1,Li,2,1,"ng-container",19),h()),r&2){let n=c(4);l(1),m("nzStringTemplateOutlet",n.titleSub)}}function $i(r,t){if(r&1&&(z(0),p(1,Vi,2,1,"small")),r&2){let n=c(3);P(" ",n._titleVal," "),l(1),g(1,n.titleSub?1:-1)}}function Gi(r,t){if(r&1&&(d(0,"h1",18),p(1,Fi,1,1,null,3)(2,$i,2,2),h()),r&2){let n=c(2);l(1),g(1,n._titleTpl?1:2)}}function Ki(r,t){}function Yi(r,t){if(r&1&&(d(0,"div",20),p(1,Ki,0,0,"ng-template",3),h()),r&2){let n=c(2);l(1),m("ngTemplateOutlet",n.action)}}function Qi(r,t){}function Wi(r,t){}function Xi(r,t){if(r&1&&(d(0,"div",21),p(1,Wi,0,0,"ng-template",3),h()),r&2){let n=c(2);l(1),m("ngTemplateOutlet",n.extra)}}function qi(r,t){}var Ji=r=>({"page-header__wide":r}),Zi=()=>({rows:3}),en=()=>({size:"large",shape:"circle"});function tn(r,t){if(r&1){let n=E();d(0,"div",4)(1,"div",5)(2,"nz-skeleton",6),p(3,wi,1,1,null,3)(4,ji,1,1),d(5,"div",7),p(6,Ui,2,1,"div",8),d(7,"div",9)(8,"div",10),p(9,Gi,3,1,"h1",11)(10,Yi,2,1,"div",12),h(),d(11,"div",10)(12,"div",13,14),C("cdkObserveContent",function(){R(n);let i=c();return M(i.checkContent())}),X(14),p(15,Qi,0,0,"ng-template",3),h(),p(16,Xi,2,1,"div",15),h()()(),p(17,qi,0,0,"ng-template",3),h()()()}if(r&2){let n=c();me("page-header-rtl",n.dir==="rtl"),l(1),m("ngClass",Ie(15,Ji,n.wide)),l(1),m("nzLoading",n.loading)("nzTitle",!1)("nzActive",!0)("nzParagraph",$e(17,Zi))("nzAvatar",$e(18,en)),l(1),g(3,n.breadcrumb?3:4),l(3),g(6,n.logo?6:-1),l(3),g(9,n._titleVal||n._titleTpl?9:-1),l(1),g(10,n.action?10:-1),l(5),m("ngTemplateOutlet",n.content),l(1),g(16,n.extra?16:-1),l(1),m("ngTemplateOutlet",n.tab)}}var nn=["*"],ae=class ae{get menus(){return this.menuSrv.getPathByUrl(this.router.url,this.recursiveBreadcrumb)}set title(t){t instanceof lt?(this._title=null,this._titleTpl=t,this._titleVal=""):(this._title=t,this._titleVal=this._title)}constructor(t,n,e,i,o,s,a,b,_,N,xe){this.renderer=n,this.router=e,this.menuSrv=i,this.i18nSrv=o,this.titleSrv=s,this.reuseSrv=a,this.cdr=b,this.directionality=xe,this.dir$=this.directionality.change?.pipe(D()),this.inited=!1,this.isBrowser=!0,this.dir="ltr",this._titleVal="",this.paths=[],this._title=null,this._titleTpl=null,this.loading=!1,this.wide=!1,this.breadcrumb=null,this.logo=null,this.action=null,this.content=null,this.extra=null,this.tab=null,this.isBrowser=N.isBrowser,_.attach(this,"pageHeader",{home:"\u9996\u9875",homeLink:"/",autoBreadcrumb:!0,recursiveBreadcrumb:!1,autoTitle:!0,syncTitle:!0,fixed:!1,fixedOffsetTop:64}),t.notify.pipe(D(),k(S=>this.affix&&S.type==="layout"&&S.name==="collapsed")).subscribe(()=>this.affix.updatePosition({})),Ze(i.change,e.events.pipe(k(S=>S instanceof ee)),o.change).pipe(D(),k(()=>this.inited)).subscribe(()=>this.refresh())}refresh(){this.setTitle().genBreadcrumb(),this.cdr.detectChanges()}genBreadcrumb(){if(this.breadcrumb||!this.autoBreadcrumb||this.menus.length<=0){this.paths=[];return}let t=[];this.menus.forEach(n=>{if(typeof n.hideInBreadcrumb<"u"&&n.hideInBreadcrumb)return;let e=n.text;n.i18n&&this.i18nSrv&&(e=this.i18nSrv.fanyi(n.i18n)),t.push({title:e,link:n.link&&[n.link]})}),this.home&&t.splice(0,0,{title:this.homeI18n&&this.i18nSrv&&this.i18nSrv.fanyi(this.homeI18n)||this.home,link:[this.homeLink]}),this.paths=t}setTitle(){if(this._title==null&&this._titleTpl==null&&this.autoTitle&&this.menus.length>0){let t=this.menus[this.menus.length-1],n=t.text;t.i18n&&this.i18nSrv&&(n=this.i18nSrv.fanyi(t.i18n)),this._titleVal=n}return this._titleVal&&this.syncTitle&&(this.titleSrv&&this.titleSrv.setTitle(this._titleVal),!this.inited&&this.reuseSrv&&(this.reuseSrv.title=this._titleVal)),this}checkContent(){It(this.conTpl.nativeElement)?this.renderer.setAttribute(this.conTpl.nativeElement,"hidden",""):this.renderer.removeAttribute(this.conTpl.nativeElement,"hidden")}ngOnInit(){this.dir=this.directionality.value,this.dir$.subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.refresh(),this.inited=!0}ngAfterViewInit(){this.checkContent()}ngOnChanges(){this.inited&&this.refresh()}};ae.\u0275fac=function(n){return new(n||ae)(u(Ct),u(Me),u(I),u(we),u(Be,8),u(Tt,8),u(oe,8),u(L),u(gt),u(Oe),u(ie,8))},ae.\u0275cmp=v({type:ae,selectors:[["page-header"]],viewQuery:function(n,e){if(n&1&&(he(Ri,5),he(Mi,5)),n&2){let i;de(i=fe())&&(e.conTpl=i.first),de(i=fe())&&(e.affix=i.first)}},inputs:{title:"title",titleSub:"titleSub",loading:"loading",wide:"wide",home:"home",homeLink:"homeLink",homeI18n:"homeI18n",autoBreadcrumb:"autoBreadcrumb",autoTitle:"autoTitle",syncTitle:"syncTitle",fixed:"fixed",fixedOffsetTop:"fixedOffsetTop",breadcrumb:"breadcrumb",recursiveBreadcrumb:"recursiveBreadcrumb",logo:"logo",action:"action",content:"content",extra:"extra",tab:"tab"},exportAs:["pageHeader"],features:[Se],ngContentSelectors:nn,decls:4,vars:1,consts:[[3,"nzOffsetTop"],["phTpl",""],["affix",""],[3,"ngTemplateOutlet"],[1,"page-header"],[3,"ngClass"],[1,"d-block",3,"nzLoading","nzTitle","nzActive","nzParagraph","nzAvatar"],[1,"page-header__detail"],["class","page-header__logo"],[1,"page-header__main"],[1,"page-header__row"],["class","page-header__title"],["class","page-header__action"],[1,"page-header__desc",3,"cdkObserveContent"],["conTpl",""],["class","page-header__extra"],[3,"routerLink"],[1,"page-header__logo"],[1,"page-header__title"],[4,"nzStringTemplateOutlet"],[1,"page-header__action"],[1,"page-header__extra"]],template:function(n,e){n&1&&(W(),p(0,zi,3,2,"nz-affix",0)(1,ki,1,1)(2,tn,18,19,"ng-template",null,1,J)),n&2&&g(0,e.isBrowser&&e.fixed?0:1)},dependencies:[ut,Z,ft,Mt,Pt,Vt,Ce,Qe,De],encapsulation:2,changeDetection:0});var T=ae;f([x()],T.prototype,"loading",void 0);f([x()],T.prototype,"wide",void 0);f([x()],T.prototype,"autoBreadcrumb",void 0);f([x()],T.prototype,"autoTitle",void 0);f([x()],T.prototype,"syncTitle",void 0);f([x()],T.prototype,"fixed",void 0);f([_e()],T.prototype,"fixedOffsetTop",void 0);f([x()],T.prototype,"recursiveBreadcrumb",void 0);var rn=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=ye({type:t}),t.\u0275inj=Te({imports:[ke,_t,Et,Ut,$t,Qt,Ae]});let r=t;return r})();export{y as a,Qe as b,Ce as c,Qt as d,T as e,rn as f};
