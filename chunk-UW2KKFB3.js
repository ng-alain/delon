import{Ba as H,Be as w,C as P,F as D,Gb as V,Hb as X,Jb as G,Kb as Y,Lb as J,Ld as tt,Oe as b,Rd as et,Sa as k,Va as $,Wa as Q,Wd as it,X as R,a as g,b as E,ca as M,di as ot,fa as r,h as B,ke as O,m as L,ne as S,pa as F,q as z,qa as I,qi as st,r as c,sa as j,vb as U,wa as W,wb as q,x as A,yc as K,za as Z}from"./chunk-6YVQZL4D.js";var lt=["fixedEl"],ft=["*"],x=(function(o){return o.resize="resize",o.scroll="scroll",o.touchstart="touchstart",o.touchmove="touchmove",o.touchend="touchend",o.pageshow="pageshow",o.load="LOAD",o})(x||{});function at(o){return typeof window<"u"&&o===window}function nt(o){return at(o)?{top:0,left:0,bottom:0}:o.getBoundingClientRect()}var ct="affix",h="ant-affix",ht=20,T={},Bt=(()=>{let o,_=[],y=[],d,C=[],N=[];return class v{static{let e=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[b()],d=[b()],z(null,null,o,{kind:"field",name:"nzOffsetTop",static:!1,private:!1,access:{has:t=>"nzOffsetTop"in t,get:t=>t.nzOffsetTop,set:(t,i)=>{t.nzOffsetTop=i}},metadata:e},_,y),z(null,null,d,{kind:"field",name:"nzOffsetBottom",static:!1,private:!1,access:{has:t=>"nzOffsetBottom"in t,get:t=>t.nzOffsetBottom,set:(t,i)=>{t.nzOffsetBottom=i}},metadata:e},C,N),e&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e})}scrollSrv=r(ot);ngZone=r(j);platform=r(et);renderer=r(k);nzResizeObserver=r(st);directionality=r(it);destroyRef=r(I);document=r(F);placeholderNode=r(H).nativeElement;_nzModuleName=ct;fixedEl;nzTarget;nzOffsetTop=c(this,_,void 0);nzOffsetBottom=(c(this,y),c(this,C,void 0));nzChange=(c(this,N),K());affixStyle;placeholderStyle;positionChangeSubscription=B.EMPTY;offsetChanged$=new L(1);timeout;get target(){let e=this.nzTarget;return(typeof e=="string"?this.document.querySelector(e):e)||window}constructor(){W(()=>{this.directionality.valueSignal(),this.registerListeners(),this.updatePosition(T)}),this.destroyRef.onDestroy(()=>{this.removeListeners()})}ngOnChanges(e){let{nzOffsetBottom:t,nzOffsetTop:i,nzTarget:s}=e;(t||i)&&this.offsetChanged$.next(),s&&this.registerListeners()}registerListeners(){if(!this.platform.isBrowser)return;this.removeListeners();let e=this.target===window?this.document.body:this.target;this.positionChangeSubscription=this.ngZone.runOutsideAngular(()=>D(...Object.keys(x).map(t=>P(this.target,t)),this.offsetChanged$.pipe(A(()=>T)),this.nzResizeObserver.observe(e)).pipe(R(ht,void 0,{trailing:!0}),tt(this.destroyRef)).subscribe(t=>this.updatePosition(t))),this.timeout=setTimeout(()=>this.updatePosition(T))}removeListeners(){clearTimeout(this.timeout),this.positionChangeSubscription.unsubscribe()}getOffset(e,t){let i=e.getBoundingClientRect(),s=nt(t),n=this.scrollSrv.getScroll(t,!0),m=this.scrollSrv.getScroll(t,!1),a=this.document.body,l=a.clientTop||0,f=a.clientLeft||0;return{top:i.top-s.top+n-l,left:i.left-s.left+m-f,width:i.width,height:i.height}}setAffixStyle(e,t){let i=this.affixStyle;if(e.type==="scroll"&&i&&t&&this.target===window||O(i,t))return;let s=!!t,n=this.fixedEl.nativeElement;this.renderer.setStyle(n,"cssText",w(t)),this.affixStyle=t,s?n.classList.add(h):n.classList.remove(h),this.updateRtlClass(),(t&&!i||!t&&i)&&this.nzChange.emit(s)}setPlaceholderStyle(e){let t=this.placeholderStyle;O(e,t)||(this.renderer.setStyle(this.placeholderNode,"cssText",w(e)),this.placeholderStyle=e)}syncPlaceholderStyle(e){if(!this.affixStyle)return;this.renderer.setStyle(this.placeholderNode,"cssText",""),this.placeholderStyle=void 0;let t={width:this.placeholderNode.offsetWidth,height:this.fixedEl.nativeElement.offsetHeight};this.setAffixStyle(e,g(g({},this.affixStyle),t)),this.setPlaceholderStyle(t)}updatePosition(e){if(!this.platform.isBrowser)return;let t=this.target,i=this.nzOffsetTop,s=this.scrollSrv.getScroll(t,!0),n=this.getOffset(this.placeholderNode,t),m=this.fixedEl.nativeElement,a={width:m.offsetWidth,height:m.offsetHeight},l={top:!1,bottom:!1};typeof i!="number"&&typeof this.nzOffsetBottom!="number"?(l.top=!0,i=0):(l.top=typeof i=="number",l.bottom=typeof this.nzOffsetBottom=="number");let f=nt(t),rt=t.innerHeight||t.clientHeight;if(s>=n.top-i&&l.top){let p=n.width,u=f.top+i;this.setAffixStyle(e,{position:"fixed",top:u,left:f.left+n.left,width:p}),this.setPlaceholderStyle({width:p,height:a.height})}else if(s<=n.top+a.height+this.nzOffsetBottom-rt&&l.bottom){let p=t===window?0:window.innerHeight-f.bottom,u=n.width;this.setAffixStyle(e,{position:"fixed",bottom:p+this.nzOffsetBottom,left:f.left+n.left,width:u}),this.setPlaceholderStyle({width:u,height:n.height})}else e.type===x.resize&&this.affixStyle&&this.affixStyle.position==="fixed"&&this.placeholderNode.offsetWidth?this.setAffixStyle(e,E(g({},this.affixStyle),{width:this.placeholderNode.offsetWidth})):this.setAffixStyle(e),this.setPlaceholderStyle();e.type==="resize"&&this.syncPlaceholderStyle(e)}updateRtlClass(){let e=this.fixedEl.nativeElement;this.directionality.valueSignal()==="rtl"&&e.classList.contains(h)?e.classList.add(`${h}-rtl`):e.classList.remove(`${h}-rtl`)}static \u0275fac=function(t){return new(t||v)};static \u0275cmp=$({type:v,selectors:[["nz-affix"]],viewQuery:function(t,i){if(t&1&&G(lt,7),t&2){let s;Y(s=J())&&(i.fixedEl=s.first)}},inputs:{nzTarget:"nzTarget",nzOffsetTop:[2,"nzOffsetTop","nzOffsetTop",S],nzOffsetBottom:[2,"nzOffsetBottom","nzOffsetBottom",S]},outputs:{nzChange:"nzChange"},exportAs:["nzAffix"],features:[Z],ngContentSelectors:ft,decls:3,vars:0,consts:[["fixedEl",""]],template:function(t,i){t&1&&(V(),U(0,"div",null,0),X(2),q())},encapsulation:2,changeDetection:0})}})(),Lt=(()=>{class o{static \u0275fac=function(d){return new(d||o)};static \u0275mod=Q({type:o});static \u0275inj=M({})}return o})();export{Bt as a,Lt as b};
