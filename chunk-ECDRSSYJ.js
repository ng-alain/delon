import{e as tt}from"./chunk-FGVAJJ3X.js";import{F as et,e as Ze,h as Qe,l as Ye,n as Xe,o as Je,y as ne}from"./chunk-7BM3L5ZS.js";import{$a as v,Ab as Q,Ba as ze,Bb as ye,Db as ve,Fb as g,Gb as V,Gc as W,H as y,Hb as j,Hc as C,I as ue,Ib as xe,Jd as Oe,Kb as Le,La as f,Lb as Se,Ld as T,Oc as He,Oe as w,Pb as Y,Rb as I,Rd as Ve,Sa as Ne,T as pe,Tb as Ae,Ub as P,Ue as We,Va as L,Vb as q,W as fe,Wa as Z,Wd as je,Xa as R,a as z,ba as E,ca as B,ch as $e,da as me,dh as Ke,ee as J,eh as Ue,fa as h,fb as _e,gb as ke,h as ce,hb as be,hc as Me,jc as X,k as F,ka as G,kb as S,kc as Fe,l as de,la as $,le as Pe,mb as A,me as qe,nc as De,oc as Ee,pa as ge,q as D,qa as K,r as N,rb as k,sa as Ce,sb as b,sc as Ie,tb as x,ub as Te,wc as we,wg as Be,x as he,xg as Ge,xh as ie,yb as H,yg as ee,za as U,zb as O,zc as Re,zg as te}from"./chunk-HYQTCAQ6.js";var ae=["*"],ot=r=>[r],lt=r=>({$implicit:r});function ct(r,n){if(r&1&&(H(0),P(1),O()),r&2){let e=g(2);f(),q(e.innerTip)}}function dt(r,n){if(r&1){let e=ye();b(0,"div",2),be(function(){G(e);let i=g();return $(i.nzValidateAnimationLeave())}),ke(function(){G(e);let i=g();return $(i.nzValidateAnimationEnter())}),b(1,"div",4),v(2,ct,2,1,"ng-container",5),x()()}if(r&2){let e=g();f(),Ae(X(4,ot,"ant-form-item-explain-"+e.status)),f(),k("nzStringTemplateOutlet",e.innerTip)("nzStringTemplateOutletContext",X(6,lt,e.validateControl))}}function ht(r,n){if(r&1&&(H(0),P(1),O()),r&2){let e=g(2);f(),q(e.nzExtra)}}function ut(r,n){if(r&1&&(b(0,"div",3),v(1,ht,2,1,"ng-container",6),x()),r&2){let e=g();f(),k("nzStringTemplateOutlet",e.nzExtra)}}var pt=(r,n)=>({required:r,$implicit:n});function ft(r,n){if(r&1&&(H(0),Te(1,"nz-icon",4),O()),r&2){let e=n.$implicit,t=g(3);f(),k("nzType",e)("nzTheme",t.tooltipIcon.theme)}}function mt(r,n){if(r&1&&(b(0,"span",1),v(1,ft,2,2,"ng-container",3),x()),r&2){let e=g(2);k("nzTooltipTitle",e.nzTooltipTitle),f(),k("nzStringTemplateOutlet",e.tooltipIcon.type)}}function gt(r,n){r&1&&(b(0,"span",2),P(1),De(2,"nzI18n"),x()),r&2&&(f(),q(Ee(2,1,"Form.optional")))}function Ct(r,n){if(r&1&&(j(0),S(1,mt,2,2,"span",1),S(2,gt,3,3,"span",2)),r&2){let e=g();f(),A(e.nzTooltipTitle?1:-1),f(),A((e.nzRequiredMark==null?null:e.nzRequiredMark())==="optional"&&!e.nzRequired?2:-1)}}function zt(r,n){r&1&&Q(0)}function Nt(r,n){if(r&1&&v(0,zt,1,0,"ng-container",5),r&2){let e=g(),t=Y(2);k("ngTemplateOutlet",e.nzRequiredMark())("ngTemplateOutletContext",Fe(2,pt,e.nzRequired,t))}}function _t(r,n){r&1&&Q(0)}function kt(r,n){if(r&1&&v(0,_t,1,0,"ng-container",6),r&2){g();let e=Y(2);k("ngTemplateOutlet",e)}}var bt=(()=>{class r{cdr=h(W);status="";hasFeedback=!1;withHelpClass=!1;setWithHelpViaTips(e){this.withHelpClass=e,this.cdr.markForCheck()}setStatus(e){this.status=e,this.cdr.markForCheck()}setHasFeedback(e){this.hasFeedback=e,this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=L({type:r,selectors:[["nz-form-item"]],hostAttrs:[1,"ant-form-item"],hostVars:12,hostBindings:function(t,i){t&2&&I("ant-form-item-has-success",i.status==="success")("ant-form-item-has-warning",i.status==="warning")("ant-form-item-has-error",i.status==="error")("ant-form-item-is-validating",i.status==="validating")("ant-form-item-has-feedback",i.hasFeedback&&i.status)("ant-form-item-with-help",i.withHelpClass)},exportAs:["nzFormItem"],ngContentSelectors:ae,decls:1,vars:0,template:function(t,i){t&1&&(V(),j(0))},encapsulation:2,changeDetection:0})}return r})(),Tt="form",oe={type:"question-circle",theme:"outline"},nt=(()=>{let r,n=[],e=[],t,i=[],s=[],a,o=[],l=[],d,u=[],_=[];return class se{static{let p=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;r=[w()],t=[w()],a=[w()],d=[w()],D(null,null,r,{kind:"field",name:"nzNoColon",static:!1,private:!1,access:{has:c=>"nzNoColon"in c,get:c=>c.nzNoColon,set:(c,m)=>{c.nzNoColon=m}},metadata:p},n,e),D(null,null,t,{kind:"field",name:"nzAutoTips",static:!1,private:!1,access:{has:c=>"nzAutoTips"in c,get:c=>c.nzAutoTips,set:(c,m)=>{c.nzAutoTips=m}},metadata:p},i,s),D(null,null,a,{kind:"field",name:"nzTooltipIcon",static:!1,private:!1,access:{has:c=>"nzTooltipIcon"in c,get:c=>c.nzTooltipIcon,set:(c,m)=>{c.nzTooltipIcon=m}},metadata:p},o,l),D(null,null,d,{kind:"field",name:"nzLabelWrap",static:!1,private:!1,access:{has:c=>"nzLabelWrap"in c,get:c=>c.nzLabelWrap,set:(c,m)=>{c.nzLabelWrap=m}},metadata:p},u,_),p&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p})}destroyRef=h(K);directionality=h(je);_nzModuleName=Tt;nzLayout="horizontal";nzNoColon=N(this,n,!1);nzAutoTips=(N(this,e),N(this,i,{}));nzDisableAutoTips=(N(this,s),!1);nzTooltipIcon=N(this,o,oe);nzLabelAlign=(N(this,l),"right");nzLabelWrap=N(this,u,!1);nzRequiredMark=(N(this,_),Re(!0));dir="ltr";inputChanges$=new F;getInputObservable(p){return this.inputChanges$.pipe(y(c=>p in c),he(c=>c[p]))}constructor(){this.dir=this.directionality.value,this.directionality.change?.pipe(T()).subscribe(p=>{this.dir=p}),this.destroyRef.onDestroy(()=>{this.inputChanges$.complete()})}ngOnChanges(p){this.inputChanges$.next(p)}static \u0275fac=function(c){return new(c||se)};static \u0275dir=R({type:se,selectors:[["","nz-form",""]],hostAttrs:[1,"ant-form"],hostVars:8,hostBindings:function(c,m){c&2&&I("ant-form-horizontal",m.nzLayout==="horizontal")("ant-form-vertical",m.nzLayout==="vertical")("ant-form-inline",m.nzLayout==="inline")("ant-form-rtl",m.dir==="rtl")},inputs:{nzLayout:"nzLayout",nzNoColon:[2,"nzNoColon","nzNoColon",C],nzAutoTips:"nzAutoTips",nzDisableAutoTips:[2,"nzDisableAutoTips","nzDisableAutoTips",C],nzTooltipIcon:"nzTooltipIcon",nzLabelAlign:"nzLabelAlign",nzLabelWrap:[2,"nzLabelWrap","nzLabelWrap",C],nzRequiredMark:[1,"nzRequiredMark"]},exportAs:["nzForm"],features:[U]})}})(),yt=(()=>{class r{cdr=h(W);i18n=h($e);nzFormStatusService=h(ne);destroyRef=h(K);_hasFeedback=!1;validateChanges=ce.EMPTY;validateString=null;localeId;autoErrorTip;get disableAutoTips(){return this.nzDisableAutoTips!==void 0?qe(this.nzDisableAutoTips):!!this.nzFormDirective?.nzDisableAutoTips}nzValidateAnimationEnter=ie(()=>"ant-form-validate_animation-enter");nzValidateAnimationLeave=ie(()=>"ant-form-validate_animation-leave");status="";validateControl=null;innerTip=null;defaultValidateControl;nzSuccessTip;nzWarningTip;nzErrorTip;nzValidatingTip;nzExtra;nzAutoTips={};nzDisableAutoTips;set nzHasFeedback(e){this._hasFeedback=e,this.nzFormStatusService.formStatusChanges.next({status:this.status,hasFeedback:this._hasFeedback}),this.nzFormItemComponent&&this.nzFormItemComponent.setHasFeedback(this._hasFeedback)}get nzHasFeedback(){return this._hasFeedback}set nzValidateStatus(e){e instanceof Qe||e instanceof Ye?(this.validateControl=e,this.validateString=null,this.watchControl()):e instanceof Je?(this.validateControl=e.control,this.validateString=null,this.watchControl()):(this.validateString=e,this.validateControl=null,this.setStatus())}watchControl(){this.validateChanges.unsubscribe(),this.validateControl&&this.validateControl.statusChanges&&(this.validateChanges=this.validateControl.statusChanges.pipe(pe(null),T(this.destroyRef)).subscribe(()=>{this.disableAutoTips||this.updateAutoErrorTip(),this.setStatus(),this.cdr.markForCheck()}))}setStatus(){this.status=this.getControlStatus(this.validateString),this.innerTip=this.getInnerTip(this.status),this.nzFormStatusService.formStatusChanges.next({status:this.status,hasFeedback:this.nzHasFeedback}),this.nzFormItemComponent&&(this.nzFormItemComponent.setWithHelpViaTips(!!this.innerTip),this.nzFormItemComponent.setStatus(this.status))}getControlStatus(e){let t;return e==="warning"||this.validateControlStatus("INVALID","warning")?t="warning":e==="error"||this.validateControlStatus("INVALID")?t="error":e==="validating"||e==="pending"||this.validateControlStatus("PENDING")?t="validating":e==="success"||this.validateControlStatus("VALID")?t="success":t="",t}validateControlStatus(e,t){if(this.validateControl){let{dirty:i,touched:s,status:a}=this.validateControl;return(!!i||!!s)&&(t?this.validateControl.hasError(t):a===e)}else return!1}getInnerTip(e){switch(e){case"error":return!this.disableAutoTips&&this.autoErrorTip||this.nzErrorTip||null;case"validating":return this.nzValidatingTip||null;case"success":return this.nzSuccessTip||null;case"warning":return this.nzWarningTip||null;default:return null}}updateAutoErrorTip(){if(this.validateControl){let e=this.validateControl.errors||{},t="";for(let i in e)if(e.hasOwnProperty(i)&&(t=e[i]?.[this.localeId]??this.nzAutoTips?.[this.localeId]?.[i]??this.nzAutoTips.default?.[i]??this.nzFormDirective?.nzAutoTips?.[this.localeId]?.[i]??this.nzFormDirective?.nzAutoTips.default?.[i]),t)break;this.autoErrorTip=t}}subscribeAutoTips(e){e?.pipe(T(this.destroyRef)).subscribe(()=>{this.disableAutoTips||(this.updateAutoErrorTip(),this.setStatus(),this.cdr.markForCheck())})}nzFormItemComponent=h(bt,{host:!0,optional:!0});nzFormDirective=h(nt,{optional:!0});constructor(){this.subscribeAutoTips(this.i18n.localeChange.pipe(fe(e=>this.localeId=e.locale))),this.subscribeAutoTips(this.nzFormDirective?.getInputObservable("nzAutoTips")),this.subscribeAutoTips(this.nzFormDirective?.getInputObservable("nzDisableAutoTips").pipe(y(()=>this.nzDisableAutoTips===void 0)))}ngOnChanges(e){let{nzDisableAutoTips:t,nzAutoTips:i,nzSuccessTip:s,nzWarningTip:a,nzErrorTip:o,nzValidatingTip:l}=e;t||i?(this.updateAutoErrorTip(),this.setStatus()):(s||a||o||l)&&this.setStatus()}ngOnInit(){this.setStatus()}ngAfterContentInit(){!this.validateControl&&!this.validateString&&(this.defaultValidateControl instanceof Xe?this.nzValidateStatus=this.defaultValidateControl.control:this.nzValidateStatus=this.defaultValidateControl)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=L({type:r,selectors:[["nz-form-control"]],contentQueries:function(t,i,s){if(t&1&&xe(s,Ze,5),t&2){let a;Le(a=Se())&&(i.defaultValidateControl=a.first)}},hostAttrs:[1,"ant-form-item-control"],inputs:{nzSuccessTip:"nzSuccessTip",nzWarningTip:"nzWarningTip",nzErrorTip:"nzErrorTip",nzValidatingTip:"nzValidatingTip",nzExtra:"nzExtra",nzAutoTips:"nzAutoTips",nzDisableAutoTips:[2,"nzDisableAutoTips","nzDisableAutoTips",C],nzHasFeedback:[2,"nzHasFeedback","nzHasFeedback",C],nzValidateStatus:"nzValidateStatus"},exportAs:["nzFormControl"],features:[Me([ne]),U],ngContentSelectors:ae,decls:5,vars:2,consts:[[1,"ant-form-item-control-input"],[1,"ant-form-item-control-input-content"],[1,"ant-form-item-explain","ant-form-item-explain-connected"],[1,"ant-form-item-extra"],["role","alert"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[4,"nzStringTemplateOutlet"]],template:function(t,i){t&1&&(V(),b(0,"div",0)(1,"div",1),j(2),x()(),S(3,dt,3,8,"div",2),S(4,ut,2,1,"div",3)),t&2&&(f(3),A(i.innerTip?3:-1),f(),A(i.nzExtra?4:-1))},dependencies:[te,ee],encapsulation:2,changeDetection:0})}return r})();function it(r){let n=typeof r=="string"?{type:r}:r;return z(z({},oe),n)}var vt=(()=>{class r{cdr=h(W);nzFor;nzRequired=!1;set nzNoColon(e){this.noColon=e}get nzNoColon(){return this.noColon!=="default"?this.noColon:!!this.nzFormDirective?.nzNoColon}noColon="default";nzTooltipTitle;set nzTooltipIcon(e){this._tooltipIcon=it(e)}get tooltipIcon(){return this._tooltipIcon!=="default"?this._tooltipIcon:it(this.nzFormDirective?.nzTooltipIcon||oe)}_tooltipIcon="default";set nzLabelAlign(e){this.labelAlign=e}get nzLabelAlign(){return this.labelAlign!=="default"?this.labelAlign:this.nzFormDirective?.nzLabelAlign||"right"}labelAlign="default";set nzLabelWrap(e){this.labelWrap=e}get nzLabelWrap(){return this.labelWrap!=="default"?this.labelWrap:!!this.nzFormDirective?.nzLabelWrap}labelWrap="default";nzFormDirective=h(nt,{skipSelf:!0,optional:!0});nzRequiredMark=this.nzFormDirective?.nzRequiredMark;isNzRequiredMarkTemplate=we(()=>Pe(this.nzRequiredMark?.()));constructor(){this.nzFormDirective&&(this.nzFormDirective.getInputObservable("nzNoColon").pipe(y(()=>this.noColon==="default"),T()).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzTooltipIcon").pipe(y(()=>this._tooltipIcon==="default"),T()).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzLabelAlign").pipe(y(()=>this.labelAlign==="default"),T()).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzLabelWrap").pipe(y(()=>this.labelWrap==="default"),T()).subscribe(()=>this.cdr.markForCheck()))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=L({type:r,selectors:[["nz-form-label"]],hostAttrs:[1,"ant-form-item-label"],hostVars:4,hostBindings:function(t,i){t&2&&I("ant-form-item-label-left",i.nzLabelAlign==="left")("ant-form-item-label-wrap",i.nzLabelWrap)},inputs:{nzFor:"nzFor",nzRequired:[2,"nzRequired","nzRequired",C],nzNoColon:[2,"nzNoColon","nzNoColon",C],nzTooltipTitle:"nzTooltipTitle",nzTooltipIcon:"nzTooltipIcon",nzLabelAlign:"nzLabelAlign",nzLabelWrap:[2,"nzLabelWrap","nzLabelWrap",C]},exportAs:["nzFormLabel"],ngContentSelectors:ae,decls:5,vars:10,consts:[["labelTemplate",""],["nz-tooltip","",1,"ant-form-item-tooltip",3,"nzTooltipTitle"],[1,"ant-form-item-optional"],[4,"nzStringTemplateOutlet"],[3,"nzType","nzTheme"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"]],template:function(t,i){t&1&&(V(),b(0,"label"),v(1,Ct,3,2,"ng-template",null,0,Ie),S(3,Nt,1,5,"ng-container")(4,kt,1,1,"ng-container"),x()),t&2&&(I("ant-form-item-no-colon",i.nzNoColon)("ant-form-item-required",i.nzRequired)("ant-form-item-required-mark-optional",(i.nzRequiredMark==null?null:i.nzRequiredMark())==="optional"||i.isNzRequiredMarkTemplate())("ant-form-item-required-mark-hidden",(i.nzRequiredMark==null?null:i.nzRequiredMark())===!1),_e("for",i.nzFor),f(3),A(i.isNzRequiredMarkTemplate()?3:4))},dependencies:[te,ee,et,Ge,Be,He,Ue,Ke],encapsulation:2,changeDetection:0})}return r})();var ni=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Z({type:r});static \u0275inj=B({imports:[vt,yt,tt]})}return r})();var xt=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=L({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(t,i){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return r})();var yi=(()=>{class r{_elementRef=h(ze);_platform=h(Ve);_ngZone=h(Ce);_renderer=h(Ne);_resizeEvents=new F;_previousValue;_initialHeight;_destroyed=new F;_listenerCleanups;_minRows;_maxRows;_enabled=!0;_previousMinRows=-1;_textareaElement;get minRows(){return this._minRows}set minRows(e){this._minRows=J(e),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(e){this._maxRows=J(e),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(e){this._cachedPlaceholderHeight=void 0,e?this._textareaElement.setAttribute("placeholder",e):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_cachedLineHeight;_cachedPlaceholderHeight;_document=h(ge);_hasFocus;_isViewInited=!1;constructor(){h(We).load(xt),this._textareaElement=this._elementRef.nativeElement}_setMinHeight(){let e=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;e&&(this._textareaElement.style.minHeight=e)}_setMaxHeight(){let e=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;e&&(this._textareaElement.style.maxHeight=e)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[this._renderer.listen("window","resize",()=>this._resizeEvents.next()),this._renderer.listen(this._textareaElement,"focus",this._handleFocusEvent),this._renderer.listen(this._textareaElement,"blur",this._handleFocusEvent)],this._resizeEvents.pipe(ue(16)).subscribe(()=>{this._cachedLineHeight=this._cachedPlaceholderHeight=void 0,this.resizeToFitContent(!0)})}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e()),this._resizeEvents.complete(),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let e=this._textareaElement.cloneNode(!1),t=e.style;e.rows=1,t.position="absolute",t.visibility="hidden",t.border="none",t.padding="0",t.height="",t.minHeight="",t.maxHeight="",t.top=t.bottom=t.left=t.right="auto",t.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,e.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){let e=this._textareaElement,t=e.style.marginBottom||"",i=this._platform.FIREFOX,s=i&&this._hasFocus,a=i?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";s&&(e.style.marginBottom=`${e.clientHeight}px`),e.classList.add(a);let o=e.scrollHeight-4;return e.classList.remove(a),s&&(e.style.marginBottom=t),o}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||this._cachedPlaceholderHeight!=null)return;if(!this.placeholder){this._cachedPlaceholderHeight=0;return}let e=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=e}_handleFocusEvent=e=>{this._hasFocus=e.type==="focus"};ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(e=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;let t=this._elementRef.nativeElement,i=t.value;if(!e&&this._minRows===this._previousMinRows&&i===this._previousValue)return;let s=this._measureScrollHeight(),a=Math.max(s,this._cachedPlaceholderHeight||0);t.style.height=`${a}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(t)):setTimeout(()=>this._scrollToCaretPosition(t))}),this._previousValue=i,this._previousMinRows=this._minRows}reset(){this._initialHeight!==void 0&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_scrollToCaretPosition(e){let{selectionStart:t,selectionEnd:i}=e;!this._destroyed.isStopped&&this._hasFocus&&e.setSelectionRange(t,i)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=R({type:r,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,i){t&1&&ve("input",function(){return i._noopInputHandler()})},inputs:{minRows:[0,"cdkAutosizeMinRows","minRows"],maxRows:[0,"cdkAutosizeMaxRows","maxRows"],enabled:[2,"cdkTextareaAutosize","enabled",C],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]})}return r})();var M=class r{_title="";key;level=0;origin;parentNode=null;_icon="";_children=[];_isLeaf=!1;_isChecked=!1;_isSelectable=!1;_isDisabled=!1;_isDisableCheckbox=!1;_isExpanded=!1;_isHalfChecked=!1;_isSelected=!1;_isLoading=!1;canHide=!1;isMatched=!1;service=null;component;isStart;isEnd;get treeService(){return this.service||this.parentNode&&this.parentNode.treeService}constructor(n,e=null,t=null){if(n instanceof r)return n;this.service=t||null,this.origin=n,this.key=n.key,this.parentNode=e,this._title=n.title||"---",this._icon=n.icon||"",this._isLeaf=n.isLeaf||!1,this._children=[],this._isChecked=n.checked||!1,this._isSelectable=n.disabled||n.selectable!==!1,this._isDisabled=n.disabled||!1,this._isDisableCheckbox=n.disableCheckbox||!1,this._isExpanded=n.isLeaf?!1:n.expanded||!1,this._isHalfChecked=!1,this._isSelected=!n.disabled&&n.selected||!1,this._isLoading=!1,this.isMatched=!1,e?this.level=e.level+1:this.level=0;let i=this.treeService;i?.treeNodePostProcessor?.(this),typeof n.children<"u"&&n.children!==null&&n.children.forEach(s=>{i&&!i.isCheckStrictly&&n.checked&&!n.disabled&&!s.disabled&&!s.disableCheckbox&&(s.checked=n.checked),this._children.push(new r(s,this))})}get title(){return this._title}set title(n){this._title=n,this.update()}get icon(){return this._icon}set icon(n){this._icon=n,this.update()}get children(){return this._children}set children(n){this._children=n,this.update()}get isLeaf(){return this._isLeaf}set isLeaf(n){this._isLeaf=n,this.update()}get isChecked(){return this._isChecked}set isChecked(n){this._isChecked=n,this.origin.checked=n,this.afterValueChange("isChecked")}get isHalfChecked(){return this._isHalfChecked}set isHalfChecked(n){this._isHalfChecked=n,this.afterValueChange("isHalfChecked")}get isSelectable(){return this._isSelectable}set isSelectable(n){this._isSelectable=n,this.update()}get isDisabled(){return this._isDisabled}set isDisabled(n){this._isDisabled=n,this.update()}get isDisableCheckbox(){return this._isDisableCheckbox}set isDisableCheckbox(n){this._isDisableCheckbox=n,this.update()}get isExpanded(){return this._isExpanded}set isExpanded(n){this._isExpanded=n,this.origin.expanded=n,this.afterValueChange("isExpanded"),this.afterValueChange("reRender")}get isSelected(){return this._isSelected}set isSelected(n){this._isSelected=n,this.origin.selected=n,this.afterValueChange("isSelected")}get isLoading(){return this._isLoading}set isLoading(n){this._isLoading=n,this.update()}setSyncChecked(n=!1,e=!1){this.setChecked(n,e),this.treeService&&!this.treeService.isCheckStrictly&&this.treeService.conduct(this)}setChecked(n=!1,e=!1){this.origin.checked=n,this.isChecked=n,this.isHalfChecked=e}setExpanded(n){this._isExpanded=n,this.origin.expanded=n,this.afterValueChange("isExpanded")}getParentNode(){return this.parentNode}getChildren(){return this.children}addChildren(n,e=-1){this.isLeaf||(n.forEach(t=>{let i=a=>{a.getChildren().forEach(o=>{o.level=o.getParentNode().level+1,o.origin.level=o.level,i(o)})},s=t;s instanceof r?s.parentNode=this:s=new r(t,this),s.level=this.level+1,s.origin.level=s.level,i(s);try{e===-1?this.children.push(s):this.children.splice(e,0,s)}catch{}}),this.origin.children=this.getChildren().map(t=>t.origin),this.isLoading=!1),this.afterValueChange("addChildren"),this.afterValueChange("reRender")}clearChildren(){this.afterValueChange("clearChildren"),this.children=[],this.origin.children=[],this.afterValueChange("reRender")}remove(){let n=this.getParentNode();n&&(n.children=n.getChildren().filter(e=>e.key!==this.key),n.origin.children=n.origin.children.filter(e=>e.key!==this.key),this.afterValueChange("remove"),this.afterValueChange("reRender"))}afterValueChange(n){if(this.treeService)switch(n){case"isChecked":this.treeService.setCheckedNodeList(this);break;case"isHalfChecked":this.treeService.setHalfCheckedNodeList(this);break;case"isExpanded":this.treeService.setExpandedNodeList(this);break;case"isSelected":this.treeService.setNodeActive(this);break;case"clearChildren":this.treeService.afterRemove(this.getChildren());break;case"remove":this.treeService.afterRemove([this]);break;case"reRender":this.treeService.flattenTreeData(this.treeService.rootNodes,this.treeService.getExpandedNodeList().map(e=>e.key));break}this.update()}update(){this.component&&this.component.markForCheck()}};function le(r){let{isDisabled:n,isDisableCheckbox:e}=r;return!!(n||e)}function st(r,n){return n.length>0&&n.indexOf(r)>-1}function Lt(r,n){return`${r}-${n}`}function St(r,n){return r??n}function At(r=[],n=[]){let e=new Set(n===!0?[]:n),t=[];function i(s,a=null){return s.map((o,l)=>{let d=Lt(a?a.pos:"0",l),u=St(o.key,d);o.isStart=[...a?a.isStart:[],l===0],o.isEnd=[...a?a.isEnd:[],l===s.length-1];let _={parent:a,pos:d,children:[],data:o,isStart:[...a?a.isStart:[],l===0],isEnd:[...a?a.isEnd:[],l===s.length-1]};return t.push(_),n===!0||e.has(u)||o.isExpanded?_.children=i(o.children||[],_):_.children=[],_})}return i(r),t}var Ai=(()=>{class r{DRAG_SIDE_RANGE=.25;DRAG_MIN_GAP=2;isCheckStrictly=!1;isMultiple=!1;selectedNode;rootNodes=[];flattenNodes$=new de([]);selectedNodeList=[];expandedNodeList=[];checkedNodeList=[];halfCheckedNodeList=[];matchedNodeList=[];treeNodePostProcessor;initTree(e){this.rootNodes=e,this.expandedNodeList=[],this.selectedNodeList=[],this.halfCheckedNodeList=[],this.checkedNodeList=[],this.matchedNodeList=[]}flattenTreeData(e,t=[]){this.flattenNodes$.next(At(e,t).map(i=>i.data))}getSelectedNode(){return this.selectedNode}getSelectedNodeList(){return this.conductNodeState("select")}getCheckedNodeKeys(){let e=[],t=this.getCheckedNodeList(),i=s=>{s.forEach(a=>{e.push(a.key),!(a.children.length<1)&&i(a.children)})};return i(t),e}getCheckedNodeList(){return this.conductNodeState("check")}getHalfCheckedNodeList(){return this.conductNodeState("halfCheck")}getExpandedNodeList(){return this.conductNodeState("expand")}getMatchedNodeList(){return this.conductNodeState("match")}isArrayOfNzTreeNode(e){return e.every(t=>t instanceof M)}setSelectedNode(e){this.selectedNode=e}setNodeActive(e){!this.isMultiple&&e.isSelected&&(this.selectedNodeList.forEach(t=>{e.key!==t.key&&(t.isSelected=!1)}),this.selectedNodeList=[]),this.setSelectedNodeList(e,this.isMultiple)}setSelectedNodeList(e,t=!1){let i=this.getIndexOfArray(this.selectedNodeList,e.key);t?e.isSelected&&i===-1&&this.selectedNodeList.push(e):e.isSelected&&i===-1&&(this.selectedNodeList=[e]),e.isSelected||(this.selectedNodeList=this.selectedNodeList.filter(s=>s.key!==e.key))}setHalfCheckedNodeList(e){let t=this.getIndexOfArray(this.halfCheckedNodeList,e.key);e.isHalfChecked&&t===-1?this.halfCheckedNodeList.push(e):!e.isHalfChecked&&t>-1&&(this.halfCheckedNodeList=this.halfCheckedNodeList.filter(i=>e.key!==i.key))}setCheckedNodeList(e){let t=this.getIndexOfArray(this.checkedNodeList,e.key);e.isChecked&&t===-1?this.checkedNodeList.push(e):!e.isChecked&&t>-1&&(this.checkedNodeList=this.checkedNodeList.filter(i=>e.key!==i.key))}conductNodeState(e="check"){let t=[];switch(e){case"select":t=this.selectedNodeList;break;case"expand":t=this.expandedNodeList;break;case"match":t=this.matchedNodeList;break;case"check":{t=this.checkedNodeList;let i=s=>{let a=s.getParentNode();return a?this.checkedNodeList.findIndex(o=>o.key===a.key)>-1?!0:i(a):!1};this.isCheckStrictly||(t=this.checkedNodeList.filter(s=>!i(s)));break}case"halfCheck":this.isCheckStrictly||(t=this.halfCheckedNodeList);break}return t}setExpandedNodeList(e){if(e.isLeaf)return;let t=this.getIndexOfArray(this.expandedNodeList,e.key);e.isExpanded&&t===-1?this.expandedNodeList.push(e):!e.isExpanded&&t>-1&&this.expandedNodeList.splice(t,1)}setMatchedNodeList(e){let t=this.getIndexOfArray(this.matchedNodeList,e.key);e.isMatched&&t===-1?this.matchedNodeList.push(e):!e.isMatched&&t>-1&&this.matchedNodeList.splice(t,1)}refreshCheckState(e=!1){e||this.checkedNodeList.forEach(t=>{this.conduct(t,e)})}conduct(e,t=!1){let i=e.isChecked;e&&!t&&(this.conductUp(e),this.conductDown(e,i))}conductUp(e){let t=e.getParentNode();t&&(le(t)||(t.children.every(i=>le(i)||!i.isHalfChecked&&i.isChecked)?(t.isChecked=!0,t.isHalfChecked=!1):t.children.some(i=>i.isHalfChecked||i.isChecked)?(t.isChecked=!1,t.isHalfChecked=!0):(t.isChecked=!1,t.isHalfChecked=!1)),this.setCheckedNodeList(t),this.setHalfCheckedNodeList(t),this.conductUp(t))}conductDown(e,t){le(e)||(e.isChecked=t,e.isHalfChecked=!1,this.setCheckedNodeList(e),this.setHalfCheckedNodeList(e),e.children.forEach(i=>{this.conductDown(i,t)}))}afterRemove(e){let t=i=>{this.selectedNodeList=this.selectedNodeList.filter(s=>s.key!==i.key),this.expandedNodeList=this.expandedNodeList.filter(s=>s.key!==i.key),this.checkedNodeList=this.checkedNodeList.filter(s=>s.key!==i.key),i.children&&i.children.forEach(s=>{t(s)})};e.forEach(i=>{t(i)}),this.refreshCheckState(this.isCheckStrictly)}refreshDragNode(e){e.children.length===0?this.conductUp(e):e.children.forEach(t=>{this.refreshDragNode(t)})}resetNodeLevel(e){let t=e.getParentNode();t?e.level=t.level+1:e.level=0;for(let i of e.children)this.resetNodeLevel(i)}calcDropPosition(e){let{clientY:t}=e,{top:i,bottom:s,height:a}=e.target.getBoundingClientRect(),o=Math.max(a*this.DRAG_SIDE_RANGE,this.DRAG_MIN_GAP);return t<=i+o?-1:t>=s-o?1:0}dropAndApply(e,t=-1){if(!e||t>1)return;let i=e.treeService,s=e.getParentNode(),a=this.selectedNode.getParentNode();switch(a?a.children=a.children.filter(o=>o.key!==this.selectedNode.key):this.rootNodes=this.rootNodes.filter(o=>o.key!==this.selectedNode.key),t){case 0:e.addChildren([this.selectedNode]),this.resetNodeLevel(e);break;case-1:case 1:{let o=t===1?1:0;if(s){s.addChildren([this.selectedNode],s.children.indexOf(e)+o);let l=this.selectedNode.getParentNode();l&&this.resetNodeLevel(l)}else{let l=this.rootNodes.indexOf(e)+o;this.rootNodes.splice(l,0,this.selectedNode),this.rootNodes[l].parentNode=null,this.resetNodeLevel(this.rootNodes[l])}break}}this.rootNodes.forEach(o=>{o.treeService||(o.service=i),this.refreshDragNode(o)})}formatEvent(e,t,i){let s={eventName:e,node:t,event:i};switch(e){case"dragstart":case"dragenter":case"dragover":case"dragleave":case"drop":case"dragend":Object.assign(s,{dragNode:this.getSelectedNode()});break;case"click":case"dblclick":Object.assign(s,{selectedKeys:this.selectedNodeList}),Object.assign(s,{nodes:this.selectedNodeList}),Object.assign(s,{keys:this.selectedNodeList.map(a=>a.key)});break;case"check":{let a=this.getCheckedNodeList();Object.assign(s,{checkedKeys:a}),Object.assign(s,{nodes:a}),Object.assign(s,{keys:a.map(o=>o.key)});break}case"search":Object.assign(s,{matchedKeys:this.getMatchedNodeList()}),Object.assign(s,{nodes:this.getMatchedNodeList()}),Object.assign(s,{keys:this.getMatchedNodeList().map(a=>a.key)});break;case"expand":Object.assign(s,{nodes:this.expandedNodeList}),Object.assign(s,{keys:this.expandedNodeList.map(a=>a.key)});break}return s}getIndexOfArray(e,t){return e.findIndex(i=>i.key===t)}conductCheck(e,t){this.checkedNodeList=[],this.halfCheckedNodeList=[];let i=s=>{s.forEach(a=>{e===null?a.isChecked=!!a.origin.checked:st(a.key,e||[])?(a.isChecked=!0,a.isHalfChecked=!1):(a.isChecked=!1,a.isHalfChecked=!1),a.children.length>0&&i(a.children)})};i(this.rootNodes),this.refreshCheckState(t)}conductExpandedKeys(e=[]){let t=new Set(e===!0?[]:e);this.expandedNodeList=[];let i=s=>{s.forEach(a=>{a.setExpanded(e===!0||t.has(a.key)||a.isExpanded===!0),a.isExpanded&&this.setExpandedNodeList(a),a.children.length>0&&i(a.children)})};i(this.rootNodes)}conductSelectedKeys(e,t){this.selectedNodeList.forEach(s=>s.isSelected=!1),this.selectedNodeList=[];let i=s=>s.every(a=>{if(st(a.key,e)){if(a.isSelected=!0,this.setSelectedNodeList(a),!t)return!1}else a.isSelected=!1;return a.children.length>0?i(a.children):!0});i(this.rootNodes)}expandNodeAllParentBySearch(e){let t=i=>{if(i&&(i.canHide=!1,i.setExpanded(!0),this.setExpandedNodeList(i),i.getParentNode()))return t(i.getParentNode())};t(e.getParentNode())}static \u0275fac=function(t){return new(t||r)};static \u0275prov=E({token:r,factory:r.\u0275fac})}return r})(),Mi=new me(""),rt=class{nzTreeService;constructor(n){this.nzTreeService=n}coerceTreeNodes(n){let e=[];return this.nzTreeService.isArrayOfNzTreeNode(n)?e=n.map(t=>(t.service=this.nzTreeService,t)):e=n.map(t=>new M(t,null,this.nzTreeService)),e}getTreeNodes(){return this.nzTreeService.rootNodes}getTreeNodeByKey(n){let e=[],t=i=>{e.push(i),i.getChildren().forEach(s=>{t(s)})};return this.getTreeNodes().forEach(i=>{t(i)}),e.find(i=>i.key===n)||null}getCheckedNodeList(){return this.nzTreeService.getCheckedNodeList()}getSelectedNodeList(){return this.nzTreeService.getSelectedNodeList()}getHalfCheckedNodeList(){return this.nzTreeService.getHalfCheckedNodeList()}getExpandedNodeList(){return this.nzTreeService.getExpandedNodeList()}getMatchedNodeList(){return this.nzTreeService.getMatchedNodeList()}};var at=class r{cogSrv=h(Oe);c;constructor(){this.c=this.cogSrv.merge("utilArray",{deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"})}treeToArr(n,e){let t=z({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},e),i=[],s=(a,o,l=0)=>{for(let d of a){d[t.deepMapName]=l,d[t.parentMapName]=o,t.cb&&t.cb(d,o,l),i.push(d);let u=d[t.childrenMapName];u!=null&&Array.isArray(u)&&u.length>0&&s(u,d,l+1),t.clearChildren&&delete d[t.childrenMapName]}};return s(n,null),i}arrToTree(n,e){if(!Array.isArray(n)||n.length===0)return[];let t=z({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},e),i=[],s={},a=t.rootParentIdValue,o=n;if(!a){let l=o.map(u=>u[t.parentIdMapName]),d=l.findIndex(u=>u==null);a=d!==-1?l[d]:l.sort()[0]}for(let l of o){let d=l[t.idMapName],u=l[t.parentIdMapName];s[d]=s[d]??[],l[t.childrenMapName]=s[d],t.cb&&t.cb(l),u!==a?(s[u]=s[u]??[],s[u].push(l)):i.push(l)}return i}arrToTreeNode(n,e){let t=z({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},e),i=this.arrToTree(n,{idMapName:t.idMapName,parentIdMapName:t.parentIdMapName,childrenMapName:"children"});return this.visitTree(i,(s,a,o)=>{s.key=s[t.idMapName],s.title=s[t.titleMapName],s.checked=s[t.checkedMapname],s.selected=s[t.selectedMapname],s.expanded=s[t.expandedMapname],s.disabled=s[t.disabledMapname],s[t.isLeafMapName]==null?s.isLeaf=s.children.length===0:s.isLeaf=s[t.isLeafMapName],t.cb&&t.cb(s,a,o)}),i.map(s=>new M(s))}visitTree(n,e,t){t=z({childrenMapName:this.c.childrenMapName},t);let i=(s,a,o)=>{for(let l of s){e(l,a,o);let d=l[t.childrenMapName];Array.isArray(d)&&d.length>0&&i(d,l,o+1)}};i(n,null,1)}findTree(n,e,t){let i;return this.visitTree(n,s=>{i===void 0&&e(s)&&(i=s)},t),i}getKeysByTreeNode(n,e){let t=z({includeHalfChecked:!0},e),i=[];return this.visitTree(n,(s,a,o)=>{(s.isChecked||t.includeHalfChecked&&s.isHalfChecked)&&i.push(t.cb?t.cb(s,a,o):t.keyMapName?s.origin[t.keyMapName]:s.key)}),i}baseFlat(n,e,t=[]){let i=-1;for(;++i<n.length;){let s=n[i];if(e>0&&Array.isArray(s))if(e>1)this.baseFlat(s,e-1,t);else{let a=-1,o=t.length;for(;++a<s.length;)t[o+a]=s[a]}else t[t.length]=s}return t}flat(n,e=1/0){return Array.isArray(n)?this.baseFlat(n,e):n}groupBy(n,e){return Array.isArray(n)?n.reduce((t,i)=>{let s=e(i);return Object.prototype.hasOwnProperty.call(t,s)?t[s].push(i):t[s]=[i],t},{}):{}}uniq(n,e){return Array.from(n.reduce((t,i)=>{let s=e?typeof e=="string"?i[e]:e(i):i;return t.has(s)||t.set(s,i),t},new Map).values())}static \u0275fac=function(e){return new(e||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};export{bt as a,nt as b,yt as c,vt as d,ni as e,M as f,At as g,Ai as h,Mi as i,rt as j,at as k,yi as l};
