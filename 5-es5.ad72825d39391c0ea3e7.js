!function(){function e(n,t){return(e=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(n,t)}function n(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=o(e);if(n){var a=o(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return t(this,i)}}function t(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{DYYV:function(t,o,r){"use strict";r.r(o),r.d(o,"FormPagesModule",function(){return W});var c,s,u,l,f=r("tyNb"),h=r("fXoL"),d=r("3Pt+"),m=r("ofXK"),b=r("xgIS"),p=r("Kj3r"),g=new h.q("NU_MONACO_EDITOR_CONFIG"),v=!1,y=((u=function(){function e(n,t,o,r){i(this,e),this.el=n,this.doc=o,this.ngZone=r,this._disabled=!1,this.height="200px",this.delay=0,this.event=new h.n,this._config=Object.assign({baseUrl:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min"},t),this.options=this._config.defaultOptions}return a(e,[{key:"initMonaco",value:function(e,n){}},{key:"notifyEvent",value:function(e,n){var t=this;this.ngZone.run(function(){return t.event.emit(Object.assign({type:e,editor:t._editor},n))})}},{key:"setDisabled",value:function(){return this._editor&&this._editor.updateOptions({readOnly:this._disabled}),this}},{key:"init",value:function(){var e=this;v?c.then(function(){return e.initMonaco(e.options,!0)}):(v=!0,c=new Promise(function(n,t){var o=window;if(null!=o)if(o.monaco)n();else{var i=e._config.baseUrl,r=function(){o.require.config({paths:{vs:i+"/vs"}}),o.require(["vs/editor/editor.main"],function(){"function"==typeof e._config.monacoLoad&&e._config.monacoLoad(o.monaco),e.initMonaco(e.options,!0),n()},function(){t("Unable to load editor/editor.main module, please check your network environment.")})};if(o.require)r();else{var a=e.doc.createElement("script");a.type="text/javascript",a.src=i+"/vs/loader.js",a.onload=r,a.onerror=function(){return t("Unable to load ".concat(a.src,", please check your network environment."))},e.doc.getElementsByTagName("head")[0].appendChild(a)}}else n()}).catch(function(n){return e.notifyEvent("load-error",{error:n})}))}},{key:"cleanResize",value:function(){return this._resize$&&this._resize$.unsubscribe(),this}},{key:"registerResize",value:function(){var e=this;return this.cleanResize(),this._resize$=Object(b.a)(window,"resize").pipe(Object(p.a)(100)).subscribe(function(){e._editor.layout(),e.notifyEvent("resize")}),this}},{key:"updateOptions",value:function(){var e=this;this._editor&&this.ngZone.runOutsideAngular(function(){e._editor.dispose(),e.initMonaco(e._options,!1)})}},{key:"ngAfterViewInit",value:function(){var e=this;this.ngZone.runOutsideAngular(function(){return setTimeout(function(){return e.init()},+e.delay)})}},{key:"ngOnChanges",value:function(e){var n=Object.keys(e);1===n.length&&"disabled"===n[0]||this.updateOptions()}},{key:"ngOnDestroy",value:function(){this.cleanResize(),this._editor&&(this._editor.dispose(),this._editor=void 0)}},{key:"disabled",set:function(e){this._disabled="string"==typeof e||e,this.setDisabled()}},{key:"options",set:function(e){this._options=Object.assign(Object.assign({},this._config.defaultOptions),e)},get:function(){return this._options}}]),e}()).\u0275fac=function(e){return new(e||u)(h.Pb(h.l),h.Pb(g),h.Pb(m.e),h.Pb(h.z))},u.\u0275cmp=h.Jb({type:u,selectors:[["nu-monaco-base"]],inputs:{height:"height",delay:"delay",options:"options",disabled:"disabled"},outputs:{event:"event"},features:[h.zb],decls:0,vars:0,template:function(e,n){},encapsulation:2}),u),z=((s=function(t){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&e(n,t)}(r,t);var o=n(r);function r(){var e;return i(this,r),(e=o.apply(this,arguments))._value="",e.onChange=function(e){},e.onTouched=function(){},e}return a(r,[{key:"initMonaco",value:function(e,n){var t=this,o=!!this.model;if(o){var i=monaco.editor.getModel(this.model.uri||"");if(i)e.model=i,e.model.setValue(this._value);else{var r=this.model,a=r.value,c=r.language,s=r.uri;e.model=monaco.editor.createModel(a||this._value,c,s)}}var u=this._editor=monaco.editor.create(this.el.nativeElement,e);o||u.setValue(this._value),u.onDidChangeModelContent(function(){var e=u.getValue();t.ngZone.run(function(){t._value=e,t.onChange(e)})}),u.onDidBlurEditorWidget(function(){return t.onTouched()}),this.registerResize(),u.getAction("editor.action.formatDocument").run().then(function(){return t.notifyEvent(n?"init":"re-init")})}},{key:"writeValue",value:function(e){this._value=e||"",this._editor&&this._editor.setValue(this._value)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this.setDisabled()}},{key:"editor",get:function(){return this._editor}}]),r}(y)).\u0275fac=function(e){return C(e||s)},s.\u0275cmp=h.Jb({type:s,selectors:[["nu-monaco-editor"]],hostVars:4,hostBindings:function(e,n){2&e&&h.Kc("display","block")("height",n.height)},inputs:{model:"model"},exportAs:["nuMonacoEditor"],features:[h.Ab([{provide:d.k,useExisting:Object(h.V)(function(){return s}),multi:!0}]),h.yb],decls:0,vars:0,template:function(e,n){},encapsulation:2,changeDetection:0}),s),C=h.Xb(z),k=((l=function(){function e(){i(this,e)}return a(e,null,[{key:"forRoot",value:function(n){return{ngModule:e,providers:[{provide:g,useValue:n}]}}}]),e}()).\u0275mod=h.Nb({type:l}),l.\u0275inj=h.Mb({factory:function(e){return new(e||l)},imports:[[m.c]]}),l),O=r("0qEG"),_=r("PCNd"),S=r("zwnO"),V=r("EF3F"),w=r("XNiG"),M=r("1G5W"),E=r("THAA"),T=r("lgOS"),U=r("PScX"),D=r("B+r4"),B=r("zAKX"),j=r("bE2y"),x=r("OzZK"),P=r("C2AL"),N=r("RwU8"),R=r("nJia"),L=r("FwiY"),$=r("oyxB"),A=r("w1IW"),J=r("sYmb"),F=["schemaEditor"],I=["formCodeEditor"],q=["uiEditor"];function X(e,n){if(1&e&&h.Qb(0,"nz-option",24),2&e){var t=n.$implicit;h.oc("nzValue",t.name)("nzLabel",t.title)}}function Z(e,n){if(1&e){var t=h.Wb();h.Vb(0,"div",1),h.Vb(1,"sf",25),h.cc("formSubmit",function(e){return h.Bc(t),h.gc().submit(e)})("formChange",function(e){return h.Bc(t),h.gc().change(e)})("formValueChange",function(e){return h.Bc(t),h.gc().valueChange(e)})("formError",function(e){return h.Bc(t),h.gc().error(e)}),h.Ub(),h.Ub()}if(2&e){var o=h.gc();h.oc("nzSpan",o.expand?12:24),h.Bb(1),h.oc("schema",o.schemaData)("formData",o.formData)("ui",o.uiSchema)("layout",o.layout)}}var G,K,Q=[{path:"",component:O.a,children:[{path:"validator/:lang",component:(G=function(){function e(n,t,o,r,a,c){var s=this;i(this,e),this.i18n=n,this.codeSrv=t,this.http=o,this.msg=r,this.appService=a,this.cdr=c,this.destroy$=new w.a,this.files=[{name:"basic",title:"\u57fa\u672c"},{name:"conditional",title:"\u6761\u4ef6"},{name:"sort",title:"\u987a\u5e8f"},{name:"validation",title:"\u81ea\u5b9a\u4e49\u6821\u9a8c"},{name:"fixed",title:"\u4e0d\u89c4\u5219\u5e03\u5c40"}],this.layout="horizontal",this.expand=!0,this.editorOptions={language:"json",theme:"vs"},this.name=this.files[0].name,this.title=this.files[0].title,this.appService.theme$.pipe(Object(M.a)(this.destroy$)).subscribe(function(e){s.editorOptions={language:"json",theme:"dark"===e?"vs-dark":"vs"}})}return a(e,[{key:"ngOnInit",value:function(){this.getSchema()}},{key:"refreshLayout",value:function(e){var n=this;setTimeout(function(){n[e].editor.layout()},100)}},{key:"getSchema",value:function(){var e=this,n=this.files.find(function(n){return n.name===e.name});if(n){if(this.name=n.name,this.title=n.title,n.cache)return this.schema=n.cache,void this.run();this.http.get("./assets/schema/".concat(n.name,".json"),null,{responseType:"text"}).subscribe(function(t){n.cache=t,e.schema=n.cache,e.run()})}}},{key:"run",value:function(){this.schemaData=JSON.parse(this.schema||"{}"),this.formData=JSON.parse(this.formCode||"{}"),this.uiSchema=JSON.parse(this.uiCode||"{}"),this.cdr.detectChanges()}},{key:"openOnStackBlitz",value:function(){var e={schema:this.schema,layout:this.layout,formData:this.formCode||"{}",ui:this.uiCode||"{}"},n="\nimport { Component } from '@angular/core';\nimport { SFSchema } from '@delon/form';\nimport { NzMessageService } from 'ng-zorro-antd/message';\n\n@Component({\n  selector: 'demo',\n  template: `\n  <sf [schema]=\"schema\" [formData]=\"formData\" [ui]=\"ui\" [layout]=\"layout\"\n      (formSubmit)=\"submit($event)\"\n      (formChange)=\"change($event)\"\n      (formError)=\"error($event)\"></sf>\n    `\n})\nexport class DemoComponent {\n  schema = {schema};\n  formData = {formData};\n  ui = {ui};\n  layout = '{layout}';\n\n  constructor(private msg: NzMessageService) { }\n\n  submit(value: any) {\n    this.msg.success(JSON.stringify(value));\n  }\n\n  change(value: any) {\n    console.log('formChange', value);\n  }\n\n  error(value: any) {\n    console.log('formError', value);\n  }\n}".replace(/\{(\w+)\}/g,function(n,t){return(e[t]||"").trim()});this.codeSrv.openOnStackBlitz(n)}},{key:"onCopy",value:function(){var e=this;Object(V.g)(this.schema).then(function(){return e.msg.success(e.i18n.fanyi("app.demo.copied"))})}},{key:"submit",value:function(e){this.msg.success(JSON.stringify(e))}},{key:"change",value:function(e){console.log("formChange",e)}},{key:"valueChange",value:function(e){console.log("formChange",e)}},{key:"error",value:function(e){console.log("formError",e)}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}(),G.\u0275fac=function(e){return new(e||G)(h.Pb(S.a),h.Pb(E.a),h.Pb(S.q),h.Pb(U.b),h.Pb(T.a),h.Pb(h.h))},G.\u0275cmp=h.Jb({type:G,selectors:[["form-validator"]],viewQuery:function(e,n){var t;1&e&&(h.Tc(F,!0),h.Tc(I,!0),h.Tc(q,!0)),2&e&&(h.xc(t=h.dc())&&(n.schemaEditor=t.first),h.xc(t=h.dc())&&(n.formCodeEditor=t.first),h.xc(t=h.dc())&&(n.uiEditor=t.first))},decls:34,vars:22,consts:[["nz-row","",1,"border-bottom-1","pb-sm","mb-md"],["nz-col","",3,"nzSpan"],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"ml-sm",3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","horizontal"],["nz-radio-button","","nzValue","vertical"],["nz-radio-button","","nzValue","inline"],["nz-col","",1,"text-right",3,"nzSpan"],["nz-tooltip","","nz-button","",3,"nzTooltipTitle","click"],["nz-icon","",3,"nzType"],["nz-tooltip","","nz-button","",1,"ml-sm",3,"nzTooltipTitle","click"],["nz-icon","","nzType","form"],["nz-icon","","nzType","copy"],["nz-row","","nzGutter","24",1,"border-bottom-1","pb-sm","mb-md"],["nz-col","",3,"nzSpan","hidden"],["nzTitle","Schema",3,"nzClick"],["height","500px",3,"ngModel","options","ngModelChange"],["schemaEditor",""],["nzTitle","Form Data",3,"nzClick"],["formCodeEditor",""],["nzTitle","UI Schema",3,"nzClick"],["uiEditor",""],["nz-col","",3,"nzSpan",4,"ngIf"],[3,"nzValue","nzLabel"],[3,"schema","formData","ui","layout","formSubmit","formChange","formValueChange","formError"]],template:function(e,n){1&e&&(h.Vb(0,"div",0),h.Vb(1,"div",1),h.Vb(2,"nz-select",2),h.cc("ngModelChange",function(e){return n.name=e})("ngModelChange",function(){return n.getSchema()}),h.Nc(3,X,1,2,"nz-option",3),h.Ub(),h.Vb(4,"nz-radio-group",4),h.cc("ngModelChange",function(e){return n.layout=e}),h.Vb(5,"label",5),h.Pc(6,"\u6c34\u5e73"),h.Ub(),h.Vb(7,"label",6),h.Pc(8,"\u5782\u76f4"),h.Ub(),h.Vb(9,"label",7),h.Pc(10,"\u884c\u5185"),h.Ub(),h.Ub(),h.Ub(),h.Vb(11,"div",8),h.Vb(12,"nz-button-group"),h.Vb(13,"button",9),h.cc("click",function(){return n.expand=!n.expand}),h.Qb(14,"i",10),h.Ub(),h.Vb(15,"button",11),h.cc("click",function(){return n.openOnStackBlitz()}),h.hc(16,"translate"),h.Qb(17,"i",12),h.Ub(),h.Vb(18,"button",11),h.cc("click",function(){return n.onCopy()}),h.hc(19,"translate"),h.Qb(20,"i",13),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(21,"div",14),h.Vb(22,"div",15),h.Vb(23,"nz-tabset"),h.Vb(24,"nz-tab",16),h.cc("nzClick",function(){return n.refreshLayout("schemaEditor")}),h.Vb(25,"nu-monaco-editor",17,18),h.cc("ngModelChange",function(e){return n.schema=e})("ngModelChange",function(){return n.run()}),h.Ub(),h.Ub(),h.Vb(27,"nz-tab",19),h.cc("nzClick",function(){return n.refreshLayout("formCodeEditor")}),h.Vb(28,"nu-monaco-editor",17,20),h.cc("ngModelChange",function(e){return n.formCode=e})("ngModelChange",function(){return n.run()}),h.Ub(),h.Ub(),h.Vb(30,"nz-tab",21),h.cc("nzClick",function(){return n.refreshLayout("uiEditor")}),h.Vb(31,"nu-monaco-editor",17,22),h.cc("ngModelChange",function(e){return n.uiCode=e})("ngModelChange",function(){return n.run()}),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Nc(33,Z,2,5,"div",23),h.Ub()),2&e&&(h.Bb(1),h.oc("nzSpan",18),h.Bb(1),h.oc("ngModel",n.name),h.Bb(1),h.oc("ngForOf",n.files),h.Bb(1),h.oc("ngModel",n.layout),h.Bb(7),h.oc("nzSpan",6),h.Bb(2),h.oc("nzTooltipTitle",n.expand?"Hide Code":"Show Code"),h.Bb(1),h.qc("nzType","vertical-",n.expand?"right":"left",""),h.Bb(1),h.oc("nzTooltipTitle",h.ic(16,18,"app.demo.stackblitz")),h.Bb(3),h.oc("nzTooltipTitle",h.ic(19,20,"app.demo.copy")),h.Bb(4),h.oc("nzSpan",12)("hidden",!n.expand),h.Bb(3),h.oc("ngModel",n.schema)("options",n.editorOptions),h.Bb(3),h.oc("ngModel",n.formCode)("options",n.editorOptions),h.Bb(3),h.oc("ngModel",n.uiCode)("options",n.editorOptions),h.Bb(2),h.oc("ngIf",n.schemaData))},directives:[D.c,D.a,B.e,d.m,d.p,m.n,j.c,j.b,j.a,x.b,P.a,x.a,N.a,R.d,L.a,$.b,$.a,z,m.o,B.a,A.a],pipes:[J.b],encapsulation:2,changeDetection:0}),G),data:{titleI18n:"app.header.menu.form.validator"}}]}],W=((K=function e(){i(this,e)}).\u0275mod=h.Nb({type:K}),K.\u0275inj=h.Mb({factory:function(e){return new(e||K)},imports:[[_.a,k.forRoot({defaultOptions:{scrollBeyondLastLine:!1}}),f.n.forChild(Q)]]}),K)}}])}();