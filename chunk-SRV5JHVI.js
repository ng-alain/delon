import{d as jt,f as Yt,h as Ht,i as mt}from"./chunk-O6WJPF3H.js";import{q as Qt,r as $t}from"./chunk-PKX7OMMK.js";import{a as Lt,g as kt,m as Ut,v as at}from"./chunk-PLWMGIRY.js";import{$a as R,$d as At,Ab as dt,Cb as wt,Db as It,Eb as Mt,Fa as G,Gb as J,Ja as E,Ka as N,Kd as ht,La as X,Na as q,Pa as zt,Qb as tt,Rb as et,Sa as z,Tb as it,Ua as Z,Ub as St,Y,aa as pt,ae as _t,ag as rt,bg as st,cg as Dt,da as H,dh as Vt,fb as I,gb as S,gc as Nt,gg as Bt,ha as F,hb as b,hc as yt,hf as Tt,ia as W,ib as D,ic as nt,ig as Pt,jb as B,jf as Ot,k as $,lb as V,lf as xt,ma as K,mf as Ft,na as k,oa as U,od as bt,pb as v,q as j,qd as vt,ra as gt,rb as w,uc as ot,vc as Rt,xb as Et,ya as Ct,yb as P,zb as ct}from"./chunk-KLO4GQEX.js";var te=["itemLabels"],ee=()=>({"ant-segmented-thumb":!0,"ant-segmented-thumb-motion":!0});function ie(o,r){if(o&1){let l=V();I(0,"div",3),v("@thumbMotion.done",function(a){k(l);let h=w();return U(h.handleThumbAnimationDone(a))}),S()}if(o&2){let l=w();z("ngClass",Mt(2,ee))("@thumbMotion",l.animationState)}}function ne(o,r){if(o&1&&(D(0),P(1),B()),o&2){let l=w(2).$implicit;E(1),dt(" ",l.label," ")}}var Gt=(o,r)=>({$implicit:o,index:r});function oe(o,r){if(o&1&&(D(0),I(1,"span",9),b(2,"span",10),S(),I(3,"span"),R(4,ne,2,1,"ng-container",11),S(),B()),o&2){let l=w(),c=l.$implicit,a=l.index,h=w();E(2),z("nzType",c.icon),E(2),z("nzStringTemplateOutlet",c.useTemplate&&h.nzLabelTemplate)("nzStringTemplateOutletContext",J(3,Gt,c,a))}}function re(o,r){if(o&1&&(D(0),P(1),B()),o&2){let l=w(2).$implicit;E(1),dt(" ",l.label," ")}}function se(o,r){if(o&1&&R(0,re,2,1,"ng-container",11),o&2){let l=w(),c=l.$implicit,a=l.index,h=w();z("nzStringTemplateOutlet",c.useTemplate&&h.nzLabelTemplate)("nzStringTemplateOutletContext",J(2,Gt,c,a))}}var ae=(o,r)=>({"ant-segmented-item":!0,"ant-segmented-item-selected":o,"ant-segmented-item-disabled":r});function le(o,r){if(o&1){let l=V();I(0,"label",3,4),b(2,"input",5),I(3,"div",6),v("click",function(){let a=k(l),h=a.$implicit,m=a.index,n=w();return U(!h.disabled&&n.handleOptionClick(m))}),R(4,oe,5,6,"ng-container",7)(5,se,1,5,"ng-template",null,8,St),S()()}if(o&2){let l=r.$implicit,c=r.index,a=Et(6),h=w();z("ngClass",J(4,ae,c===h.selectedIndex,!!h.nzDisabled||l.disabled)),E(2),z("checked",c===h.selectedIndex),E(2),z("ngIf",l.icon)("ngIfElse",a)}}function ce(o){return o.map(r=>typeof r=="string"||typeof r=="number"?{label:`${r}`,value:r}:r)}var de="segmented",A=class A{constructor(r,l,c){this.nzConfigService=r,this.cdr=l,this.directionality=c,this._nzModuleName=de,this.nzBlock=!1,this.nzDisabled=!1,this.nzOptions=[],this.nzSize="default",this.nzLabelTemplate=null,this.nzValueChange=new q,this.dir="ltr",this.selectedIndex=0,this.transitionedToIndex=-1,this.animationState=null,this.normalizedOptions=[],this.destroy$=new $,this.onChange=()=>{},this.onTouched=()=>{},this.directionality.change?.pipe(Y(this.destroy$)).subscribe(a=>{this.dir=a,this.cdr.detectChanges()})}ngOnChanges(r){let{nzOptions:l}=r;l&&(this.normalizedOptions=ce(l.currentValue))}handleOptionClick(r){this.nzDisabled||(this.changeSelectedIndex(r),this.onChange(r),this.nzValueChange.emit(r))}handleThumbAnimationDone(r){r.fromState==="from"&&(this.selectedIndex=this.transitionedToIndex,this.transitionedToIndex=-1,this.animationState=null,this.cdr.detectChanges())}writeValue(r){typeof r=="number"&&r>-1&&(this.changeSelectedIndex(r),this.cdr.markForCheck())}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}changeSelectedIndex(r){!this.listOfOptions||this.selectedIndex===-1||this.selectedIndex===r||(this.animationState={value:"from",params:Wt(this.listOfOptions.get(this.selectedIndex).nativeElement)},this.selectedIndex=-1,this.cdr.detectChanges(),this.animationState={value:"to",params:Wt(this.listOfOptions.get(r).nativeElement)},this.transitionedToIndex=r,this.cdr.detectChanges())}};A.\u0275fac=function(l){return new(l||A)(N(At),N(X),N(bt,8))},A.\u0275cmp=F({type:A,selectors:[["nz-segmented"]],viewQuery:function(l,c){if(l&1&&et(te,5,G),l&2){let a;tt(a=it())&&(c.listOfOptions=a)}},hostAttrs:[1,"ant-segmented"],hostVars:10,hostBindings:function(l,c){l&2&&Z("ant-segmented-disabled",!!c.nzDisabled)("ant-segmented-rtl",c.dir==="rtl")("ant-segmented-lg",c.nzSize==="large")("ant-segmented-sm",c.nzSize==="small")("ant-segmented-block",!!c.nzBlock)},inputs:{nzBlock:"nzBlock",nzDisabled:"nzDisabled",nzOptions:"nzOptions",nzSize:"nzSize",nzLabelTemplate:"nzLabelTemplate"},outputs:{nzValueChange:"nzValueChange"},exportAs:["nzSegmented"],features:[wt([{provide:Lt,useExisting:pt(()=>A),multi:!0}]),K],decls:3,vars:2,consts:[[1,"ant-segmented-group"],[3,"ngClass",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["itemLabels",""],["type","radio",1,"ant-segmented-item-input",3,"checked"],[1,"ant-segmented-item-label",3,"click"],[4,"ngIf","ngIfElse"],["else_template",""],[1,"ant-segmented-item-icon"],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(l,c){l&1&&(I(0,"div",0),R(1,ie,1,3,"div",1)(2,le,7,7,"label",2),S()),l&2&&(E(1),z("ngIf",c.animationState),E(1),z("ngForOf",c.normalizedOptions))},dependencies:[Nt,yt,nt,rt,xt],encapsulation:2,data:{animation:[Vt]},changeDetection:0});var _=A;j([ht()],_.prototype,"nzBlock",void 0);j([ht()],_.prototype,"nzDisabled",void 0);j([_t()],_.prototype,"nzSize",void 0);function Wt(o){return{transform:o.offsetLeft,width:o.clientWidth}}var Xt=(()=>{let r=class r{};r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=W({type:r}),r.\u0275inj=H({imports:[vt,ot,at,Ot,st,Ft]});let o=r;return o})();var lt=(()=>{let r=class r extends Ht{get list(){return this._list??[]}reset(c){jt(this.schema,this.ui,c).subscribe(a=>{this._list=a,this.detectChanges()})}valueChange(c){this.ui.valueChange&&this.ui.valueChange({index:c,item:this.list[c]})}};r.KEY="segmented",r.\u0275fac=(()=>{let c;return function(h){return(c||(c=gt(r)))(h||r)}})(),r.\u0275cmp=F({type:r,selectors:[["sf-segmented"]],standalone:!0,features:[zt,It],decls:2,vars:12,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngModel","nzDisabled","nzSize","nzBlock","nzOptions","nzLabelTemplate","ngModelChange","nzValueChange"]],template:function(a,h){if(a&1&&(I(0,"sf-item-wrap",0)(1,"nz-segmented",1),v("ngModelChange",function(n){return h.setValue(n)})("nzValueChange",function(n){return h.valueChange(n)}),S()()),a&2){let m,n;z("id",h.id)("schema",h.schema)("ui",h.ui)("showError",h.showError)("error",h.error)("showTitle",h.schema.title),E(1),z("ngModel",h.value)("nzDisabled",h.disabled)("nzSize",h.ui.size)("nzBlock",(m=h.ui.block)!==null&&m!==void 0?m:!1)("nzOptions",h.list)("nzLabelTemplate",(n=h.ui.labelTemplate)!==null&&n!==void 0?n:null)}},dependencies:[at,kt,Ut,mt,Yt,Xt,_],encapsulation:2});let o=r;return o})();function di(){return{KEY:lt.KEY,type:lt}}var me=["canvas"];function ue(o,r){o&1&&b(0,"nz-spin")}function fe(o,r){if(o&1){let l=V();I(0,"div")(1,"p",3),P(2),S(),I(3,"button",4),v("click",function(){k(l);let a=w(2);return U(a.reloadQRCode())}),b(4,"span",5),I(5,"span"),P(6),S()()()}if(o&2){let l=w(2);E(2),ct(l.locale.expired),E(4),ct(l.locale.refresh)}}function pe(o,r){if(o&1&&(I(0,"div",2),R(1,ue,1,0,"nz-spin",1)(2,fe,7,2,"div",1),S()),o&2){let l=w();E(1),z("ngIf",l.nzStatus==="loading"),E(1),z("ngIf",l.nzStatus==="expired")}}function ge(o,r){o&1&&(D(0),b(1,"canvas",null,6),B())}var T;(function(o){let r=(()=>{let n=class n{static encodeText(t,i){let e=o.QrSegment.makeSegments(t);return n.encodeSegments(e,i)}static encodeBinary(t,i){let e=o.QrSegment.makeBytes(t);return n.encodeSegments([e],i)}static encodeSegments(t,i,e=1,s=40,d=-1,f=!0){if(!(n.MIN_VERSION<=e&&e<=s&&s<=n.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");let u,g;for(u=e;;u++){let C=n.getNumDataCodewords(u,i)*8,M=h.getTotalBits(t,u);if(M<=C){g=M;break}if(u>=s)throw new RangeError("Data too long")}for(let C of[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH])f&&g<=n.getNumDataCodewords(u,C)*8&&(i=C);let p=[];for(let C of t){l(C.mode.modeBits,4,p),l(C.numChars,C.mode.numCharCountBits(u),p);for(let M of C.getData())p.push(M)}a(p.length==g);let L=n.getNumDataCodewords(u,i)*8;a(p.length<=L),l(0,Math.min(4,L-p.length),p),l(0,(8-p.length%8)%8,p),a(p.length%8==0);for(let C=236;p.length<L;C^=253)l(C,8,p);let y=[];for(;y.length*8<p.length;)y.push(0);return p.forEach((C,M)=>y[M>>>3]|=C<<7-(M&7)),new n(u,i,y,d)}constructor(t,i,e,s){if(this.version=t,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],t<n.MIN_VERSION||t>n.MAX_VERSION)throw new RangeError("Version value out of range");if(s<-1||s>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let d=[];for(let u=0;u<this.size;u++)d.push(!1);for(let u=0;u<this.size;u++)this.modules.push(d.slice()),this.isFunction.push(d.slice());this.drawFunctionPatterns();let f=this.addEccAndInterleave(e);if(this.drawCodewords(f),s==-1){let u=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);let p=this.getPenaltyScore();p<u&&(s=g,u=p),this.applyMask(g)}}a(s>=0&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}getModule(t,i){return t>=0&&t<this.size&&i>=0&&i<this.size&&this.modules[i][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let t=this.getAlignmentPatternPositions(),i=t.length;for(let e=0;e<i;e++)for(let s=0;s<i;s++)e==0&&s==0||e==0&&s==i-1||e==i-1&&s==0||this.drawAlignmentPattern(t[e],t[s]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){let i=this.errorCorrectionLevel.formatBits<<3|t,e=i;for(let d=0;d<10;d++)e=e<<1^(e>>>9)*1335;let s=(i<<10|e)^21522;a(s>>>15==0);for(let d=0;d<=5;d++)this.setFunctionModule(8,d,c(s,d));this.setFunctionModule(8,7,c(s,6)),this.setFunctionModule(8,8,c(s,7)),this.setFunctionModule(7,8,c(s,8));for(let d=9;d<15;d++)this.setFunctionModule(14-d,8,c(s,d));for(let d=0;d<8;d++)this.setFunctionModule(this.size-1-d,8,c(s,d));for(let d=8;d<15;d++)this.setFunctionModule(8,this.size-15+d,c(s,d));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let e=0;e<12;e++)t=t<<1^(t>>>11)*7973;let i=this.version<<12|t;a(i>>>18==0);for(let e=0;e<18;e++){let s=c(i,e),d=this.size-11+e%3,f=Math.floor(e/3);this.setFunctionModule(d,f,s),this.setFunctionModule(f,d,s)}}drawFinderPattern(t,i){for(let e=-4;e<=4;e++)for(let s=-4;s<=4;s++){let d=Math.max(Math.abs(s),Math.abs(e)),f=t+s,u=i+e;f>=0&&f<this.size&&u>=0&&u<this.size&&this.setFunctionModule(f,u,d!=2&&d!=4)}}drawAlignmentPattern(t,i){for(let e=-2;e<=2;e++)for(let s=-2;s<=2;s++)this.setFunctionModule(t+s,i+e,Math.max(Math.abs(s),Math.abs(e))!=1)}setFunctionModule(t,i,e){this.modules[i][t]=e,this.isFunction[i][t]=!0}addEccAndInterleave(t){let i=this.version,e=this.errorCorrectionLevel;if(t.length!=n.getNumDataCodewords(i,e))throw new RangeError("Invalid argument");let s=n.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][i],d=n.ECC_CODEWORDS_PER_BLOCK[e.ordinal][i],f=Math.floor(n.getNumRawDataModules(i)/8),u=s-f%s,g=Math.floor(f/s),p=[],L=n.reedSolomonComputeDivisor(d);for(let C=0,M=0;C<s;C++){let x=t.slice(M,M+g-d+(C<u?0:1));M+=x.length;let qt=n.reedSolomonComputeRemainder(x,L);C<u&&x.push(0),p.push(x.concat(qt))}let y=[];for(let C=0;C<p[0].length;C++)p.forEach((M,x)=>{(C!=g-d||x>=u)&&y.push(M[C])});return a(y.length==f),y}drawCodewords(t){if(t.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let e=this.size-1;e>=1;e-=2){e==6&&(e=5);for(let s=0;s<this.size;s++)for(let d=0;d<2;d++){let f=e-d,g=(e+1&2)==0?this.size-1-s:s;!this.isFunction[g][f]&&i<t.length*8&&(this.modules[g][f]=c(t[i>>>3],7-(i&7)),i++)}}a(i==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let e=0;e<this.size;e++){let s;switch(t){case 0:s=(e+i)%2==0;break;case 1:s=i%2==0;break;case 2:s=e%3==0;break;case 3:s=(e+i)%3==0;break;case 4:s=(Math.floor(e/3)+Math.floor(i/2))%2==0;break;case 5:s=e*i%2+e*i%3==0;break;case 6:s=(e*i%2+e*i%3)%2==0;break;case 7:s=((e+i)%2+e*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][e]&&s&&(this.modules[i][e]=!this.modules[i][e])}}getPenaltyScore(){let t=0;for(let d=0;d<this.size;d++){let f=!1,u=0,g=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[d][p]==f?(u++,u==5?t+=n.PENALTY_N1:u>5&&t++):(this.finderPenaltyAddHistory(u,g),f||(t+=this.finderPenaltyCountPatterns(g)*n.PENALTY_N3),f=this.modules[d][p],u=1);t+=this.finderPenaltyTerminateAndCount(f,u,g)*n.PENALTY_N3}for(let d=0;d<this.size;d++){let f=!1,u=0,g=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[p][d]==f?(u++,u==5?t+=n.PENALTY_N1:u>5&&t++):(this.finderPenaltyAddHistory(u,g),f||(t+=this.finderPenaltyCountPatterns(g)*n.PENALTY_N3),f=this.modules[p][d],u=1);t+=this.finderPenaltyTerminateAndCount(f,u,g)*n.PENALTY_N3}for(let d=0;d<this.size-1;d++)for(let f=0;f<this.size-1;f++){let u=this.modules[d][f];u==this.modules[d][f+1]&&u==this.modules[d+1][f]&&u==this.modules[d+1][f+1]&&(t+=n.PENALTY_N2)}let i=0;for(let d of this.modules)i=d.reduce((f,u)=>f+(u?1:0),i);let e=this.size*this.size,s=Math.ceil(Math.abs(i*20-e*10)/e)-1;return a(s>=0&&s<=9),t+=s*n.PENALTY_N4,a(t>=0&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{let t=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2,e=[6];for(let s=this.size-7;e.length<t;s-=i)e.splice(1,0,s);return e}}static getNumRawDataModules(t){if(t<n.MIN_VERSION||t>n.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*t+128)*t+64;if(t>=2){let e=Math.floor(t/7)+2;i-=(25*e-10)*e-55,t>=7&&(i-=36)}return a(i>=208&&i<=29648),i}static getNumDataCodewords(t,i){return Math.floor(n.getNumRawDataModules(t)/8)-n.ECC_CODEWORDS_PER_BLOCK[i.ordinal][t]*n.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let i=[];for(let s=0;s<t-1;s++)i.push(0);i.push(1);let e=1;for(let s=0;s<t;s++){for(let d=0;d<i.length;d++)i[d]=n.reedSolomonMultiply(i[d],e),d+1<i.length&&(i[d]^=i[d+1]);e=n.reedSolomonMultiply(e,2)}return i}static reedSolomonComputeRemainder(t,i){let e=i.map(s=>0);for(let s of t){let d=s^e.shift();e.push(0),i.forEach((f,u)=>e[u]^=n.reedSolomonMultiply(f,d))}return e}static reedSolomonMultiply(t,i){if(t>>>8||i>>>8)throw new RangeError("Byte out of range");let e=0;for(let s=7;s>=0;s--)e=e<<1^(e>>>7)*285,e^=(i>>>s&1)*t;return a(e>>>8==0),e}finderPenaltyCountPatterns(t){let i=t[1];a(i<=this.size*3);let e=i>0&&t[2]==i&&t[3]==i*3&&t[4]==i&&t[5]==i;return(e&&t[0]>=i*4&&t[6]>=i?1:0)+(e&&t[6]>=i*4&&t[0]>=i?1:0)}finderPenaltyTerminateAndCount(t,i,e){return t&&(this.finderPenaltyAddHistory(i,e),i=0),i+=this.size,this.finderPenaltyAddHistory(i,e),this.finderPenaltyCountPatterns(e)}finderPenaltyAddHistory(t,i){i[0]==0&&(t+=this.size),i.pop(),i.unshift(t)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];let m=n;return m})();o.QrCode=r;function l(m,n,O){if(n<0||n>31||m>>>n)throw new RangeError("Value out of range");for(let t=n-1;t>=0;t--)O.push(m>>>t&1)}function c(m,n){return(m>>>n&1)!=0}function a(m){if(!m)throw new Error("Assertion error")}let h=(()=>{let n=class n{static makeBytes(t){let i=[];for(let e of t)l(e,8,i);return new n(n.Mode.BYTE,t.length,i)}static makeNumeric(t){if(!n.isNumeric(t))throw new RangeError("String contains non-numeric characters");let i=[];for(let e=0;e<t.length;){let s=Math.min(t.length-e,3);l(parseInt(t.substring(e,e+s),10),s*3+1,i),e+=s}return new n(n.Mode.NUMERIC,t.length,i)}static makeAlphanumeric(t){if(!n.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],e;for(e=0;e+2<=t.length;e+=2){let s=n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e))*45;s+=n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e+1)),l(s,11,i)}return e<t.length&&l(n.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e)),6,i),new n(n.Mode.ALPHANUMERIC,t.length,i)}static makeSegments(t){return t==""?[]:n.isNumeric(t)?[n.makeNumeric(t)]:n.isAlphanumeric(t)?[n.makeAlphanumeric(t)]:[n.makeBytes(n.toUtf8ByteArray(t))]}static makeEci(t){let i=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)l(t,8,i);else if(t<16384)l(2,2,i),l(t,14,i);else if(t<1e6)l(6,3,i),l(t,21,i);else throw new RangeError("ECI assignment value out of range");return new n(n.Mode.ECI,0,i)}static isNumeric(t){return n.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return n.ALPHANUMERIC_REGEX.test(t)}constructor(t,i,e){if(this.mode=t,this.numChars=i,this.bitData=e,i<0)throw new RangeError("Invalid argument");this.bitData=e.slice()}getData(){return this.bitData.slice()}static getTotalBits(t,i){let e=0;for(let s of t){let d=s.mode.numCharCountBits(i);if(s.numChars>=1<<d)return 1/0;e+=4+d+s.bitData.length}return e}static toUtf8ByteArray(t){t=encodeURI(t);let i=[];for(let e=0;e<t.length;e++)t.charAt(e)!="%"?i.push(t.charCodeAt(e)):(i.push(parseInt(t.substring(e+1,e+3),16)),e+=2);return i}};n.NUMERIC_REGEX=/^[0-9]*$/,n.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,n.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let m=n;return m})();o.QrSegment=h})(T||(T={}));(function(o){var r;(function(l){let a=class a{constructor(m,n){this.ordinal=m,this.formatBits=n}};a.LOW=new a(0,1),a.MEDIUM=new a(1,0),a.QUARTILE=new a(2,3),a.HIGH=new a(3,2);let c=a;l.Ecc=c})(r=o.QrCode||(o.QrCode={}))})(T||(T={}));(function(o){var r;(function(l){let a=class a{constructor(m,n){this.modeBits=m,this.numBitsCharCount=n}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};a.NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]);let c=a;l.Mode=c})(r=o.QrSegment||(o.QrSegment={}))})(T||(T={}));var Q=T,Ce={L:Q.QrCode.Ecc.LOW,M:Q.QrCode.Ecc.MEDIUM,Q:Q.QrCode.Ecc.QUARTILE,H:Q.QrCode.Ecc.HIGH},ze=160,Ee=10,we=10,Ie="#000000",Me="#FFFFFF",Se=40,Ne="M",ye=(o,r=Ne)=>o?Q.QrCode.encodeText(o,Ce[r]):null;function Re(o,r,l=ze,c=Ee,a=we,h=Ie,m=Me,n=Se,O){let t=o.getContext("2d"),i=be(a);if(o.style.width=`${l}px`,o.style.height=`${l}px`,!r){t.fillStyle="rgba(0, 0, 0, 0)",t.fillRect(0,0,o.width,o.height);return}if(o.width=r.size*c+i[1]+i[3],o.height=r.size*c+i[0]+i[2],!O)ft(t,o.width,o.height,c,m),ut(t,r,c,i,m,h);else{let e=new Image;e.src=O,e.crossOrigin="anonymous",e.width=n*(o.width/l),e.height=n*(o.width/l),e.onload=()=>{ft(t,o.width,o.height,c,m),ut(t,r,c,i,m,h);let s=o.width/2-n*(o.width/l)/2;t.fillRect(s,s,n*(o.width/l),n*(o.width/l)),t.drawImage(e,s,s,n*(o.width/l),n*(o.width/l))},e.onerror=()=>{ft(t,o.width,o.height,c,m),ut(t,r,c,i,m,h)}}}function ut(o,r,l,c,a,h){for(let m=0;m<r.size;m++)for(let n=0;n<r.size;n++)o.fillStyle=r.getModule(n,m)?h:a,o.fillRect(c[3]+n*l,c[0]+m*l,l,l)}function ft(o,r,l,c,a){for(let h=0;h<l;h++)for(let m=0;m<r;m++)o.fillStyle=a,o.fillRect(m*c,h*c,c,c)}function be(o){return Array.isArray(o)?Array(4).fill(0).map((r,l)=>o[l%o.length]):[o,o,o,o]}var xi=(()=>{let r=class r{constructor(c,a,h,m){this.i18n=c,this.el=a,this.cdr=h,this.platformId=m,this.nzValue="",this.nzPadding=0,this.nzColor="#000000",this.nzBgColor="#FFFFFF",this.nzSize=160,this.nzIcon="",this.nzIconSize=40,this.nzBordered=!0,this.nzStatus="active",this.nzLevel="M",this.nzRefresh=new q,this.isBrowser=!0,this.destroy$=new $,this.isBrowser=Rt(this.platformId),this.cdr.markForCheck()}ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe(Y(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(c){let{nzValue:a,nzIcon:h,nzLevel:m,nzSize:n,nzIconSize:O,nzColor:t,nzPadding:i,nzBgColor:e}=c;(a||h||m||n||O||t||i||e)&&this.canvas&&this.drawCanvasQRCode(),e&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&Re(this.canvas.nativeElement,ye(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};r.\u0275fac=function(a){return new(a||r)(N(Tt),N(G),N(X),N(Ct))},r.\u0275cmp=F({type:r,selectors:[["nz-qrcode"]],viewQuery:function(a,h){if(a&1&&et(me,5),a&2){let m;tt(m=it())&&(h.canvas=m.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(a,h){a&2&&Z("ant-qrcode-border",h.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:"nzSize",nzIcon:"nzIcon",nzIconSize:"nzIconSize",nzBordered:"nzBordered",nzStatus:"nzStatus",nzLevel:"nzLevel"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],features:[K],decls:2,vars:2,consts:[["class","ant-qrcode-mask",4,"ngIf"],[4,"ngIf"],[1,"ant-qrcode-mask"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["canvas",""]],template:function(a,h){a&1&&R(0,pe,3,2,"div",0)(1,ge,3,0,"ng-container",1),a&2&&(z("ngIf",h.nzStatus!=="active"),E(1),z("ngIf",h.isBrowser))},dependencies:[Qt,nt,Bt,Dt,rt],encapsulation:2,changeDetection:0});let o=r;return o})(),Fi=(()=>{let r=class r{};r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=W({type:r}),r.\u0275inj=H({imports:[$t,ot,Pt,st]});let o=r;return o})();export{xi as a,Fi as b,lt as c,di as d};
