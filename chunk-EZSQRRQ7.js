import{e as st}from"./chunk-LN3NVZMZ.js";import{F as nt,e as Xe,h as Je,l as et,n as tt,o as it,y as ne}from"./chunk-7OOQUBON.js";import{Aa as U,Ab as V,Ah as Ye,Bb as j,Bc as He,Bg as Ge,Bh as ie,Ca as ze,Cb as Q,Cg as $e,Db as ye,Dg as ee,Eg as te,Fb as xe,Hb as m,I as v,Ib as P,Ic as G,J as ue,Jb as q,Jc as C,Kb as Le,Ld as Ve,Mb as Se,Me as w,Na as f,Nb as Ae,Nd as T,Qc as Oe,Rb as Y,Se as We,Tb as I,Td as je,Te as J,U as pe,Ua as Ne,Vb as Me,Wb as W,X as fe,Xa as L,Xb as B,Ya as Z,Za as O,_e as Be,a as z,bb as y,ca as D,da as $,ea as me,ga as h,h as ce,hb as _e,hh as Ke,ib as ke,ih as Ue,jb as be,jc as Fe,je as Pe,jh as Ze,k as F,kb as Te,ke as qe,l as de,la as R,lc as X,ma as H,mb as S,mc as Ee,ob as A,pc as De,q as E,qa as ge,qc as Ie,r as N,ra as K,ta as Ce,tb as k,ub as b,uc as we,vb as x,wb as ve,x as he,yc as Re,yh as Qe}from"./chunk-P5SMEL6S.js";var ae=["*"],dt=r=>[r],ht=r=>({$implicit:r});function ut(r,s){if(r&1&&(V(0),W(1),j()),r&2){let e=m(2);f(),B(e.innerTip)}}function pt(r,s){if(r&1){let e=ye();b(0,"div",2),be(function(){R(e);let i=m();return H(i.nzValidateAnimationLeave())}),ke(function(){R(e);let i=m();return H(i.nzValidateAnimationEnter())}),Te(function(i){R(e);let n=m();return H(n.onAnimationLeave(i))}),b(1,"div",4),y(2,ut,2,1,"ng-container",5),x()()}if(r&2){let e=m();f(),Me(X(4,dt,"ant-form-item-explain-"+e.status)),f(),k("nzStringTemplateOutlet",e.innerTip)("nzStringTemplateOutletContext",X(6,ht,e.validateControl))}}function ft(r,s){if(r&1&&(V(0),W(1),j()),r&2){let e=m(2);f(),B(e.nzExtra)}}function mt(r,s){if(r&1&&(b(0,"div",3),y(1,ft,2,1,"ng-container",6),x()),r&2){let e=m();f(),k("nzStringTemplateOutlet",e.nzExtra)}}var gt=(r,s)=>({required:r,$implicit:s});function Ct(r,s){if(r&1&&(V(0),ve(1,"nz-icon",4),j()),r&2){let e=s.$implicit,t=m(3);f(),k("nzType",e)("nzTheme",t.tooltipIcon.theme)}}function zt(r,s){if(r&1&&(b(0,"span",1),y(1,Ct,2,2,"ng-container",3),x()),r&2){let e=m(2);k("nzTooltipTitle",e.nzTooltipTitle),f(),k("nzStringTemplateOutlet",e.tooltipIcon.type)}}function Nt(r,s){r&1&&(b(0,"span",2),W(1),De(2,"nzI18n"),x()),r&2&&(f(),B(Ie(2,1,"Form.optional")))}function _t(r,s){if(r&1&&(q(0),S(1,zt,2,2,"span",1),S(2,Nt,3,3,"span",2)),r&2){let e=m();f(),A(e.nzTooltipTitle?1:-1),f(),A((e.nzRequiredMark==null?null:e.nzRequiredMark())==="optional"&&!e.nzRequired?2:-1)}}function kt(r,s){r&1&&Q(0)}function bt(r,s){if(r&1&&y(0,kt,1,0,"ng-container",5),r&2){let e=m(),t=Y(2);k("ngTemplateOutlet",e.nzRequiredMark())("ngTemplateOutletContext",Ee(2,gt,e.nzRequired,t))}}function Tt(r,s){r&1&&Q(0)}function vt(r,s){if(r&1&&y(0,Tt,1,0,"ng-container",6),r&2){m();let e=Y(2);k("ngTemplateOutlet",e)}}var yt=(()=>{class r{cdr=h(G);status="";hasFeedback=!1;withHelpClass=!1;setWithHelpViaTips(e){this.withHelpClass=e,this.cdr.markForCheck()}setStatus(e){this.status=e,this.cdr.markForCheck()}setHasFeedback(e){this.hasFeedback=e,this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=L({type:r,selectors:[["nz-form-item"]],hostAttrs:[1,"ant-form-item"],hostVars:12,hostBindings:function(t,i){t&2&&I("ant-form-item-has-success",i.status==="success")("ant-form-item-has-warning",i.status==="warning")("ant-form-item-has-error",i.status==="error")("ant-form-item-is-validating",i.status==="validating")("ant-form-item-has-feedback",i.hasFeedback&&i.status)("ant-form-item-with-help",i.withHelpClass)},exportAs:["nzFormItem"],ngContentSelectors:ae,decls:1,vars:0,template:function(t,i){t&1&&(P(),q(0))},encapsulation:2,changeDetection:0})}return r})(),xt="form",oe={type:"question-circle",theme:"outline"},at=(()=>{let r,s=[],e=[],t,i=[],n=[],a,o=[],l=[],d,u=[],_=[];return class se{static{let p=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;r=[w()],t=[w()],a=[w()],d=[w()],E(null,null,r,{kind:"field",name:"nzNoColon",static:!1,private:!1,access:{has:c=>"nzNoColon"in c,get:c=>c.nzNoColon,set:(c,g)=>{c.nzNoColon=g}},metadata:p},s,e),E(null,null,t,{kind:"field",name:"nzAutoTips",static:!1,private:!1,access:{has:c=>"nzAutoTips"in c,get:c=>c.nzAutoTips,set:(c,g)=>{c.nzAutoTips=g}},metadata:p},i,n),E(null,null,a,{kind:"field",name:"nzTooltipIcon",static:!1,private:!1,access:{has:c=>"nzTooltipIcon"in c,get:c=>c.nzTooltipIcon,set:(c,g)=>{c.nzTooltipIcon=g}},metadata:p},o,l),E(null,null,d,{kind:"field",name:"nzLabelWrap",static:!1,private:!1,access:{has:c=>"nzLabelWrap"in c,get:c=>c.nzLabelWrap,set:(c,g)=>{c.nzLabelWrap=g}},metadata:p},u,_),p&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p})}destroyRef=h(K);directionality=h(Be);_nzModuleName=xt;nzLayout="horizontal";nzNoColon=N(this,s,!1);nzAutoTips=(N(this,e),N(this,i,{}));nzDisableAutoTips=(N(this,n),!1);nzTooltipIcon=N(this,o,oe);nzLabelAlign=(N(this,l),"right");nzLabelWrap=N(this,u,!1);nzRequiredMark=(N(this,_),He(!0));dir="ltr";inputChanges$=new F;getInputObservable(p){return this.inputChanges$.pipe(v(c=>p in c),he(c=>c[p]))}constructor(){this.dir=this.directionality.value,this.directionality.change?.pipe(T()).subscribe(p=>{this.dir=p}),this.destroyRef.onDestroy(()=>{this.inputChanges$.complete()})}ngOnChanges(p){this.inputChanges$.next(p)}static \u0275fac=function(c){return new(c||se)};static \u0275dir=O({type:se,selectors:[["","nz-form",""]],hostAttrs:[1,"ant-form"],hostVars:8,hostBindings:function(c,g){c&2&&I("ant-form-horizontal",g.nzLayout==="horizontal")("ant-form-vertical",g.nzLayout==="vertical")("ant-form-inline",g.nzLayout==="inline")("ant-form-rtl",g.dir==="rtl")},inputs:{nzLayout:"nzLayout",nzNoColon:[2,"nzNoColon","nzNoColon",C],nzAutoTips:"nzAutoTips",nzDisableAutoTips:[2,"nzDisableAutoTips","nzDisableAutoTips",C],nzTooltipIcon:"nzTooltipIcon",nzLabelAlign:"nzLabelAlign",nzLabelWrap:[2,"nzLabelWrap","nzLabelWrap",C],nzRequiredMark:[1,"nzRequiredMark"]},exportAs:["nzForm"],features:[U]})}})(),Lt=(()=>{class r{cdr=h(G);i18n=h(Ke);nzFormStatusService=h(ne);destroyRef=h(K);_hasFeedback=!1;validateChanges=ce.EMPTY;validateString=null;localeId;autoErrorTip;get disableAutoTips(){return this.nzDisableAutoTips!==void 0?qe(this.nzDisableAutoTips):!!this.nzFormDirective?.nzDisableAutoTips}noAnimation=h(Qe,{optional:!0,host:!0});animationEnabled=Ye(()=>!this.noAnimation?.nzNoAnimation());nzValidateAnimationEnter=ie(()=>"ant-form-validate_animation-enter");nzValidateAnimationLeave=ie(()=>"ant-form-validate_animation-leave");status="";validateControl=null;innerTip=null;defaultValidateControl;nzSuccessTip;nzWarningTip;nzErrorTip;nzValidatingTip;nzExtra;nzAutoTips={};nzDisableAutoTips;set nzHasFeedback(e){this._hasFeedback=e,this.nzFormStatusService.formStatusChanges.next({status:this.status,hasFeedback:this._hasFeedback}),this.nzFormItemComponent&&this.nzFormItemComponent.setHasFeedback(this._hasFeedback)}get nzHasFeedback(){return this._hasFeedback}set nzValidateStatus(e){e instanceof Je||e instanceof et?(this.validateControl=e,this.validateString=null,this.watchControl()):e instanceof it?(this.validateControl=e.control,this.validateString=null,this.watchControl()):(this.validateString=e,this.validateControl=null,this.setStatus())}watchControl(){this.validateChanges.unsubscribe(),this.validateControl&&this.validateControl.statusChanges&&(this.validateChanges=this.validateControl.statusChanges.pipe(pe(null),T(this.destroyRef)).subscribe(()=>{this.disableAutoTips||this.updateAutoErrorTip(),this.setStatus(),this.cdr.markForCheck()}))}setStatus(){this.status=this.getControlStatus(this.validateString),this.innerTip=this.getInnerTip(this.status),this.nzFormStatusService.formStatusChanges.next({status:this.status,hasFeedback:this.nzHasFeedback}),this.nzFormItemComponent&&(this.nzFormItemComponent.setWithHelpViaTips(!!this.innerTip),this.nzFormItemComponent.setStatus(this.status))}getControlStatus(e){let t;return e==="warning"||this.validateControlStatus("INVALID","warning")?t="warning":e==="error"||this.validateControlStatus("INVALID")?t="error":e==="validating"||e==="pending"||this.validateControlStatus("PENDING")?t="validating":e==="success"||this.validateControlStatus("VALID")?t="success":t="",t}validateControlStatus(e,t){if(this.validateControl){let{dirty:i,touched:n,status:a}=this.validateControl;return(!!i||!!n)&&(t?this.validateControl.hasError(t):a===e)}else return!1}getInnerTip(e){switch(e){case"error":return!this.disableAutoTips&&this.autoErrorTip||this.nzErrorTip||null;case"validating":return this.nzValidatingTip||null;case"success":return this.nzSuccessTip||null;case"warning":return this.nzWarningTip||null;default:return null}}updateAutoErrorTip(){if(this.validateControl){let e=this.validateControl.errors||{},t="";for(let i in e)if(e.hasOwnProperty(i)&&(t=e[i]?.[this.localeId]??this.nzAutoTips?.[this.localeId]?.[i]??this.nzAutoTips.default?.[i]??this.nzFormDirective?.nzAutoTips?.[this.localeId]?.[i]??this.nzFormDirective?.nzAutoTips.default?.[i]),t)break;this.autoErrorTip=t}}subscribeAutoTips(e){e?.pipe(T(this.destroyRef)).subscribe(()=>{this.disableAutoTips||(this.updateAutoErrorTip(),this.setStatus(),this.cdr.markForCheck())})}nzFormItemComponent=h(yt,{host:!0,optional:!0});nzFormDirective=h(at,{optional:!0});constructor(){this.subscribeAutoTips(this.i18n.localeChange.pipe(fe(e=>this.localeId=e.locale))),this.subscribeAutoTips(this.nzFormDirective?.getInputObservable("nzAutoTips")),this.subscribeAutoTips(this.nzFormDirective?.getInputObservable("nzDisableAutoTips").pipe(v(()=>this.nzDisableAutoTips===void 0)))}ngOnChanges(e){let{nzDisableAutoTips:t,nzAutoTips:i,nzSuccessTip:n,nzWarningTip:a,nzErrorTip:o,nzValidatingTip:l}=e;t||i?(this.updateAutoErrorTip(),this.setStatus()):(n||a||o||l)&&this.setStatus()}ngOnInit(){this.setStatus()}ngAfterContentInit(){!this.validateControl&&!this.validateString&&(this.defaultValidateControl instanceof tt?this.nzValidateStatus=this.defaultValidateControl.control:this.nzValidateStatus=this.defaultValidateControl)}onAnimationLeave(e){if(!this.animationEnabled())return e.animationComplete();let t=e.target,i=()=>{t.removeEventListener("transitionend",i),e.animationComplete()};t.addEventListener("transitionend",i)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=L({type:r,selectors:[["nz-form-control"]],contentQueries:function(t,i,n){if(t&1&&Le(n,Xe,5),t&2){let a;Se(a=Ae())&&(i.defaultValidateControl=a.first)}},hostAttrs:[1,"ant-form-item-control"],inputs:{nzSuccessTip:"nzSuccessTip",nzWarningTip:"nzWarningTip",nzErrorTip:"nzErrorTip",nzValidatingTip:"nzValidatingTip",nzExtra:"nzExtra",nzAutoTips:"nzAutoTips",nzDisableAutoTips:[2,"nzDisableAutoTips","nzDisableAutoTips",C],nzHasFeedback:[2,"nzHasFeedback","nzHasFeedback",C],nzValidateStatus:"nzValidateStatus"},exportAs:["nzFormControl"],features:[Fe([ne]),U],ngContentSelectors:ae,decls:5,vars:2,consts:[[1,"ant-form-item-control-input"],[1,"ant-form-item-control-input-content"],[1,"ant-form-item-explain","ant-form-item-explain-connected"],[1,"ant-form-item-extra"],["role","alert"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[4,"nzStringTemplateOutlet"]],template:function(t,i){t&1&&(P(),b(0,"div",0)(1,"div",1),q(2),x()(),S(3,pt,3,8,"div",2),S(4,mt,2,1,"div",3)),t&2&&(f(3),A(i.innerTip?3:-1),f(),A(i.nzExtra?4:-1))},dependencies:[te,ee],encapsulation:2,changeDetection:0})}return r})();function rt(r){let s=typeof r=="string"?{type:r}:r;return z(z({},oe),s)}var St=(()=>{class r{cdr=h(G);nzFor;nzRequired=!1;set nzNoColon(e){this.noColon=e}get nzNoColon(){return this.noColon!=="default"?this.noColon:!!this.nzFormDirective?.nzNoColon}noColon="default";nzTooltipTitle;set nzTooltipIcon(e){this._tooltipIcon=rt(e)}get tooltipIcon(){return this._tooltipIcon!=="default"?this._tooltipIcon:rt(this.nzFormDirective?.nzTooltipIcon||oe)}_tooltipIcon="default";set nzLabelAlign(e){this.labelAlign=e}get nzLabelAlign(){return this.labelAlign!=="default"?this.labelAlign:this.nzFormDirective?.nzLabelAlign||"right"}labelAlign="default";set nzLabelWrap(e){this.labelWrap=e}get nzLabelWrap(){return this.labelWrap!=="default"?this.labelWrap:!!this.nzFormDirective?.nzLabelWrap}labelWrap="default";nzFormDirective=h(at,{skipSelf:!0,optional:!0});nzRequiredMark=this.nzFormDirective?.nzRequiredMark;isNzRequiredMarkTemplate=Re(()=>Pe(this.nzRequiredMark?.()));constructor(){this.nzFormDirective&&(this.nzFormDirective.getInputObservable("nzNoColon").pipe(v(()=>this.noColon==="default"),T()).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzTooltipIcon").pipe(v(()=>this._tooltipIcon==="default"),T()).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzLabelAlign").pipe(v(()=>this.labelAlign==="default"),T()).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzLabelWrap").pipe(v(()=>this.labelWrap==="default"),T()).subscribe(()=>this.cdr.markForCheck()))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=L({type:r,selectors:[["nz-form-label"]],hostAttrs:[1,"ant-form-item-label"],hostVars:4,hostBindings:function(t,i){t&2&&I("ant-form-item-label-left",i.nzLabelAlign==="left")("ant-form-item-label-wrap",i.nzLabelWrap)},inputs:{nzFor:"nzFor",nzRequired:[2,"nzRequired","nzRequired",C],nzNoColon:[2,"nzNoColon","nzNoColon",C],nzTooltipTitle:"nzTooltipTitle",nzTooltipIcon:"nzTooltipIcon",nzLabelAlign:"nzLabelAlign",nzLabelWrap:[2,"nzLabelWrap","nzLabelWrap",C]},exportAs:["nzFormLabel"],ngContentSelectors:ae,decls:5,vars:10,consts:[["labelTemplate",""],["nz-tooltip","",1,"ant-form-item-tooltip",3,"nzTooltipTitle"],[1,"ant-form-item-optional"],[4,"nzStringTemplateOutlet"],[3,"nzType","nzTheme"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"]],template:function(t,i){t&1&&(P(),b(0,"label"),y(1,_t,3,2,"ng-template",null,0,we),S(3,bt,1,5,"ng-container")(4,vt,1,1,"ng-container"),x()),t&2&&(I("ant-form-item-no-colon",i.nzNoColon)("ant-form-item-required",i.nzRequired)("ant-form-item-required-mark-optional",(i.nzRequiredMark==null?null:i.nzRequiredMark())==="optional"||i.isNzRequiredMarkTemplate())("ant-form-item-required-mark-hidden",(i.nzRequiredMark==null?null:i.nzRequiredMark())===!1),_e("for",i.nzFor),f(3),A(i.isNzRequiredMarkTemplate()?3:4))},dependencies:[te,ee,nt,$e,Ge,Oe,Ze,Ue],encapsulation:2,changeDetection:0})}return r})();var ai=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Z({type:r});static \u0275inj=$({imports:[St,Lt,st]})}return r})();var At=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=L({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(t,i){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return r})();var Li=(()=>{class r{_elementRef=h(ze);_platform=h(je);_ngZone=h(Ce);_renderer=h(Ne);_resizeEvents=new F;_previousValue;_initialHeight;_destroyed=new F;_listenerCleanups;_minRows;_maxRows;_enabled=!0;_previousMinRows=-1;_textareaElement;get minRows(){return this._minRows}set minRows(e){this._minRows=J(e),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(e){this._maxRows=J(e),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(e){this._cachedPlaceholderHeight=void 0,e?this._textareaElement.setAttribute("placeholder",e):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_cachedLineHeight;_cachedPlaceholderHeight;_document=h(ge);_hasFocus=!1;_isViewInited=!1;constructor(){h(We).load(At),this._textareaElement=this._elementRef.nativeElement}_setMinHeight(){let e=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;e&&(this._textareaElement.style.minHeight=e)}_setMaxHeight(){let e=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;e&&(this._textareaElement.style.maxHeight=e)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[this._renderer.listen("window","resize",()=>this._resizeEvents.next()),this._renderer.listen(this._textareaElement,"focus",this._handleFocusEvent),this._renderer.listen(this._textareaElement,"blur",this._handleFocusEvent)],this._resizeEvents.pipe(ue(16)).subscribe(()=>{this._cachedLineHeight=this._cachedPlaceholderHeight=void 0,this.resizeToFitContent(!0)})}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e()),this._resizeEvents.complete(),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let e=this._textareaElement.cloneNode(!1),t=e.style;e.rows=1,t.position="absolute",t.visibility="hidden",t.border="none",t.padding="0",t.height="",t.minHeight="",t.maxHeight="",t.top=t.bottom=t.left=t.right="auto",t.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,e.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){let e=this._textareaElement,t=e.style.marginBottom||"",i=this._platform.FIREFOX,n=this._hasFocus,a=i?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";n&&(e.style.marginBottom=`${e.clientHeight}px`),e.classList.add(a);let o=e.scrollHeight-4;return e.classList.remove(a),n&&(e.style.marginBottom=t),o}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||this._cachedPlaceholderHeight!=null)return;if(!this.placeholder){this._cachedPlaceholderHeight=0;return}let e=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=e}_handleFocusEvent=e=>{this._hasFocus=e.type==="focus"};ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(e=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;let t=this._elementRef.nativeElement,i=t.value;if(!e&&this._minRows===this._previousMinRows&&i===this._previousValue)return;let n=this._measureScrollHeight(),a=Math.max(n,this._cachedPlaceholderHeight||0);t.style.height=`${a}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(t)):setTimeout(()=>this._scrollToCaretPosition(t))}),this._previousValue=i,this._previousMinRows=this._minRows}reset(){this._initialHeight!==void 0&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_scrollToCaretPosition(e){let{selectionStart:t,selectionEnd:i}=e;!this._destroyed.isStopped&&this._hasFocus&&e.setSelectionRange(t,i)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=O({type:r,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,i){t&1&&xe("input",function(){return i._noopInputHandler()})},inputs:{minRows:[0,"cdkAutosizeMinRows","minRows"],maxRows:[0,"cdkAutosizeMaxRows","maxRows"],enabled:[2,"cdkTextareaAutosize","enabled",C],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]})}return r})();var M=class r{_title="";key;level=0;origin;parentNode=null;_icon="";_children=[];_isLeaf=!1;_isChecked=!1;_isSelectable=!1;_isDisabled=!1;_isDisableCheckbox=!1;_isExpanded=!1;_isHalfChecked=!1;_isSelected=!1;_isLoading=!1;canHide=!1;isMatched=!1;service=null;component;isStart;isEnd;get treeService(){return this.service||this.parentNode&&this.parentNode.treeService}constructor(s,e=null,t=null){if(s instanceof r)return s;this.service=t||null,this.origin=s,this.key=s.key,this.parentNode=e,this._title=s.title||"---",this._icon=s.icon||"",this._isLeaf=s.isLeaf||!1,this._children=[],this._isChecked=s.checked||!1,this._isSelectable=s.disabled||s.selectable!==!1,this._isDisabled=s.disabled||!1,this._isDisableCheckbox=s.disableCheckbox||!1,this._isExpanded=s.isLeaf?!1:s.expanded||!1,this._isHalfChecked=!1,this._isSelected=!s.disabled&&s.selected||!1,this._isLoading=!1,this.isMatched=!1,e?this.level=e.level+1:this.level=0;let i=this.treeService;i?.treeNodePostProcessor?.(this),typeof s.children<"u"&&s.children!==null&&s.children.forEach(n=>{i&&!i.isCheckStrictly&&s.checked&&!s.disabled&&!n.disabled&&!n.disableCheckbox&&(n.checked=s.checked),this._children.push(new r(n,this))})}get title(){return this._title}set title(s){this._title=s,this.update()}get icon(){return this._icon}set icon(s){this._icon=s,this.update()}get children(){return this._children}set children(s){this._children=s,this.update()}get isLeaf(){return this._isLeaf}set isLeaf(s){this._isLeaf=s,this.update()}get isChecked(){return this._isChecked}set isChecked(s){this._isChecked=s,this.origin.checked=s,this.afterValueChange("isChecked")}get isHalfChecked(){return this._isHalfChecked}set isHalfChecked(s){this._isHalfChecked=s,this.afterValueChange("isHalfChecked")}get isSelectable(){return this._isSelectable}set isSelectable(s){this._isSelectable=s,this.update()}get isDisabled(){return this._isDisabled}set isDisabled(s){this._isDisabled=s,this.update()}get isDisableCheckbox(){return this._isDisableCheckbox}set isDisableCheckbox(s){this._isDisableCheckbox=s,this.update()}get isExpanded(){return this._isExpanded}set isExpanded(s){this._isExpanded=s,this.origin.expanded=s,this.afterValueChange("isExpanded"),this.afterValueChange("reRender")}get isSelected(){return this._isSelected}set isSelected(s){this._isSelected=s,this.origin.selected=s,this.afterValueChange("isSelected")}get isLoading(){return this._isLoading}set isLoading(s){this._isLoading=s,this.update()}setSyncChecked(s=!1,e=!1){this.setChecked(s,e),this.treeService&&!this.treeService.isCheckStrictly&&this.treeService.conduct(this)}setChecked(s=!1,e=!1){this.origin.checked=s,this.isChecked=s,this.isHalfChecked=e}setExpanded(s){this._isExpanded=s,this.origin.expanded=s,this.afterValueChange("isExpanded")}getParentNode(){return this.parentNode}getChildren(){return this.children}addChildren(s,e=-1){this.isLeaf||(s.forEach(t=>{let i=a=>{a.getChildren().forEach(o=>{o.level=o.getParentNode().level+1,o.origin.level=o.level,i(o)})},n=t;n instanceof r?n.parentNode=this:n=new r(t,this),n.level=this.level+1,n.origin.level=n.level,i(n);try{e===-1?this.children.push(n):this.children.splice(e,0,n)}catch{}}),this.origin.children=this.getChildren().map(t=>t.origin),this.isLoading=!1),this.afterValueChange("addChildren"),this.afterValueChange("reRender")}clearChildren(){this.afterValueChange("clearChildren"),this.children=[],this.origin.children=[],this.afterValueChange("reRender")}remove(){let s=this.getParentNode();s&&(s.children=s.getChildren().filter(e=>e.key!==this.key),s.origin.children=s.origin.children.filter(e=>e.key!==this.key),this.afterValueChange("remove"),this.afterValueChange("reRender"))}afterValueChange(s){if(this.treeService)switch(s){case"isChecked":this.treeService.setCheckedNodeList(this);break;case"isHalfChecked":this.treeService.setHalfCheckedNodeList(this);break;case"isExpanded":this.treeService.setExpandedNodeList(this);break;case"isSelected":this.treeService.setNodeActive(this);break;case"clearChildren":this.treeService.afterRemove(this.getChildren());break;case"remove":this.treeService.afterRemove([this]);break;case"reRender":this.treeService.flattenTreeData(this.treeService.rootNodes,this.treeService.getExpandedNodeList().map(e=>e.key));break}this.update()}update(){this.component&&this.component.markForCheck()}};function le(r){let{isDisabled:s,isDisableCheckbox:e}=r;return!!(s||e)}function ot(r,s){return s.length>0&&s.indexOf(r)>-1}function Mt(r,s){return`${r}-${s}`}function Ft(r,s){return r??s}function Et(r=[],s=[]){let e=new Set(s===!0?[]:s),t=[];function i(n,a=null){return n.map((o,l)=>{let d=Mt(a?a.pos:"0",l),u=Ft(o.key,d);o.isStart=[...a?a.isStart:[],l===0],o.isEnd=[...a?a.isEnd:[],l===n.length-1];let _={parent:a,pos:d,children:[],data:o,isStart:[...a?a.isStart:[],l===0],isEnd:[...a?a.isEnd:[],l===n.length-1]};return t.push(_),s===!0||e.has(u)||o.isExpanded?_.children=i(o.children||[],_):_.children=[],_})}return i(r),t}var Ei=(()=>{class r{DRAG_SIDE_RANGE=.25;DRAG_MIN_GAP=2;isCheckStrictly=!1;isMultiple=!1;selectedNode;rootNodes=[];flattenNodes$=new de([]);selectedNodeList=[];expandedNodeList=[];checkedNodeList=[];halfCheckedNodeList=[];matchedNodeList=[];treeNodePostProcessor;initTree(e){this.rootNodes=e,this.expandedNodeList=[],this.selectedNodeList=[],this.halfCheckedNodeList=[],this.checkedNodeList=[],this.matchedNodeList=[]}flattenTreeData(e,t=[]){this.flattenNodes$.next(Et(e,t).map(i=>i.data))}getSelectedNode(){return this.selectedNode}getSelectedNodeList(){return this.conductNodeState("select")}getCheckedNodeKeys(){let e=[],t=this.getCheckedNodeList(),i=n=>{n.forEach(a=>{e.push(a.key),!(a.children.length<1)&&i(a.children)})};return i(t),e}getCheckedNodeList(){return this.conductNodeState("check")}getHalfCheckedNodeList(){return this.conductNodeState("halfCheck")}getExpandedNodeList(){return this.conductNodeState("expand")}getMatchedNodeList(){return this.conductNodeState("match")}isArrayOfNzTreeNode(e){return e.every(t=>t instanceof M)}setSelectedNode(e){this.selectedNode=e}setNodeActive(e){!this.isMultiple&&e.isSelected&&(this.selectedNodeList.forEach(t=>{e.key!==t.key&&(t.isSelected=!1)}),this.selectedNodeList=[]),this.setSelectedNodeList(e,this.isMultiple)}setSelectedNodeList(e,t=!1){let i=this.getIndexOfArray(this.selectedNodeList,e.key);t?e.isSelected&&i===-1&&this.selectedNodeList.push(e):e.isSelected&&i===-1&&(this.selectedNodeList=[e]),e.isSelected||(this.selectedNodeList=this.selectedNodeList.filter(n=>n.key!==e.key))}setHalfCheckedNodeList(e){let t=this.getIndexOfArray(this.halfCheckedNodeList,e.key);e.isHalfChecked&&t===-1?this.halfCheckedNodeList.push(e):!e.isHalfChecked&&t>-1&&(this.halfCheckedNodeList=this.halfCheckedNodeList.filter(i=>e.key!==i.key))}setCheckedNodeList(e){let t=this.getIndexOfArray(this.checkedNodeList,e.key);e.isChecked&&t===-1?this.checkedNodeList.push(e):!e.isChecked&&t>-1&&(this.checkedNodeList=this.checkedNodeList.filter(i=>e.key!==i.key))}conductNodeState(e="check"){let t=[];switch(e){case"select":t=this.selectedNodeList;break;case"expand":t=this.expandedNodeList;break;case"match":t=this.matchedNodeList;break;case"check":{t=this.checkedNodeList;let i=n=>{let a=n.getParentNode();return a?this.checkedNodeList.findIndex(o=>o.key===a.key)>-1?!0:i(a):!1};this.isCheckStrictly||(t=this.checkedNodeList.filter(n=>!i(n)));break}case"halfCheck":this.isCheckStrictly||(t=this.halfCheckedNodeList);break}return t}setExpandedNodeList(e){if(e.isLeaf)return;let t=this.getIndexOfArray(this.expandedNodeList,e.key);e.isExpanded&&t===-1?this.expandedNodeList.push(e):!e.isExpanded&&t>-1&&this.expandedNodeList.splice(t,1)}setMatchedNodeList(e){let t=this.getIndexOfArray(this.matchedNodeList,e.key);e.isMatched&&t===-1?this.matchedNodeList.push(e):!e.isMatched&&t>-1&&this.matchedNodeList.splice(t,1)}refreshCheckState(e=!1){e||this.checkedNodeList.forEach(t=>{this.conduct(t,e)})}conduct(e,t=!1){let i=e.isChecked;e&&!t&&(this.conductUp(e),this.conductDown(e,i))}conductUp(e){let t=e.getParentNode();t&&(le(t)||(t.children.every(i=>le(i)||!i.isHalfChecked&&i.isChecked)?(t.isChecked=!0,t.isHalfChecked=!1):t.children.some(i=>i.isHalfChecked||i.isChecked)?(t.isChecked=!1,t.isHalfChecked=!0):(t.isChecked=!1,t.isHalfChecked=!1)),this.setCheckedNodeList(t),this.setHalfCheckedNodeList(t),this.conductUp(t))}conductDown(e,t){le(e)||(e.isChecked=t,e.isHalfChecked=!1,this.setCheckedNodeList(e),this.setHalfCheckedNodeList(e),e.children.forEach(i=>{this.conductDown(i,t)}))}afterRemove(e){let t=i=>{this.selectedNodeList=this.selectedNodeList.filter(n=>n.key!==i.key),this.expandedNodeList=this.expandedNodeList.filter(n=>n.key!==i.key),this.checkedNodeList=this.checkedNodeList.filter(n=>n.key!==i.key),i.children&&i.children.forEach(n=>{t(n)})};e.forEach(i=>{t(i)}),this.refreshCheckState(this.isCheckStrictly)}refreshDragNode(e){e.children.length===0?this.conductUp(e):e.children.forEach(t=>{this.refreshDragNode(t)})}resetNodeLevel(e){let t=e.getParentNode();t?e.level=t.level+1:e.level=0;for(let i of e.children)this.resetNodeLevel(i)}calcDropPosition(e){let{clientY:t}=e,{top:i,bottom:n,height:a}=e.target.getBoundingClientRect(),o=Math.max(a*this.DRAG_SIDE_RANGE,this.DRAG_MIN_GAP);return t<=i+o?-1:t>=n-o?1:0}dropAndApply(e,t=-1){if(!e||t>1)return;let i=e.treeService,n=e.getParentNode(),a=this.selectedNode.getParentNode();switch(a?a.children=a.children.filter(o=>o.key!==this.selectedNode.key):this.rootNodes=this.rootNodes.filter(o=>o.key!==this.selectedNode.key),t){case 0:e.addChildren([this.selectedNode]),this.resetNodeLevel(e);break;case-1:case 1:{let o=t===1?1:0;if(n){n.addChildren([this.selectedNode],n.children.indexOf(e)+o);let l=this.selectedNode.getParentNode();l&&this.resetNodeLevel(l)}else{let l=this.rootNodes.indexOf(e)+o;this.rootNodes.splice(l,0,this.selectedNode),this.rootNodes[l].parentNode=null,this.resetNodeLevel(this.rootNodes[l])}break}}this.rootNodes.forEach(o=>{o.treeService||(o.service=i),this.refreshDragNode(o)})}formatEvent(e,t,i){let n={eventName:e,node:t,event:i};switch(e){case"dragstart":case"dragenter":case"dragover":case"dragleave":case"drop":case"dragend":Object.assign(n,{dragNode:this.getSelectedNode()});break;case"click":case"dblclick":Object.assign(n,{selectedKeys:this.selectedNodeList}),Object.assign(n,{nodes:this.selectedNodeList}),Object.assign(n,{keys:this.selectedNodeList.map(a=>a.key)});break;case"check":{let a=this.getCheckedNodeList();Object.assign(n,{checkedKeys:a}),Object.assign(n,{nodes:a}),Object.assign(n,{keys:a.map(o=>o.key)});break}case"search":Object.assign(n,{matchedKeys:this.getMatchedNodeList()}),Object.assign(n,{nodes:this.getMatchedNodeList()}),Object.assign(n,{keys:this.getMatchedNodeList().map(a=>a.key)});break;case"expand":Object.assign(n,{nodes:this.expandedNodeList}),Object.assign(n,{keys:this.expandedNodeList.map(a=>a.key)});break}return n}getIndexOfArray(e,t){return e.findIndex(i=>i.key===t)}conductCheck(e,t){this.checkedNodeList=[],this.halfCheckedNodeList=[];let i=n=>{n.forEach(a=>{e===null?a.isChecked=!!a.origin.checked:ot(a.key,e||[])?(a.isChecked=!0,a.isHalfChecked=!1):(a.isChecked=!1,a.isHalfChecked=!1),a.children.length>0&&i(a.children)})};i(this.rootNodes),this.refreshCheckState(t)}conductExpandedKeys(e=[]){let t=new Set(e===!0?[]:e);this.expandedNodeList=[];let i=n=>{n.forEach(a=>{a.setExpanded(e===!0||t.has(a.key)||a.isExpanded===!0),a.isExpanded&&this.setExpandedNodeList(a),a.children.length>0&&i(a.children)})};i(this.rootNodes)}conductSelectedKeys(e,t){this.selectedNodeList.forEach(n=>n.isSelected=!1),this.selectedNodeList=[];let i=n=>n.every(a=>{if(ot(a.key,e)){if(a.isSelected=!0,this.setSelectedNodeList(a),!t)return!1}else a.isSelected=!1;return a.children.length>0?i(a.children):!0});i(this.rootNodes)}expandNodeAllParentBySearch(e){let t=i=>{if(i&&(i.canHide=!1,i.setExpanded(!0),this.setExpandedNodeList(i),i.getParentNode()))return t(i.getParentNode())};t(e.getParentNode())}static \u0275fac=function(t){return new(t||r)};static \u0275prov=D({token:r,factory:r.\u0275fac})}return r})(),Di=new me(""),lt=class{nzTreeService;constructor(s){this.nzTreeService=s}coerceTreeNodes(s){let e=[];return this.nzTreeService.isArrayOfNzTreeNode(s)?e=s.map(t=>(t.service=this.nzTreeService,t)):e=s.map(t=>new M(t,null,this.nzTreeService)),e}getTreeNodes(){return this.nzTreeService.rootNodes}getTreeNodeByKey(s){let e=[],t=i=>{e.push(i),i.getChildren().forEach(n=>{t(n)})};return this.getTreeNodes().forEach(i=>{t(i)}),e.find(i=>i.key===s)||null}getCheckedNodeList(){return this.nzTreeService.getCheckedNodeList()}getSelectedNodeList(){return this.nzTreeService.getSelectedNodeList()}getHalfCheckedNodeList(){return this.nzTreeService.getHalfCheckedNodeList()}getExpandedNodeList(){return this.nzTreeService.getExpandedNodeList()}getMatchedNodeList(){return this.nzTreeService.getMatchedNodeList()}};var ct=class r{cogSrv=h(Ve);c;constructor(){this.c=this.cogSrv.merge("utilArray",{deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"})}treeToArr(s,e){let t=z({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},e),i=[],n=(a,o,l=0)=>{for(let d of a){d[t.deepMapName]=l,d[t.parentMapName]=o,t.cb&&t.cb(d,o,l),i.push(d);let u=d[t.childrenMapName];u!=null&&Array.isArray(u)&&u.length>0&&n(u,d,l+1),t.clearChildren&&delete d[t.childrenMapName]}};return n(s,null),i}arrToTree(s,e){if(!Array.isArray(s)||s.length===0)return[];let t=z({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},e),i=[],n={},a=t.rootParentIdValue,o=s;if(!a){let l=o.map(u=>u[t.parentIdMapName]),d=l.findIndex(u=>u==null);a=d!==-1?l[d]:l.sort()[0]}for(let l of o){let d=l[t.idMapName],u=l[t.parentIdMapName];n[d]=n[d]??[],l[t.childrenMapName]=n[d],t.cb&&t.cb(l),u!==a?(n[u]=n[u]??[],n[u].push(l)):i.push(l)}return i}arrToTreeNode(s,e){let t=z({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},e),i=this.arrToTree(s,{idMapName:t.idMapName,parentIdMapName:t.parentIdMapName,childrenMapName:"children"});return this.visitTree(i,(n,a,o)=>{n.key=n[t.idMapName],n.title=n[t.titleMapName],n.checked=n[t.checkedMapname],n.selected=n[t.selectedMapname],n.expanded=n[t.expandedMapname],n.disabled=n[t.disabledMapname],n[t.isLeafMapName]==null?n.isLeaf=n.children.length===0:n.isLeaf=n[t.isLeafMapName],t.cb&&t.cb(n,a,o)}),i.map(n=>new M(n))}visitTree(s,e,t){t=z({childrenMapName:this.c.childrenMapName},t);let i=(n,a,o)=>{for(let l of n){e(l,a,o);let d=l[t.childrenMapName];Array.isArray(d)&&d.length>0&&i(d,l,o+1)}};i(s,null,1)}findTree(s,e,t){let i;return this.visitTree(s,n=>{i===void 0&&e(n)&&(i=n)},t),i}getKeysByTreeNode(s,e){let t=z({includeHalfChecked:!0},e),i=[];return this.visitTree(s,(n,a,o)=>{(n.isChecked||t.includeHalfChecked&&n.isHalfChecked)&&i.push(t.cb?t.cb(n,a,o):t.keyMapName?n.origin[t.keyMapName]:n.key)}),i}baseFlat(s,e,t=[]){let i=-1;for(;++i<s.length;){let n=s[i];if(e>0&&Array.isArray(n))if(e>1)this.baseFlat(n,e-1,t);else{let a=-1,o=t.length;for(;++a<n.length;)t[o+a]=n[a]}else t[t.length]=n}return t}flat(s,e=1/0){return Array.isArray(s)?this.baseFlat(s,e):s}groupBy(s,e){return Array.isArray(s)?s.reduce((t,i)=>{let n=e(i);return Object.prototype.hasOwnProperty.call(t,n)?t[n].push(i):t[n]=[i],t},{}):{}}uniq(s,e){return Array.from(s.reduce((t,i)=>{let n=e?typeof e=="string"?i[e]:e(i):i;return t.has(n)||t.set(n,i),t},new Map).values())}static \u0275fac=function(e){return new(e||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:"root"})};export{yt as a,at as b,Lt as c,St as d,ai as e,M as f,Et as g,Ei as h,Di as i,lt as j,ct as k,Li as l};
