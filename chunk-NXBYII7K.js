import{a as vn,b as oc}from"./chunk-E5OBXJJA.js";import{b as gn,f as Xl,g as Ql,h as Zl,i as Yl,j as ec,k as tc,l as jr,m as ic,p as nc,u as lc}from"./chunk-P56PFOH7.js";import{a as Il,b as Dl,c as Nl,d as kl,e as Vl,f as Ml,g as Rl}from"./chunk-QWDF2CY6.js";import{a as ac,b as sc}from"./chunk-J74DGG7F.js";import{h as Al,i as jl,o as ql,p as Wl,q as zt,r as St,s as rc}from"./chunk-TQSE6GJU.js";import{F as Jt,H as Fl,I as yn,J as Ll,K as Ul,L as Hl,M as Bl,N as Kl,O as Gl,P as Jl,d as _n,g as Ie,h as xl,k as Tl,m as De,n as Pl,v as Ol,z as Ar}from"./chunk-ADNPNLQV.js";import{Ab as fl,Bb as Oe,Cb as ue,Db as Rr,Ea as yt,Eb as ze,F as Gs,Gb as vt,H as Js,Hb as Ct,Ia as z,Ib as wt,J as Xs,Ja as rl,Jb as cn,Ka as il,Kg as $l,L as Yi,Lb as go,M as Qs,Ma as nl,Mb as pl,Na as Gt,Nc as dn,Ob as ml,Og as zl,P as en,Pa as ol,Qa as ae,Ra as on,Sa as I,Ta as Ze,Ua as $,Va as an,Vb as Ae,W as tn,Wa as Ee,X as Bt,Ya as al,a as O,ag as rt,b as ge,ba as yi,bb as k,bc as un,bg as wl,c as Us,ca as Zs,cb as Ye,cc as bt,cg as qe,ch as Sl,d as x,dc as hl,dg as fn,dh as El,eb as et,f as Hs,fa as Z,fb as tt,fg as pn,g as Dr,ga as Ys,gb as T,ha as te,hb as P,hd as dr,hg as bl,hh as hn,ia as el,ib as ie,j as Bs,ja as At,jb as sl,k as Nr,kb as ll,kc as Fr,l as kr,la as tl,lb as cl,lc as _l,ld as $t,mb as me,md as yl,nd as yo,pa as Kt,pb as Y,pd as vl,qa as R,ra as F,rb as v,rc as je,s as Ks,sb as sn,sd as Cl,tb as ln,ua as oe,ug as mn,va as rn,w as Vr,x as _o,ya as nn,yb as ul,yc as gl,za as Mr,zb as dl}from"./chunk-ZSKDB3F4.js";var $i=x(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.regexpCode=J.getEsmExportName=J.getProperty=J.safeStringify=J.stringify=J.strConcat=J.addCodeArg=J.str=J._=J.nil=J._Code=J.Name=J.IDENTIFIER=J._CodeOrName=void 0;var wi=class{};J._CodeOrName=wi;J.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var pr=class extends wi{constructor(e){if(super(),!J.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};J.Name=pr;var it=class extends wi{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,i)=>`${r}${i}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,i)=>(i instanceof pr&&(r[i.str]=(r[i.str]||0)+1),r),{})}};J._Code=it;J.nil=new it("");function fc(t,...e){let r=[t[0]],i=0;for(;i<e.length;)bo(r,e[i]),r.push(t[++i]);return new it(r)}J._=fc;var wo=new it("+");function pc(t,...e){let r=[bi(t[0])],i=0;for(;i<e.length;)r.push(wo),bo(r,e[i]),r.push(wo,bi(t[++i]));return Nf(r),new it(r)}J.str=pc;function bo(t,e){e instanceof it?t.push(...e._items):e instanceof pr?t.push(e):t.push(Mf(e))}J.addCodeArg=bo;function Nf(t){let e=1;for(;e<t.length-1;){if(t[e]===wo){let r=kf(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function kf(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof pr||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof pr))return`"${t}${e.slice(1)}`}function Vf(t,e){return e.emptyStr()?t:t.emptyStr()?e:pc`${t}${e}`}J.strConcat=Vf;function Mf(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:bi(Array.isArray(t)?t.join(","):t)}function Rf(t){return new it(bi(t))}J.stringify=Rf;function bi(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}J.safeStringify=bi;function Ff(t){return typeof t=="string"&&J.IDENTIFIER.test(t)?new it(`.${t}`):fc`[${t}]`}J.getProperty=Ff;function Af(t){if(typeof t=="string"&&J.IDENTIFIER.test(t))return new it(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}J.getEsmExportName=Af;function jf(t){return new it(t.toString())}J.regexpCode=jf});var So=x(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.ValueScope=Le.ValueScopeName=Le.Scope=Le.varKinds=Le.UsedValueState=void 0;var We=$i(),$o=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},$n=function(t){return t[t.Started=0]="Started",t[t.Completed=1]="Completed",t}($n||(Le.UsedValueState=$n={}));Le.varKinds={const:new We.Name("const"),let:new We.Name("let"),var:new We.Name("var")};var zn=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof We.Name?e:this.name(e)}name(e){return new We.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,i;if(!((i=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||i===void 0)&&i.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Le.Scope=zn;var Sn=class extends We.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:i}){this.value=e,this.scopePath=(0,We._)`.${new We.Name(r)}[${i}]`}};Le.ValueScopeName=Sn;var qf=(0,We._)`\n`,zo=class extends zn{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts=ge(O({},e),{_n:e.lines?qf:We.nil})}get(){return this._scope}name(e){return new Sn(e,this._newName(e))}value(e,r){var i;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(e),{prefix:o}=n,a=(i=r.key)!==null&&i!==void 0?i:r.ref,s=this._values[o];if(s){let d=s.get(a);if(d)return d}else s=this._values[o]=new Map;s.set(a,n);let c=this._scope[o]||(this._scope[o]=[]),p=c.length;return c[p]=r.ref,n.setValue(r,{property:o,itemIndex:p}),n}getValue(e,r){let i=this._values[e];if(i)return i.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,i=>{if(i.scopePath===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return(0,We._)`${e}${i.scopePath}`})}scopeCode(e=this._values,r,i){return this._reduceValues(e,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},r,i)}_reduceValues(e,r,i={},n){let o=We.nil;for(let a in e){let s=e[a];if(!s)continue;let c=i[a]=i[a]||new Map;s.forEach(p=>{if(c.has(p))return;c.set(p,$n.Started);let d=r(p);if(d){let m=this.opts.es5?Le.varKinds.var:Le.varKinds.const;o=(0,We._)`${o}${m} ${p} = ${d};${this.opts._n}`}else if(d=n?.(p))o=(0,We._)`${o}${d}${this.opts._n}`;else throw new $o(p);c.set(p,$n.Completed)})}return o}};Le.ValueScope=zo});var W=x(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.or=L.and=L.not=L.CodeGen=L.operators=L.varKinds=L.ValueScopeName=L.ValueScope=L.Scope=L.Name=L.regexpCode=L.stringify=L.getProperty=L.nil=L.strConcat=L.str=L._=void 0;var H=$i(),lt=So(),Qt=$i();Object.defineProperty(L,"_",{enumerable:!0,get:function(){return Qt._}});Object.defineProperty(L,"str",{enumerable:!0,get:function(){return Qt.str}});Object.defineProperty(L,"strConcat",{enumerable:!0,get:function(){return Qt.strConcat}});Object.defineProperty(L,"nil",{enumerable:!0,get:function(){return Qt.nil}});Object.defineProperty(L,"getProperty",{enumerable:!0,get:function(){return Qt.getProperty}});Object.defineProperty(L,"stringify",{enumerable:!0,get:function(){return Qt.stringify}});Object.defineProperty(L,"regexpCode",{enumerable:!0,get:function(){return Qt.regexpCode}});Object.defineProperty(L,"Name",{enumerable:!0,get:function(){return Qt.Name}});var On=So();Object.defineProperty(L,"Scope",{enumerable:!0,get:function(){return On.Scope}});Object.defineProperty(L,"ValueScope",{enumerable:!0,get:function(){return On.ValueScope}});Object.defineProperty(L,"ValueScopeName",{enumerable:!0,get:function(){return On.ValueScopeName}});Object.defineProperty(L,"varKinds",{enumerable:!0,get:function(){return On.varKinds}});L.operators={GT:new H._Code(">"),GTE:new H._Code(">="),LT:new H._Code("<"),LTE:new H._Code("<="),EQ:new H._Code("==="),NEQ:new H._Code("!=="),NOT:new H._Code("!"),OR:new H._Code("||"),AND:new H._Code("&&"),ADD:new H._Code("+")};var jt=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Eo=class extends jt{constructor(e,r,i){super(),this.varKind=e,this.name=r,this.rhs=i}render({es5:e,_n:r}){let i=e?lt.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${i} ${this.name}${n};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Kr(this.rhs,e,r)),this}get names(){return this.rhs instanceof H._CodeOrName?this.rhs.names:{}}},xn=class extends jt{constructor(e,r,i){super(),this.lhs=e,this.rhs=r,this.sideEffects=i}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof H.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Kr(this.rhs,e,r),this}get names(){let e=this.lhs instanceof H.Name?{}:O({},this.lhs.names);return Pn(e,this.rhs)}},xo=class extends xn{constructor(e,r,i,n){super(e,i,n),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},To=class extends jt{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Po=class extends jt{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Oo=class extends jt{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Io=class extends jt{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Kr(this.code,e,r),this}get names(){return this.code instanceof H._CodeOrName?this.code.names:{}}},zi=class extends jt{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,i)=>r+i.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let i=e[r].optimizeNodes();Array.isArray(i)?e.splice(r,1,...i):i?e[r]=i:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:i}=this,n=i.length;for(;n--;){let o=i[n];o.optimizeNames(e,r)||(Wf(e,o.names),i.splice(n,1))}return i.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>mr(e,r.names),{})}},qt=class extends zi{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Do=class extends zi{},No=(()=>{class t extends qt{}return t.kind="else",t})(),En=(()=>{class t extends qt{constructor(r,i){super(i),this.condition=r}render(r){let i=`if(${this.condition})`+super.render(r);return this.else&&(i+="else "+this.else.render(r)),i}optimizeNodes(){super.optimizeNodes();let r=this.condition;if(r===!0)return this.nodes;let i=this.else;if(i){let n=i.optimizeNodes();i=this.else=Array.isArray(n)?new No(n):n}if(i)return r===!1?i instanceof t?i:i.nodes:this.nodes.length?this:new t(yc(r),i instanceof t?[i]:i.nodes);if(!(r===!1||!this.nodes.length))return this}optimizeNames(r,i){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(r,i),!!(super.optimizeNames(r,i)||this.else))return this.condition=Kr(this.condition,r,i),this}get names(){let r=super.names;return Pn(r,this.condition),this.else&&mr(r,this.else.names),r}}return t.kind="if",t})(),In=(()=>{class t extends qt{}return t.kind="for",t})(),ko=class extends In{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Kr(this.iteration,e,r),this}get names(){return mr(super.names,this.iteration.names)}},Vo=class extends In{constructor(e,r,i,n){super(),this.varKind=e,this.name=r,this.from=i,this.to=n}render(e){let r=e.es5?lt.varKinds.var:this.varKind,{name:i,from:n,to:o}=this;return`for(${r} ${i}=${n}; ${i}<${o}; ${i}++)`+super.render(e)}get names(){let e=Pn(super.names,this.from);return Pn(e,this.to)}},Tn=class extends In{constructor(e,r,i,n){super(),this.loop=e,this.varKind=r,this.name=i,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Kr(this.iterable,e,r),this}get names(){return mr(super.names,this.iterable.names)}},mc=(()=>{class t extends qt{constructor(r,i,n){super(),this.name=r,this.args=i,this.async=n}render(r){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(r)}}return t.kind="func",t})(),hc=(()=>{class t extends zi{render(r){return"return "+super.render(r)}}return t.kind="return",t})(),Mo=class extends qt{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var i,n;return super.optimizeNames(e,r),(i=this.catch)===null||i===void 0||i.optimizeNames(e,r),(n=this.finally)===null||n===void 0||n.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&mr(e,this.catch.names),this.finally&&mr(e,this.finally.names),e}},_c=(()=>{class t extends qt{constructor(r){super(),this.error=r}render(r){return`catch(${this.error})`+super.render(r)}}return t.kind="catch",t})(),gc=(()=>{class t extends qt{render(r){return"finally"+super.render(r)}}return t.kind="finally",t})(),Ro=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts=ge(O({},r),{_n:r.lines?`
`:""}),this._extScope=e,this._scope=new lt.Scope({parent:e}),this._nodes=[new Do]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let i=this._extScope.value(e,r);return(this._values[i.prefix]||(this._values[i.prefix]=new Set)).add(i),i}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,i,n){let o=this._scope.toName(r);return i!==void 0&&n&&(this._constants[o.str]=i),this._leafNode(new Eo(e,o,i)),o}const(e,r,i){return this._def(lt.varKinds.const,e,r,i)}let(e,r,i){return this._def(lt.varKinds.let,e,r,i)}var(e,r,i){return this._def(lt.varKinds.var,e,r,i)}assign(e,r,i){return this._leafNode(new xn(e,r,i))}add(e,r){return this._leafNode(new xo(e,L.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==H.nil&&this._leafNode(new Io(e)),this}object(...e){let r=["{"];for(let[i,n]of e)r.length>1&&r.push(","),r.push(i),(i!==n||this.opts.es5)&&(r.push(":"),(0,H.addCodeArg)(r,n));return r.push("}"),new H._Code(r)}if(e,r,i){if(this._blockNode(new En(e)),r&&i)this.code(r).else().code(i).endIf();else if(r)this.code(r).endIf();else if(i)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new En(e))}else(){return this._elseNode(new No)}endIf(){return this._endBlockNode(En,No)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new ko(e),r)}forRange(e,r,i,n,o=this.opts.es5?lt.varKinds.var:lt.varKinds.let){let a=this._scope.toName(e);return this._for(new Vo(o,a,r,i),()=>n(a))}forOf(e,r,i,n=lt.varKinds.const){let o=this._scope.toName(e);if(this.opts.es5){let a=r instanceof H.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,H._)`${a}.length`,s=>{this.var(o,(0,H._)`${a}[${s}]`),i(o)})}return this._for(new Tn("of",n,o,r),()=>i(o))}forIn(e,r,i,n=this.opts.es5?lt.varKinds.var:lt.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,H._)`Object.keys(${r})`,i);let o=this._scope.toName(e);return this._for(new Tn("in",n,o,r),()=>i(o))}endFor(){return this._endBlockNode(In)}label(e){return this._leafNode(new To(e))}break(e){return this._leafNode(new Po(e))}return(e){let r=new hc;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(hc)}try(e,r,i){if(!r&&!i)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new Mo;if(this._blockNode(n),this.code(e),r){let o=this.name("e");this._currNode=n.catch=new _c(o),r(o)}return i&&(this._currNode=n.finally=new gc,this.code(i)),this._endBlockNode(_c,gc)}throw(e){return this._leafNode(new Oo(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let i=this._nodes.length-r;if(i<0||e!==void 0&&i!==e)throw new Error(`CodeGen: wrong number of nodes: ${i} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=H.nil,i,n){return this._blockNode(new mc(e,r,i)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(mc)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let i=this._currNode;if(i instanceof e||r&&i instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof En))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};L.CodeGen=Ro;function mr(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Pn(t,e){return e instanceof H._CodeOrName?mr(t,e.names):t}function Kr(t,e,r){if(t instanceof H.Name)return i(t);if(!n(t))return t;return new H._Code(t._items.reduce((o,a)=>(a instanceof H.Name&&(a=i(a)),a instanceof H._Code?o.push(...a._items):o.push(a),o),[]));function i(o){let a=r[o.str];return a===void 0||e[o.str]!==1?o:(delete e[o.str],a)}function n(o){return o instanceof H._Code&&o._items.some(a=>a instanceof H.Name&&e[a.str]===1&&r[a.str]!==void 0)}}function Wf(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function yc(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,H._)`!${Fo(t)}`}L.not=yc;var Lf=vc(L.operators.AND);function Uf(...t){return t.reduce(Lf)}L.and=Uf;var Hf=vc(L.operators.OR);function Bf(...t){return t.reduce(Hf)}L.or=Bf;function vc(t){return(e,r)=>e===H.nil?r:r===H.nil?e:(0,H._)`${Fo(e)} ${t} ${Fo(r)}`}function Fo(t){return t instanceof H.Name?t:(0,H._)`(${t})`}});var X=x(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.checkStrictMode=U.getErrorPath=U.Type=U.useFunc=U.setEvaluated=U.evaluatedPropsToName=U.mergeEvaluated=U.eachItem=U.unescapeJsonPointer=U.escapeJsonPointer=U.escapeFragment=U.unescapeFragment=U.schemaRefOrVal=U.schemaHasRulesButRef=U.schemaHasRules=U.checkUnknownRules=U.alwaysValidSchema=U.toHash=void 0;var ce=W(),Kf=$i();function Gf(t){let e={};for(let r of t)e[r]=!0;return e}U.toHash=Gf;function Jf(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(bc(t,e),!$c(e,t.self.RULES.all))}U.alwaysValidSchema=Jf;function bc(t,e=t.schema){let{opts:r,self:i}=t;if(!r.strictSchema||typeof e=="boolean")return;let n=i.RULES.keywords;for(let o in e)n[o]||Ec(t,`unknown keyword: "${o}"`)}U.checkUnknownRules=bc;function $c(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}U.schemaHasRules=$c;function Xf(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}U.schemaHasRulesButRef=Xf;function Qf({topSchemaRef:t,schemaPath:e},r,i,n){if(!n){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ce._)`${r}`}return(0,ce._)`${t}${e}${(0,ce.getProperty)(i)}`}U.schemaRefOrVal=Qf;function Zf(t){return zc(decodeURIComponent(t))}U.unescapeFragment=Zf;function Yf(t){return encodeURIComponent(jo(t))}U.escapeFragment=Yf;function jo(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}U.escapeJsonPointer=jo;function zc(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}U.unescapeJsonPointer=zc;function ep(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}U.eachItem=ep;function Cc({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:i}){return(n,o,a,s)=>{let c=a===void 0?o:a instanceof ce.Name?(o instanceof ce.Name?t(n,o,a):e(n,o,a),a):o instanceof ce.Name?(e(n,a,o),o):r(o,a);return s===ce.Name&&!(c instanceof ce.Name)?i(n,c):c}}U.mergeEvaluated={props:Cc({mergeNames:(t,e,r)=>t.if((0,ce._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,ce._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,ce._)`${r} || {}`).code((0,ce._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,ce._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,ce._)`${r} || {}`),qo(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:O(O({},t),e),resultToName:Sc}),items:Cc({mergeNames:(t,e,r)=>t.if((0,ce._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,ce._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,ce._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,ce._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Sc(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,ce._)`{}`);return e!==void 0&&qo(t,r,e),r}U.evaluatedPropsToName=Sc;function qo(t,e,r){Object.keys(r).forEach(i=>t.assign((0,ce._)`${e}${(0,ce.getProperty)(i)}`,!0))}U.setEvaluated=qo;var wc={};function tp(t,e){return t.scopeValue("func",{ref:e,code:wc[e.code]||(wc[e.code]=new Kf._Code(e.code))})}U.useFunc=tp;var Ao=function(t){return t[t.Num=0]="Num",t[t.Str=1]="Str",t}(Ao||(U.Type=Ao={}));function rp(t,e,r){if(t instanceof ce.Name){let i=e===Ao.Num;return r?i?(0,ce._)`"[" + ${t} + "]"`:(0,ce._)`"['" + ${t} + "']"`:i?(0,ce._)`"/" + ${t}`:(0,ce._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ce.getProperty)(t).toString():"/"+jo(t)}U.getErrorPath=rp;function Ec(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}U.checkStrictMode=Ec});var Wt=x(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});var Ne=W(),ip={data:new Ne.Name("data"),valCxt:new Ne.Name("valCxt"),instancePath:new Ne.Name("instancePath"),parentData:new Ne.Name("parentData"),parentDataProperty:new Ne.Name("parentDataProperty"),rootData:new Ne.Name("rootData"),dynamicAnchors:new Ne.Name("dynamicAnchors"),vErrors:new Ne.Name("vErrors"),errors:new Ne.Name("errors"),this:new Ne.Name("this"),self:new Ne.Name("self"),scope:new Ne.Name("scope"),json:new Ne.Name("json"),jsonPos:new Ne.Name("jsonPos"),jsonLen:new Ne.Name("jsonLen"),jsonPart:new Ne.Name("jsonPart")};Wo.default=ip});var Si=x(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.extendErrors=ke.resetErrorsCount=ke.reportExtraError=ke.reportError=ke.keyword$DataError=ke.keywordError=void 0;var K=W(),Dn=X(),Re=Wt();ke.keywordError={message:({keyword:t})=>(0,K.str)`must pass "${t}" keyword validation`};ke.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,K.str)`"${t}" keyword must be ${e} ($data)`:(0,K.str)`"${t}" keyword is invalid ($data)`};function np(t,e=ke.keywordError,r,i){let{it:n}=t,{gen:o,compositeRule:a,allErrors:s}=n,c=Pc(t,e,r);i??(a||s)?xc(o,c):Tc(n,(0,K._)`[${c}]`)}ke.reportError=np;function op(t,e=ke.keywordError,r){let{it:i}=t,{gen:n,compositeRule:o,allErrors:a}=i,s=Pc(t,e,r);xc(n,s),o||a||Tc(i,Re.default.vErrors)}ke.reportExtraError=op;function ap(t,e){t.assign(Re.default.errors,e),t.if((0,K._)`${Re.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,K._)`${Re.default.vErrors}.length`,e),()=>t.assign(Re.default.vErrors,null)))}ke.resetErrorsCount=ap;function sp({gen:t,keyword:e,schemaValue:r,data:i,errsCount:n,it:o}){if(n===void 0)throw new Error("ajv implementation error");let a=t.name("err");t.forRange("i",n,Re.default.errors,s=>{t.const(a,(0,K._)`${Re.default.vErrors}[${s}]`),t.if((0,K._)`${a}.instancePath === undefined`,()=>t.assign((0,K._)`${a}.instancePath`,(0,K.strConcat)(Re.default.instancePath,o.errorPath))),t.assign((0,K._)`${a}.schemaPath`,(0,K.str)`${o.errSchemaPath}/${e}`),o.opts.verbose&&(t.assign((0,K._)`${a}.schema`,r),t.assign((0,K._)`${a}.data`,i))})}ke.extendErrors=sp;function xc(t,e){let r=t.const("err",e);t.if((0,K._)`${Re.default.vErrors} === null`,()=>t.assign(Re.default.vErrors,(0,K._)`[${r}]`),(0,K._)`${Re.default.vErrors}.push(${r})`),t.code((0,K._)`${Re.default.errors}++`)}function Tc(t,e){let{gen:r,validateName:i,schemaEnv:n}=t;n.$async?r.throw((0,K._)`new ${t.ValidationError}(${e})`):(r.assign((0,K._)`${i}.errors`,e),r.return(!1))}var hr={keyword:new K.Name("keyword"),schemaPath:new K.Name("schemaPath"),params:new K.Name("params"),propertyName:new K.Name("propertyName"),message:new K.Name("message"),schema:new K.Name("schema"),parentSchema:new K.Name("parentSchema")};function Pc(t,e,r){let{createErrors:i}=t.it;return i===!1?(0,K._)`{}`:lp(t,e,r)}function lp(t,e,r={}){let{gen:i,it:n}=t,o=[cp(n,r),up(t,r)];return dp(t,e,o),i.object(...o)}function cp({errorPath:t},{instancePath:e}){let r=e?(0,K.str)`${t}${(0,Dn.getErrorPath)(e,Dn.Type.Str)}`:t;return[Re.default.instancePath,(0,K.strConcat)(Re.default.instancePath,r)]}function up({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:i}){let n=i?e:(0,K.str)`${e}/${t}`;return r&&(n=(0,K.str)`${n}${(0,Dn.getErrorPath)(r,Dn.Type.Str)}`),[hr.schemaPath,n]}function dp(t,{params:e,message:r},i){let{keyword:n,data:o,schemaValue:a,it:s}=t,{opts:c,propertyName:p,topSchemaRef:d,schemaPath:m}=s;i.push([hr.keyword,n],[hr.params,typeof e=="function"?e(t):e||(0,K._)`{}`]),c.messages&&i.push([hr.message,typeof r=="function"?r(t):r]),c.verbose&&i.push([hr.schema,a],[hr.parentSchema,(0,K._)`${d}${m}`],[Re.default.data,o]),p&&i.push([hr.propertyName,p])}});var Ic=x(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.boolOrEmptySchema=Gr.topBoolOrEmptySchema=void 0;var fp=Si(),pp=W(),mp=Wt(),hp={message:"boolean schema is false"};function _p(t){let{gen:e,schema:r,validateName:i}=t;r===!1?Oc(t,!1):typeof r=="object"&&r.$async===!0?e.return(mp.default.data):(e.assign((0,pp._)`${i}.errors`,null),e.return(!0))}Gr.topBoolOrEmptySchema=_p;function gp(t,e){let{gen:r,schema:i}=t;i===!1?(r.var(e,!1),Oc(t)):r.var(e,!0)}Gr.boolOrEmptySchema=gp;function Oc(t,e){let{gen:r,data:i}=t,n={gen:r,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,fp.reportError)(n,hp,void 0,e)}});var Lo=x(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.getRules=Jr.isJSONType=void 0;var yp=["string","number","integer","boolean","null","object","array"],vp=new Set(yp);function Cp(t){return typeof t=="string"&&vp.has(t)}Jr.isJSONType=Cp;function wp(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:ge(O({},t),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Jr.getRules=wp});var Uo=x(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.shouldUseRule=Zt.shouldUseGroup=Zt.schemaHasRulesForType=void 0;function bp({schema:t,self:e},r){let i=e.RULES.types[r];return i&&i!==!0&&Dc(t,i)}Zt.schemaHasRulesForType=bp;function Dc(t,e){return e.rules.some(r=>Nc(t,r))}Zt.shouldUseGroup=Dc;function Nc(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(i=>t[i]!==void 0))}Zt.shouldUseRule=Nc});var Ei=x(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.reportTypeError=Ve.checkDataTypes=Ve.checkDataType=Ve.coerceAndCheckDataType=Ve.getJSONTypes=Ve.getSchemaTypes=Ve.DataType=void 0;var $p=Lo(),zp=Uo(),Sp=Si(),q=W(),kc=X(),Xr=function(t){return t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong",t}(Xr||(Ve.DataType=Xr={}));function Ep(t){let e=Vc(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Ve.getSchemaTypes=Ep;function Vc(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every($p.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Ve.getJSONTypes=Vc;function xp(t,e){let{gen:r,data:i,opts:n}=t,o=Tp(e,n.coerceTypes),a=e.length>0&&!(o.length===0&&e.length===1&&(0,zp.schemaHasRulesForType)(t,e[0]));if(a){let s=Bo(e,i,n.strictNumbers,Xr.Wrong);r.if(s,()=>{o.length?Pp(t,e,o):Ko(t)})}return a}Ve.coerceAndCheckDataType=xp;var Mc=new Set(["string","number","integer","boolean","null"]);function Tp(t,e){return e?t.filter(r=>Mc.has(r)||e==="array"&&r==="array"):[]}function Pp(t,e,r){let{gen:i,data:n,opts:o}=t,a=i.let("dataType",(0,q._)`typeof ${n}`),s=i.let("coerced",(0,q._)`undefined`);o.coerceTypes==="array"&&i.if((0,q._)`${a} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>i.assign(n,(0,q._)`${n}[0]`).assign(a,(0,q._)`typeof ${n}`).if(Bo(e,n,o.strictNumbers),()=>i.assign(s,n))),i.if((0,q._)`${s} !== undefined`);for(let p of r)(Mc.has(p)||p==="array"&&o.coerceTypes==="array")&&c(p);i.else(),Ko(t),i.endIf(),i.if((0,q._)`${s} !== undefined`,()=>{i.assign(n,s),Op(t,s)});function c(p){switch(p){case"string":i.elseIf((0,q._)`${a} == "number" || ${a} == "boolean"`).assign(s,(0,q._)`"" + ${n}`).elseIf((0,q._)`${n} === null`).assign(s,(0,q._)`""`);return;case"number":i.elseIf((0,q._)`${a} == "boolean" || ${n} === null
              || (${a} == "string" && ${n} && ${n} == +${n})`).assign(s,(0,q._)`+${n}`);return;case"integer":i.elseIf((0,q._)`${a} === "boolean" || ${n} === null
              || (${a} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(s,(0,q._)`+${n}`);return;case"boolean":i.elseIf((0,q._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(s,!1).elseIf((0,q._)`${n} === "true" || ${n} === 1`).assign(s,!0);return;case"null":i.elseIf((0,q._)`${n} === "" || ${n} === 0 || ${n} === false`),i.assign(s,null);return;case"array":i.elseIf((0,q._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${n} === null`).assign(s,(0,q._)`[${n}]`)}}}function Op({gen:t,parentData:e,parentDataProperty:r},i){t.if((0,q._)`${e} !== undefined`,()=>t.assign((0,q._)`${e}[${r}]`,i))}function Ho(t,e,r,i=Xr.Correct){let n=i===Xr.Correct?q.operators.EQ:q.operators.NEQ,o;switch(t){case"null":return(0,q._)`${e} ${n} null`;case"array":o=(0,q._)`Array.isArray(${e})`;break;case"object":o=(0,q._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=a((0,q._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=a();break;default:return(0,q._)`typeof ${e} ${n} ${t}`}return i===Xr.Correct?o:(0,q.not)(o);function a(s=q.nil){return(0,q.and)((0,q._)`typeof ${e} == "number"`,s,r?(0,q._)`isFinite(${e})`:q.nil)}}Ve.checkDataType=Ho;function Bo(t,e,r,i){if(t.length===1)return Ho(t[0],e,r,i);let n,o=(0,kc.toHash)(t);if(o.array&&o.object){let a=(0,q._)`typeof ${e} != "object"`;n=o.null?a:(0,q._)`!${e} || ${a}`,delete o.null,delete o.array,delete o.object}else n=q.nil;o.number&&delete o.integer;for(let a in o)n=(0,q.and)(n,Ho(a,e,r,i));return n}Ve.checkDataTypes=Bo;var Ip={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,q._)`{type: ${t}}`:(0,q._)`{type: ${e}}`};function Ko(t){let e=Dp(t);(0,Sp.reportError)(e,Ip)}Ve.reportTypeError=Ko;function Dp(t){let{gen:e,data:r,schema:i}=t,n=(0,kc.schemaRefOrVal)(t,i,"type");return{gen:e,keyword:"type",data:r,schema:i.type,schemaCode:n,schemaValue:n,parentSchema:i,params:{},it:t}}});var Fc=x(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.assignDefaults=void 0;var Qr=W(),Np=X();function kp(t,e){let{properties:r,items:i}=t.schema;if(e==="object"&&r)for(let n in r)Rc(t,n,r[n].default);else e==="array"&&Array.isArray(i)&&i.forEach((n,o)=>Rc(t,o,n.default))}Nn.assignDefaults=kp;function Rc(t,e,r){let{gen:i,compositeRule:n,data:o,opts:a}=t;if(r===void 0)return;let s=(0,Qr._)`${o}${(0,Qr.getProperty)(e)}`;if(n){(0,Np.checkStrictMode)(t,`default is ignored for: ${s}`);return}let c=(0,Qr._)`${s} === undefined`;a.useDefaults==="empty"&&(c=(0,Qr._)`${c} || ${s} === null || ${s} === ""`),i.if(c,(0,Qr._)`${s} = ${(0,Qr.stringify)(r)}`)}});var nt=x(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.validateUnion=se.validateArray=se.usePattern=se.callValidateCode=se.schemaProperties=se.allSchemaProperties=se.noPropertyInData=se.propertyInData=se.isOwnProperty=se.hasPropFunc=se.reportMissingProp=se.checkMissingProp=se.checkReportMissingProp=void 0;var de=W(),Go=X(),Yt=Wt(),Vp=X();function Mp(t,e){let{gen:r,data:i,it:n}=t;r.if(Xo(r,i,e,n.opts.ownProperties),()=>{t.setParams({missingProperty:(0,de._)`${e}`},!0),t.error()})}se.checkReportMissingProp=Mp;function Rp({gen:t,data:e,it:{opts:r}},i,n){return(0,de.or)(...i.map(o=>(0,de.and)(Xo(t,e,o,r.ownProperties),(0,de._)`${n} = ${o}`)))}se.checkMissingProp=Rp;function Fp(t,e){t.setParams({missingProperty:e},!0),t.error()}se.reportMissingProp=Fp;function Ac(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,de._)`Object.prototype.hasOwnProperty`})}se.hasPropFunc=Ac;function Jo(t,e,r){return(0,de._)`${Ac(t)}.call(${e}, ${r})`}se.isOwnProperty=Jo;function Ap(t,e,r,i){let n=(0,de._)`${e}${(0,de.getProperty)(r)} !== undefined`;return i?(0,de._)`${n} && ${Jo(t,e,r)}`:n}se.propertyInData=Ap;function Xo(t,e,r,i){let n=(0,de._)`${e}${(0,de.getProperty)(r)} === undefined`;return i?(0,de.or)(n,(0,de.not)(Jo(t,e,r))):n}se.noPropertyInData=Xo;function jc(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}se.allSchemaProperties=jc;function jp(t,e){return jc(e).filter(r=>!(0,Go.alwaysValidSchema)(t,e[r]))}se.schemaProperties=jp;function qp({schemaCode:t,data:e,it:{gen:r,topSchemaRef:i,schemaPath:n,errorPath:o},it:a},s,c,p){let d=p?(0,de._)`${t}, ${e}, ${i}${n}`:e,m=[[Yt.default.instancePath,(0,de.strConcat)(Yt.default.instancePath,o)],[Yt.default.parentData,a.parentData],[Yt.default.parentDataProperty,a.parentDataProperty],[Yt.default.rootData,Yt.default.rootData]];a.opts.dynamicRef&&m.push([Yt.default.dynamicAnchors,Yt.default.dynamicAnchors]);let b=(0,de._)`${d}, ${r.object(...m)}`;return c!==de.nil?(0,de._)`${s}.call(${c}, ${b})`:(0,de._)`${s}(${b})`}se.callValidateCode=qp;var Wp=(0,de._)`new RegExp`;function Lp({gen:t,it:{opts:e}},r){let i=e.unicodeRegExp?"u":"",{regExp:n}=e.code,o=n(r,i);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,de._)`${n.code==="new RegExp"?Wp:(0,Vp.useFunc)(t,n)}(${r}, ${i})`})}se.usePattern=Lp;function Up(t){let{gen:e,data:r,keyword:i,it:n}=t,o=e.name("valid");if(n.allErrors){let s=e.let("valid",!0);return a(()=>e.assign(s,!1)),s}return e.var(o,!0),a(()=>e.break()),o;function a(s){let c=e.const("len",(0,de._)`${r}.length`);e.forRange("i",0,c,p=>{t.subschema({keyword:i,dataProp:p,dataPropType:Go.Type.Num},o),e.if((0,de.not)(o),s)})}}se.validateArray=Up;function Hp(t){let{gen:e,schema:r,keyword:i,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,Go.alwaysValidSchema)(n,c))&&!n.opts.unevaluated)return;let a=e.let("valid",!1),s=e.name("_valid");e.block(()=>r.forEach((c,p)=>{let d=t.subschema({keyword:i,schemaProp:p,compositeRule:!0},s);e.assign(a,(0,de._)`${a} || ${s}`),t.mergeValidEvaluated(d,s)||e.if((0,de.not)(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}se.validateUnion=Hp});var Lc=x(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.validateKeywordUsage=xt.validSchemaType=xt.funcKeywordCode=xt.macroKeywordCode=void 0;var Fe=W(),_r=Wt(),Bp=nt(),Kp=Si();function Gp(t,e){let{gen:r,keyword:i,schema:n,parentSchema:o,it:a}=t,s=e.macro.call(a.self,n,o,a),c=Wc(r,i,s);a.opts.validateSchema!==!1&&a.self.validateSchema(s,!0);let p=r.name("valid");t.subschema({schema:s,schemaPath:Fe.nil,errSchemaPath:`${a.errSchemaPath}/${i}`,topSchemaRef:c,compositeRule:!0},p),t.pass(p,()=>t.error(!0))}xt.macroKeywordCode=Gp;function Jp(t,e){var r;let{gen:i,keyword:n,schema:o,parentSchema:a,$data:s,it:c}=t;Qp(c,e);let p=!s&&e.compile?e.compile.call(c.self,o,a,c):e.validate,d=Wc(i,n,p),m=i.let("valid");t.block$data(m,b),t.ok((r=e.valid)!==null&&r!==void 0?r:m);function b(){if(e.errors===!1)y(),e.modifying&&qc(t),S(()=>t.error());else{let g=e.async?C():w();e.modifying&&qc(t),S(()=>Xp(t,g))}}function C(){let g=i.let("ruleErrs",null);return i.try(()=>y((0,Fe._)`await `),D=>i.assign(m,!1).if((0,Fe._)`${D} instanceof ${c.ValidationError}`,()=>i.assign(g,(0,Fe._)`${D}.errors`),()=>i.throw(D))),g}function w(){let g=(0,Fe._)`${d}.errors`;return i.assign(g,null),y(Fe.nil),g}function y(g=e.async?(0,Fe._)`await `:Fe.nil){let D=c.opts.passContext?_r.default.this:_r.default.self,A=!("compile"in e&&!s||e.schema===!1);i.assign(m,(0,Fe._)`${g}${(0,Bp.callValidateCode)(t,d,D,A)}`,e.modifying)}function S(g){var D;i.if((0,Fe.not)((D=e.valid)!==null&&D!==void 0?D:m),g)}}xt.funcKeywordCode=Jp;function qc(t){let{gen:e,data:r,it:i}=t;e.if(i.parentData,()=>e.assign(r,(0,Fe._)`${i.parentData}[${i.parentDataProperty}]`))}function Xp(t,e){let{gen:r}=t;r.if((0,Fe._)`Array.isArray(${e})`,()=>{r.assign(_r.default.vErrors,(0,Fe._)`${_r.default.vErrors} === null ? ${e} : ${_r.default.vErrors}.concat(${e})`).assign(_r.default.errors,(0,Fe._)`${_r.default.vErrors}.length`),(0,Kp.extendErrors)(t)},()=>t.error())}function Qp({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Wc(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Fe.stringify)(r)})}function Zp(t,e,r=!1){return!e.length||e.some(i=>i==="array"?Array.isArray(t):i==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==i||r&&typeof t>"u")}xt.validSchemaType=Zp;function Yp({schema:t,opts:e,self:r,errSchemaPath:i},n,o){if(Array.isArray(n.keyword)?!n.keyword.includes(o):n.keyword!==o)throw new Error("ajv implementation error");let a=n.dependencies;if(a?.some(s=>!Object.prototype.hasOwnProperty.call(t,s)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(n.validateSchema&&!n.validateSchema(t[o])){let c=`keyword "${o}" value is invalid at path "${i}": `+r.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}xt.validateKeywordUsage=Yp});var Hc=x(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.extendSubschemaMode=er.extendSubschemaData=er.getSubschema=void 0;var Tt=W(),Uc=X();function em(t,{keyword:e,schemaProp:r,schema:i,schemaPath:n,errSchemaPath:o,topSchemaRef:a}){if(e!==void 0&&i!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let s=t.schema[e];return r===void 0?{schema:s,schemaPath:(0,Tt._)`${t.schemaPath}${(0,Tt.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:s[r],schemaPath:(0,Tt._)`${t.schemaPath}${(0,Tt.getProperty)(e)}${(0,Tt.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Uc.escapeFragment)(r)}`}}if(i!==void 0){if(n===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:n,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}er.getSubschema=em;function tm(t,e,{dataProp:r,dataPropType:i,data:n,dataTypes:o,propertyName:a}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:s}=e;if(r!==void 0){let{errorPath:p,dataPathArr:d,opts:m}=e,b=s.let("data",(0,Tt._)`${e.data}${(0,Tt.getProperty)(r)}`,!0);c(b),t.errorPath=(0,Tt.str)`${p}${(0,Uc.getErrorPath)(r,i,m.jsPropertySyntax)}`,t.parentDataProperty=(0,Tt._)`${r}`,t.dataPathArr=[...d,t.parentDataProperty]}if(n!==void 0){let p=n instanceof Tt.Name?n:s.let("data",n,!0);c(p),a!==void 0&&(t.propertyName=a)}o&&(t.dataTypes=o);function c(p){t.data=p,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,p]}}er.extendSubschemaData=tm;function rm(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:i,createErrors:n,allErrors:o}){i!==void 0&&(t.compositeRule=i),n!==void 0&&(t.createErrors=n),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}er.extendSubschemaMode=rm});var Qo=x((Xv,Bc)=>{"use strict";Bc.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,n,o;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(n=i;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(r).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=i;n--!==0;){var a=o[n];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}});var Gc=x((Qv,Kc)=>{"use strict";var tr=Kc.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var i=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};kn(e,i,n,t,"",t)};tr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};tr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};tr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};tr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function kn(t,e,r,i,n,o,a,s,c,p){if(i&&typeof i=="object"&&!Array.isArray(i)){e(i,n,o,a,s,c,p);for(var d in i){var m=i[d];if(Array.isArray(m)){if(d in tr.arrayKeywords)for(var b=0;b<m.length;b++)kn(t,e,r,m[b],n+"/"+d+"/"+b,o,n,d,i,b)}else if(d in tr.propsKeywords){if(m&&typeof m=="object")for(var C in m)kn(t,e,r,m[C],n+"/"+d+"/"+im(C),o,n,d,i,C)}else(d in tr.keywords||t.allKeys&&!(d in tr.skipKeywords))&&kn(t,e,r,m,n+"/"+d,o,n,d,i)}r(i,n,o,a,s,c,p)}}function im(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var xi=x(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.getSchemaRefs=Ue.resolveUrl=Ue.normalizeId=Ue._getFullPath=Ue.getFullPath=Ue.inlineRef=void 0;var nm=X(),om=Qo(),am=Gc(),sm=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function lm(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Zo(t):e?Jc(t)<=e:!1}Ue.inlineRef=lm;var cm=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Zo(t){for(let e in t){if(cm.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Zo)||typeof r=="object"&&Zo(r))return!0}return!1}function Jc(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!sm.has(r)&&(typeof t[r]=="object"&&(0,nm.eachItem)(t[r],i=>e+=Jc(i)),e===1/0))return 1/0}return e}function Xc(t,e="",r){r!==!1&&(e=Zr(e));let i=t.parse(e);return Qc(t,i)}Ue.getFullPath=Xc;function Qc(t,e){return t.serialize(e).split("#")[0]+"#"}Ue._getFullPath=Qc;var um=/#\/?$/;function Zr(t){return t?t.replace(um,""):""}Ue.normalizeId=Zr;function dm(t,e,r){return r=Zr(r),t.resolve(e,r)}Ue.resolveUrl=dm;var fm=/^[a-z_][-a-z0-9._]*$/i;function pm(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:i}=this.opts,n=Zr(t[r]||e),o={"":n},a=Xc(i,n,!1),s={},c=new Set;return am(t,{allKeys:!0},(m,b,C,w)=>{if(w===void 0)return;let y=a+b,S=o[w];typeof m[r]=="string"&&(S=g.call(this,m[r])),D.call(this,m.$anchor),D.call(this,m.$dynamicAnchor),o[b]=S;function g(A){let re=this.opts.uriResolver.resolve;if(A=Zr(S?re(S,A):A),c.has(A))throw d(A);c.add(A);let M=this.refs[A];return typeof M=="string"&&(M=this.refs[M]),typeof M=="object"?p(m,M.schema,A):A!==Zr(y)&&(A[0]==="#"?(p(m,s[A],A),s[A]=m):this.refs[A]=y),A}function D(A){if(typeof A=="string"){if(!fm.test(A))throw new Error(`invalid anchor "${A}"`);g.call(this,`#${A}`)}}}),s;function p(m,b,C){if(b!==void 0&&!om(m,b))throw d(C)}function d(m){return new Error(`reference "${m}" resolves to more than one schema`)}}Ue.getSchemaRefs=pm});var Oi=x(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.getData=rr.KeywordCxt=rr.validateFunctionCode=void 0;var ru=Ic(),Zc=Ei(),ea=Uo(),Vn=Ei(),mm=Fc(),Pi=Lc(),Yo=Hc(),N=W(),V=Wt(),hm=xi(),Lt=X(),Ti=Si();function _m(t){if(ou(t)&&(au(t),nu(t))){vm(t);return}iu(t,()=>(0,ru.topBoolOrEmptySchema)(t))}rr.validateFunctionCode=_m;function iu({gen:t,validateName:e,schema:r,schemaEnv:i,opts:n},o){n.code.es5?t.func(e,(0,N._)`${V.default.data}, ${V.default.valCxt}`,i.$async,()=>{t.code((0,N._)`"use strict"; ${Yc(r,n)}`),ym(t,n),t.code(o)}):t.func(e,(0,N._)`${V.default.data}, ${gm(n)}`,i.$async,()=>t.code(Yc(r,n)).code(o))}function gm(t){return(0,N._)`{${V.default.instancePath}="", ${V.default.parentData}, ${V.default.parentDataProperty}, ${V.default.rootData}=${V.default.data}${t.dynamicRef?(0,N._)`, ${V.default.dynamicAnchors}={}`:N.nil}}={}`}function ym(t,e){t.if(V.default.valCxt,()=>{t.var(V.default.instancePath,(0,N._)`${V.default.valCxt}.${V.default.instancePath}`),t.var(V.default.parentData,(0,N._)`${V.default.valCxt}.${V.default.parentData}`),t.var(V.default.parentDataProperty,(0,N._)`${V.default.valCxt}.${V.default.parentDataProperty}`),t.var(V.default.rootData,(0,N._)`${V.default.valCxt}.${V.default.rootData}`),e.dynamicRef&&t.var(V.default.dynamicAnchors,(0,N._)`${V.default.valCxt}.${V.default.dynamicAnchors}`)},()=>{t.var(V.default.instancePath,(0,N._)`""`),t.var(V.default.parentData,(0,N._)`undefined`),t.var(V.default.parentDataProperty,(0,N._)`undefined`),t.var(V.default.rootData,V.default.data),e.dynamicRef&&t.var(V.default.dynamicAnchors,(0,N._)`{}`)})}function vm(t){let{schema:e,opts:r,gen:i}=t;iu(t,()=>{r.$comment&&e.$comment&&lu(t),zm(t),i.let(V.default.vErrors,null),i.let(V.default.errors,0),r.unevaluated&&Cm(t),su(t),xm(t)})}function Cm(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,N._)`${r}.evaluated`),e.if((0,N._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,N._)`${t.evaluated}.props`,(0,N._)`undefined`)),e.if((0,N._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,N._)`${t.evaluated}.items`,(0,N._)`undefined`))}function Yc(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,N._)`/*# sourceURL=${r} */`:N.nil}function wm(t,e){if(ou(t)&&(au(t),nu(t))){bm(t,e);return}(0,ru.boolOrEmptySchema)(t,e)}function nu({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function ou(t){return typeof t.schema!="boolean"}function bm(t,e){let{schema:r,gen:i,opts:n}=t;n.$comment&&r.$comment&&lu(t),Sm(t),Em(t);let o=i.const("_errs",V.default.errors);su(t,o),i.var(e,(0,N._)`${o} === ${V.default.errors}`)}function au(t){(0,Lt.checkUnknownRules)(t),$m(t)}function su(t,e){if(t.opts.jtd)return eu(t,[],!1,e);let r=(0,Zc.getSchemaTypes)(t.schema),i=(0,Zc.coerceAndCheckDataType)(t,r);eu(t,r,!i,e)}function $m(t){let{schema:e,errSchemaPath:r,opts:i,self:n}=t;e.$ref&&i.ignoreKeywordsWithRef&&(0,Lt.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function zm(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Lt.checkStrictMode)(t,"default is ignored in the schema root")}function Sm(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,hm.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Em(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function lu({gen:t,schemaEnv:e,schema:r,errSchemaPath:i,opts:n}){let o=r.$comment;if(n.$comment===!0)t.code((0,N._)`${V.default.self}.logger.log(${o})`);else if(typeof n.$comment=="function"){let a=(0,N.str)`${i}/$comment`,s=t.scopeValue("root",{ref:e.root});t.code((0,N._)`${V.default.self}.opts.$comment(${o}, ${a}, ${s}.schema)`)}}function xm(t){let{gen:e,schemaEnv:r,validateName:i,ValidationError:n,opts:o}=t;r.$async?e.if((0,N._)`${V.default.errors} === 0`,()=>e.return(V.default.data),()=>e.throw((0,N._)`new ${n}(${V.default.vErrors})`)):(e.assign((0,N._)`${i}.errors`,V.default.vErrors),o.unevaluated&&Tm(t),e.return((0,N._)`${V.default.errors} === 0`))}function Tm({gen:t,evaluated:e,props:r,items:i}){r instanceof N.Name&&t.assign((0,N._)`${e}.props`,r),i instanceof N.Name&&t.assign((0,N._)`${e}.items`,i)}function eu(t,e,r,i){let{gen:n,schema:o,data:a,allErrors:s,opts:c,self:p}=t,{RULES:d}=p;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,Lt.schemaHasRulesButRef)(o,d))){n.block(()=>uu(t,"$ref",d.all.$ref.definition));return}c.jtd||Pm(t,e),n.block(()=>{for(let b of d.rules)m(b);m(d.post)});function m(b){(0,ea.shouldUseGroup)(o,b)&&(b.type?(n.if((0,Vn.checkDataType)(b.type,a,c.strictNumbers)),tu(t,b),e.length===1&&e[0]===b.type&&r&&(n.else(),(0,Vn.reportTypeError)(t)),n.endIf()):tu(t,b),s||n.if((0,N._)`${V.default.errors} === ${i||0}`))}}function tu(t,e){let{gen:r,schema:i,opts:{useDefaults:n}}=t;n&&(0,mm.assignDefaults)(t,e.type),r.block(()=>{for(let o of e.rules)(0,ea.shouldUseRule)(i,o)&&uu(t,o.keyword,o.definition,e.type)})}function Pm(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Om(t,e),t.opts.allowUnionTypes||Im(t,e),Dm(t,t.dataTypes))}function Om(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{cu(t.dataTypes,r)||ta(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),km(t,e)}}function Im(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&ta(t,"use allowUnionTypes to allow union type keyword")}function Dm(t,e){let r=t.self.RULES.all;for(let i in r){let n=r[i];if(typeof n=="object"&&(0,ea.shouldUseRule)(t.schema,n)){let{type:o}=n.definition;o.length&&!o.some(a=>Nm(e,a))&&ta(t,`missing type "${o.join(",")}" for keyword "${i}"`)}}}function Nm(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function cu(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function km(t,e){let r=[];for(let i of t.dataTypes)cu(e,i)?r.push(i):e.includes("integer")&&i==="number"&&r.push("integer");t.dataTypes=r}function ta(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Lt.checkStrictMode)(t,e,t.opts.strictTypes)}var Mn=class{constructor(e,r,i){if((0,Pi.validateKeywordUsage)(e,r,i),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=i,this.data=e.data,this.schema=e.schema[i],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Lt.schemaRefOrVal)(e,this.schema,i,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",du(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Pi.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${i} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",V.default.errors))}result(e,r,i){this.failResult((0,N.not)(e),r,i)}failResult(e,r,i){this.gen.if(e),i?i():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,N.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,N._)`${r} !== undefined && (${(0,N.or)(this.invalid$data(),e)})`)}error(e,r,i){if(r){this.setParams(r),this._error(e,i),this.setParams({});return}this._error(e,i)}_error(e,r){(e?Ti.reportExtraError:Ti.reportError)(this,this.def.error,r)}$dataError(){(0,Ti.reportError)(this,this.def.$dataError||Ti.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ti.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,i=N.nil){this.gen.block(()=>{this.check$data(e,i),r()})}check$data(e=N.nil,r=N.nil){if(!this.$data)return;let{gen:i,schemaCode:n,schemaType:o,def:a}=this;i.if((0,N.or)((0,N._)`${n} === undefined`,r)),e!==N.nil&&i.assign(e,!0),(o.length||a.validateSchema)&&(i.elseIf(this.invalid$data()),this.$dataError(),e!==N.nil&&i.assign(e,!1)),i.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:i,def:n,it:o}=this;return(0,N.or)(a(),s());function a(){if(i.length){if(!(r instanceof N.Name))throw new Error("ajv implementation error");let c=Array.isArray(i)?i:[i];return(0,N._)`${(0,Vn.checkDataTypes)(c,r,o.opts.strictNumbers,Vn.DataType.Wrong)}`}return N.nil}function s(){if(n.validateSchema){let c=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,N._)`!${c}(${r})`}return N.nil}}subschema(e,r){let i=(0,Yo.getSubschema)(this.it,e);(0,Yo.extendSubschemaData)(i,this.it,e),(0,Yo.extendSubschemaMode)(i,e);let n=ge(O(O({},this.it),i),{items:void 0,props:void 0});return wm(n,r),n}mergeEvaluated(e,r){let{it:i,gen:n}=this;i.opts.unevaluated&&(i.props!==!0&&e.props!==void 0&&(i.props=Lt.mergeEvaluated.props(n,e.props,i.props,r)),i.items!==!0&&e.items!==void 0&&(i.items=Lt.mergeEvaluated.items(n,e.items,i.items,r)))}mergeValidEvaluated(e,r){let{it:i,gen:n}=this;if(i.opts.unevaluated&&(i.props!==!0||i.items!==!0))return n.if(r,()=>this.mergeEvaluated(e,N.Name)),!0}};rr.KeywordCxt=Mn;function uu(t,e,r,i){let n=new Mn(t,r,e);"code"in r?r.code(n,i):n.$data&&r.validate?(0,Pi.funcKeywordCode)(n,r):"macro"in r?(0,Pi.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,Pi.funcKeywordCode)(n,r)}var Vm=/^\/(?:[^~]|~0|~1)*$/,Mm=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function du(t,{dataLevel:e,dataNames:r,dataPathArr:i}){let n,o;if(t==="")return V.default.rootData;if(t[0]==="/"){if(!Vm.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);n=t,o=V.default.rootData}else{let p=Mm.exec(t);if(!p)throw new Error(`Invalid JSON-pointer: ${t}`);let d=+p[1];if(n=p[2],n==="#"){if(d>=e)throw new Error(c("property/index",d));return i[e-d]}if(d>e)throw new Error(c("data",d));if(o=r[e-d],!n)return o}let a=o,s=n.split("/");for(let p of s)p&&(o=(0,N._)`${o}${(0,N.getProperty)((0,Lt.unescapeJsonPointer)(p))}`,a=(0,N._)`${a} && ${o}`);return a;function c(p,d){return`Cannot access ${p} ${d} levels up, current level is ${e}`}}rr.getData=du});var Rn=x(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});var ra=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};ia.default=ra});var Ii=x(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var na=xi(),oa=class extends Error{constructor(e,r,i,n){super(n||`can't resolve reference ${i} from id ${r}`),this.missingRef=(0,na.resolveUrl)(e,r,i),this.missingSchema=(0,na.normalizeId)((0,na.getFullPath)(e,this.missingRef))}};aa.default=oa});var An=x(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.resolveSchema=ot.getCompilingSchema=ot.resolveRef=ot.compileSchema=ot.SchemaEnv=void 0;var ct=W(),Rm=Rn(),gr=Wt(),ut=xi(),fu=X(),Fm=Oi(),Yr=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let i;typeof e.schema=="object"&&(i=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,ut.normalizeId)(i?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=i?.$async,this.refs={}}};ot.SchemaEnv=Yr;function la(t){let e=pu.call(this,t);if(e)return e;let r=(0,ut.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:i,lines:n}=this.opts.code,{ownProperties:o}=this.opts,a=new ct.CodeGen(this.scope,{es5:i,lines:n,ownProperties:o}),s;t.$async&&(s=a.scopeValue("Error",{ref:Rm.default,code:(0,ct._)`require("ajv/dist/runtime/validation_error").default`}));let c=a.scopeName("validate");t.validateName=c;let p={gen:a,allErrors:this.opts.allErrors,data:gr.default.data,parentData:gr.default.parentData,parentDataProperty:gr.default.parentDataProperty,dataNames:[gr.default.data],dataPathArr:[ct.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ct.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:s,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ct.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ct._)`""`,opts:this.opts,self:this},d;try{this._compilations.add(t),(0,Fm.validateFunctionCode)(p),a.optimize(this.opts.code.optimize);let m=a.toString();d=`${a.scopeRefs(gr.default.scope)}return ${m}`,this.opts.code.process&&(d=this.opts.code.process(d,t));let C=new Function(`${gr.default.self}`,`${gr.default.scope}`,d)(this,this.scope.get());if(this.scope.value(c,{ref:C}),C.errors=null,C.schema=t.schema,C.schemaEnv=t,t.$async&&(C.$async=!0),this.opts.code.source===!0&&(C.source={validateName:c,validateCode:m,scopeValues:a._values}),this.opts.unevaluated){let{props:w,items:y}=p;C.evaluated={props:w instanceof ct.Name?void 0:w,items:y instanceof ct.Name?void 0:y,dynamicProps:w instanceof ct.Name,dynamicItems:y instanceof ct.Name},C.source&&(C.source.evaluated=(0,ct.stringify)(C.evaluated))}return t.validate=C,t}catch(m){throw delete t.validate,delete t.validateName,d&&this.logger.error("Error compiling schema, function code:",d),m}finally{this._compilations.delete(t)}}ot.compileSchema=la;function Am(t,e,r){var i;r=(0,ut.resolveUrl)(this.opts.uriResolver,e,r);let n=t.refs[r];if(n)return n;let o=Wm.call(this,t,r);if(o===void 0){let a=(i=t.localRefs)===null||i===void 0?void 0:i[r],{schemaId:s}=this.opts;a&&(o=new Yr({schema:a,schemaId:s,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=jm.call(this,o)}ot.resolveRef=Am;function jm(t){return(0,ut.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:la.call(this,t)}function pu(t){for(let e of this._compilations)if(qm(e,t))return e}ot.getCompilingSchema=pu;function qm(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Wm(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Fn.call(this,t,e)}function Fn(t,e){let r=this.opts.uriResolver.parse(e),i=(0,ut._getFullPath)(this.opts.uriResolver,r),n=(0,ut.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&i===n)return sa.call(this,r,t);let o=(0,ut.normalizeId)(i),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){let s=Fn.call(this,t,a);return typeof s?.schema!="object"?void 0:sa.call(this,r,s)}if(typeof a?.schema=="object"){if(a.validate||la.call(this,a),o===(0,ut.normalizeId)(e)){let{schema:s}=a,{schemaId:c}=this.opts,p=s[c];return p&&(n=(0,ut.resolveUrl)(this.opts.uriResolver,n,p)),new Yr({schema:s,schemaId:c,root:t,baseId:n})}return sa.call(this,r,a)}}ot.resolveSchema=Fn;var Lm=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function sa(t,{baseId:e,schema:r,root:i}){var n;if(((n=t.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let s of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,fu.unescapeFragment)(s)];if(c===void 0)return;r=c;let p=typeof r=="object"&&r[this.opts.schemaId];!Lm.has(s)&&p&&(e=(0,ut.resolveUrl)(this.opts.uriResolver,e,p))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,fu.schemaHasRulesButRef)(r,this.RULES)){let s=(0,ut.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=Fn.call(this,i,s)}let{schemaId:a}=this.opts;if(o=o||new Yr({schema:r,schemaId:a,root:i,baseId:e}),o.schema!==o.root.schema)return o}});var mu=x((nC,Um)=>{Um.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var _u=x((jn,hu)=>{"use strict";(function(t,e){typeof jn=="object"&&typeof hu<"u"?e(jn):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(jn,function(t){"use strict";function e(){for(var u=arguments.length,l=Array(u),f=0;f<u;f++)l[f]=arguments[f];if(l.length>1){l[0]=l[0].slice(0,-1);for(var h=l.length-1,_=1;_<h;++_)l[_]=l[_].slice(1,-1);return l[h]=l[h].slice(1),l.join("")}else return l[0]}function r(u){return"(?:"+u+")"}function i(u){return u===void 0?"undefined":u===null?"null":Object.prototype.toString.call(u).split(" ").pop().split("]").shift().toLowerCase()}function n(u){return u.toUpperCase()}function o(u){return u!=null?u instanceof Array?u:typeof u.length!="number"||u.split||u.setInterval||u.call?[u]:Array.prototype.slice.call(u):[]}function a(u,l){var f=u;if(l)for(var h in l)f[h]=l[h];return f}function s(u){var l="[A-Za-z]",f="[\\x0D]",h="[0-9]",_="[\\x22]",E=e(h,"[A-Fa-f]"),j="[\\x0A]",G="[\\x20]",ee=r(r("%[EFef]"+E+"%"+E+E+"%"+E+E)+"|"+r("%[89A-Fa-f]"+E+"%"+E+E)+"|"+r("%"+E+E)),Ce="[\\:\\/\\?\\#\\[\\]\\@]",B="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",he=e(Ce,B),we=u?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",pe=u?"[\\uE000-\\uF8FF]":"[]",Q=e(l,h,"[\\-\\.\\_\\~]",we),_e=r(l+e(l,h,"[\\+\\-\\.]")+"*"),ne=r(r(ee+"|"+e(Q,B,"[\\:]"))+"*"),lr=r(r("25[0-5]")+"|"+r("2[0-4]"+h)+"|"+r("1"+h+h)+"|"+r("[1-9]"+h)+"|"+h),Be=r(r("25[0-5]")+"|"+r("2[0-4]"+h)+"|"+r("1"+h+h)+"|"+r("0?[1-9]"+h)+"|0?0?"+h),Xe=r(Be+"\\."+Be+"\\."+Be+"\\."+Be),le=r(E+"{1,4}"),Ke=r(r(le+"\\:"+le)+"|"+Xe),Qe=r(r(le+"\\:")+"{6}"+Ke),gt=r("\\:\\:"+r(le+"\\:")+"{5}"+Ke),cr=r(r(le)+"?\\:\\:"+r(le+"\\:")+"{4}"+Ke),Mt=r(r(r(le+"\\:")+"{0,1}"+le)+"?\\:\\:"+r(le+"\\:")+"{3}"+Ke),pi=r(r(r(le+"\\:")+"{0,2}"+le)+"?\\:\\:"+r(le+"\\:")+"{2}"+Ke),Xi=r(r(r(le+"\\:")+"{0,3}"+le)+"?\\:\\:"+le+"\\:"+Ke),Qi=r(r(r(le+"\\:")+"{0,4}"+le)+"?\\:\\:"+Ke),Er=r(r(r(le+"\\:")+"{0,5}"+le)+"?\\:\\:"+le),xr=r(r(r(le+"\\:")+"{0,6}"+le)+"?\\:\\:"),Rt=r([Qe,gt,cr,Mt,pi,Xi,Qi,Er,xr].join("|")),Tr=r(r(Q+"|"+ee)+"+"),mo=r(Rt+"\\%25"+Tr),ur=r(Rt+r("\\%25|\\%(?!"+E+"{2})")+Tr),bf=r("[vV]"+E+"+\\."+e(Q,B,"[\\:]")+"+"),$f=r("\\["+r(ur+"|"+Rt+"|"+bf)+"\\]"),js=r(r(ee+"|"+e(Q,B))+"*"),mi=r($f+"|"+Xe+"(?!"+js+")|"+js),hi=r(h+"*"),qs=r(r(ne+"@")+"?"+mi+r("\\:"+hi)+"?"),_i=r(ee+"|"+e(Q,B,"[\\:\\@]")),zf=r(_i+"*"),Ws=r(_i+"+"),Sf=r(r(ee+"|"+e(Q,B,"[\\@]"))+"+"),Ft=r(r("\\/"+zf)+"*"),Pr=r("\\/"+r(Ws+Ft)+"?"),ho=r(Sf+Ft),Zi=r(Ws+Ft),Or="(?!"+_i+")",Vy=r(Ft+"|"+Pr+"|"+ho+"|"+Zi+"|"+Or),Ir=r(r(_i+"|"+e("[\\/\\?]",pe))+"*"),gi=r(r(_i+"|[\\/\\?]")+"*"),Ls=r(r("\\/\\/"+qs+Ft)+"|"+Pr+"|"+Zi+"|"+Or),Ef=r(_e+"\\:"+Ls+r("\\?"+Ir)+"?"+r("\\#"+gi)+"?"),xf=r(r("\\/\\/"+qs+Ft)+"|"+Pr+"|"+ho+"|"+Or),Tf=r(xf+r("\\?"+Ir)+"?"+r("\\#"+gi)+"?"),My=r(Ef+"|"+Tf),Ry=r(_e+"\\:"+Ls+r("\\?"+Ir)+"?"),Fy="^("+_e+")\\:"+r(r("\\/\\/("+r("("+ne+")@")+"?("+mi+")"+r("\\:("+hi+")")+"?)")+"?("+Ft+"|"+Pr+"|"+Zi+"|"+Or+")")+r("\\?("+Ir+")")+"?"+r("\\#("+gi+")")+"?$",Ay="^(){0}"+r(r("\\/\\/("+r("("+ne+")@")+"?("+mi+")"+r("\\:("+hi+")")+"?)")+"?("+Ft+"|"+Pr+"|"+ho+"|"+Or+")")+r("\\?("+Ir+")")+"?"+r("\\#("+gi+")")+"?$",jy="^("+_e+")\\:"+r(r("\\/\\/("+r("("+ne+")@")+"?("+mi+")"+r("\\:("+hi+")")+"?)")+"?("+Ft+"|"+Pr+"|"+Zi+"|"+Or+")")+r("\\?("+Ir+")")+"?$",qy="^"+r("\\#("+gi+")")+"?$",Wy="^"+r("("+ne+")@")+"?("+mi+")"+r("\\:("+hi+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",l,h,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Q,B),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Q,B),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Q,B),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Q,B),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Q,B,"[\\:\\@\\/\\?]",pe),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Q,B,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Q,B),"g"),UNRESERVED:new RegExp(Q,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Q,he),"g"),PCT_ENCODED:new RegExp(ee,"g"),IPV4ADDRESS:new RegExp("^("+Xe+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Rt+")"+r(r("\\%25|\\%(?!"+E+"{2})")+"("+Tr+")")+"?\\]?$")}}var c=s(!1),p=s(!0),d=function(){function u(l,f){var h=[],_=!0,E=!1,j=void 0;try{for(var G=l[Symbol.iterator](),ee;!(_=(ee=G.next()).done)&&(h.push(ee.value),!(f&&h.length===f));_=!0);}catch(Ce){E=!0,j=Ce}finally{try{!_&&G.return&&G.return()}finally{if(E)throw j}}return h}return function(l,f){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return u(l,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(u){if(Array.isArray(u)){for(var l=0,f=Array(u.length);l<u.length;l++)f[l]=u[l];return f}else return Array.from(u)},b=2147483647,C=36,w=1,y=26,S=38,g=700,D=72,A=128,re="-",M=/^xn--/,Ge=/[^\0-\x7E]/,st=/[\x2E\u3002\uFF0E\uFF61]/g,ui={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ar=C-w,Pe=Math.floor,sr=String.fromCharCode;function pt(u){throw new RangeError(ui[u])}function Gi(u,l){for(var f=[],h=u.length;h--;)f[h]=l(u[h]);return f}function Ji(u,l){var f=u.split("@"),h="";f.length>1&&(h=f[0]+"@",u=f[1]),u=u.replace(st,".");var _=u.split("."),E=Gi(_,l).join(".");return h+E}function bs(u){for(var l=[],f=0,h=u.length;f<h;){var _=u.charCodeAt(f++);if(_>=55296&&_<=56319&&f<h){var E=u.charCodeAt(f++);(E&64512)==56320?l.push(((_&1023)<<10)+(E&1023)+65536):(l.push(_),f--)}else l.push(_)}return l}var Qd=function(l){return String.fromCodePoint.apply(String,m(l))},Zd=function(l){return l-48<10?l-22:l-65<26?l-65:l-97<26?l-97:C},$s=function(l,f){return l+22+75*(l<26)-((f!=0)<<5)},zs=function(l,f,h){var _=0;for(l=h?Pe(l/g):l>>1,l+=Pe(l/f);l>ar*y>>1;_+=C)l=Pe(l/ar);return Pe(_+(ar+1)*l/(l+S))},Ss=function(l){var f=[],h=l.length,_=0,E=A,j=D,G=l.lastIndexOf(re);G<0&&(G=0);for(var ee=0;ee<G;++ee)l.charCodeAt(ee)>=128&&pt("not-basic"),f.push(l.charCodeAt(ee));for(var Ce=G>0?G+1:0;Ce<h;){for(var B=_,he=1,we=C;;we+=C){Ce>=h&&pt("invalid-input");var pe=Zd(l.charCodeAt(Ce++));(pe>=C||pe>Pe((b-_)/he))&&pt("overflow"),_+=pe*he;var Q=we<=j?w:we>=j+y?y:we-j;if(pe<Q)break;var _e=C-Q;he>Pe(b/_e)&&pt("overflow"),he*=_e}var ne=f.length+1;j=zs(_-B,ne,B==0),Pe(_/ne)>b-E&&pt("overflow"),E+=Pe(_/ne),_%=ne,f.splice(_++,0,E)}return String.fromCodePoint.apply(String,f)},Es=function(l){var f=[];l=bs(l);var h=l.length,_=A,E=0,j=D,G=!0,ee=!1,Ce=void 0;try{for(var B=l[Symbol.iterator](),he;!(G=(he=B.next()).done);G=!0){var we=he.value;we<128&&f.push(sr(we))}}catch(ur){ee=!0,Ce=ur}finally{try{!G&&B.return&&B.return()}finally{if(ee)throw Ce}}var pe=f.length,Q=pe;for(pe&&f.push(re);Q<h;){var _e=b,ne=!0,lr=!1,Be=void 0;try{for(var Xe=l[Symbol.iterator](),le;!(ne=(le=Xe.next()).done);ne=!0){var Ke=le.value;Ke>=_&&Ke<_e&&(_e=Ke)}}catch(ur){lr=!0,Be=ur}finally{try{!ne&&Xe.return&&Xe.return()}finally{if(lr)throw Be}}var Qe=Q+1;_e-_>Pe((b-E)/Qe)&&pt("overflow"),E+=(_e-_)*Qe,_=_e;var gt=!0,cr=!1,Mt=void 0;try{for(var pi=l[Symbol.iterator](),Xi;!(gt=(Xi=pi.next()).done);gt=!0){var Qi=Xi.value;if(Qi<_&&++E>b&&pt("overflow"),Qi==_){for(var Er=E,xr=C;;xr+=C){var Rt=xr<=j?w:xr>=j+y?y:xr-j;if(Er<Rt)break;var Tr=Er-Rt,mo=C-Rt;f.push(sr($s(Rt+Tr%mo,0))),Er=Pe(Tr/mo)}f.push(sr($s(Er,0))),j=zs(E,Qe,Q==pe),E=0,++Q}}}catch(ur){cr=!0,Mt=ur}finally{try{!gt&&pi.return&&pi.return()}finally{if(cr)throw Mt}}++E,++_}return f.join("")},Yd=function(l){return Ji(l,function(f){return M.test(f)?Ss(f.slice(4).toLowerCase()):f})},ef=function(l){return Ji(l,function(f){return Ge.test(f)?"xn--"+Es(f):f})},br={version:"2.1.0",ucs2:{decode:bs,encode:Qd},decode:Ss,encode:Es,toASCII:ef,toUnicode:Yd},Je={};function mt(u){var l=u.charCodeAt(0),f=void 0;return l<16?f="%0"+l.toString(16).toUpperCase():l<128?f="%"+l.toString(16).toUpperCase():l<2048?f="%"+(l>>6|192).toString(16).toUpperCase()+"%"+(l&63|128).toString(16).toUpperCase():f="%"+(l>>12|224).toString(16).toUpperCase()+"%"+(l>>6&63|128).toString(16).toUpperCase()+"%"+(l&63|128).toString(16).toUpperCase(),f}function $r(u){for(var l="",f=0,h=u.length;f<h;){var _=parseInt(u.substr(f+1,2),16);if(_<128)l+=String.fromCharCode(_),f+=3;else if(_>=194&&_<224){if(h-f>=6){var E=parseInt(u.substr(f+4,2),16);l+=String.fromCharCode((_&31)<<6|E&63)}else l+=u.substr(f,6);f+=6}else if(_>=224){if(h-f>=9){var j=parseInt(u.substr(f+4,2),16),G=parseInt(u.substr(f+7,2),16);l+=String.fromCharCode((_&15)<<12|(j&63)<<6|G&63)}else l+=u.substr(f,9);f+=9}else l+=u.substr(f,3),f+=3}return l}function co(u,l){function f(h){var _=$r(h);return _.match(l.UNRESERVED)?_:h}return u.scheme&&(u.scheme=String(u.scheme).replace(l.PCT_ENCODED,f).toLowerCase().replace(l.NOT_SCHEME,"")),u.userinfo!==void 0&&(u.userinfo=String(u.userinfo).replace(l.PCT_ENCODED,f).replace(l.NOT_USERINFO,mt).replace(l.PCT_ENCODED,n)),u.host!==void 0&&(u.host=String(u.host).replace(l.PCT_ENCODED,f).toLowerCase().replace(l.NOT_HOST,mt).replace(l.PCT_ENCODED,n)),u.path!==void 0&&(u.path=String(u.path).replace(l.PCT_ENCODED,f).replace(u.scheme?l.NOT_PATH:l.NOT_PATH_NOSCHEME,mt).replace(l.PCT_ENCODED,n)),u.query!==void 0&&(u.query=String(u.query).replace(l.PCT_ENCODED,f).replace(l.NOT_QUERY,mt).replace(l.PCT_ENCODED,n)),u.fragment!==void 0&&(u.fragment=String(u.fragment).replace(l.PCT_ENCODED,f).replace(l.NOT_FRAGMENT,mt).replace(l.PCT_ENCODED,n)),u}function uo(u){return u.replace(/^0*(.*)/,"$1")||"0"}function fo(u,l){var f=u.match(l.IPV4ADDRESS)||[],h=d(f,2),_=h[1];return _?_.split(".").map(uo).join("."):u}function xs(u,l){var f=u.match(l.IPV6ADDRESS)||[],h=d(f,3),_=h[1],E=h[2];if(_){for(var j=_.toLowerCase().split("::").reverse(),G=d(j,2),ee=G[0],Ce=G[1],B=Ce?Ce.split(":").map(uo):[],he=ee.split(":").map(uo),we=l.IPV4ADDRESS.test(he[he.length-1]),pe=we?7:8,Q=he.length-pe,_e=Array(pe),ne=0;ne<pe;++ne)_e[ne]=B[ne]||he[Q+ne]||"";we&&(_e[pe-1]=fo(_e[pe-1],l));var lr=_e.reduce(function(Qe,gt,cr){if(!gt||gt==="0"){var Mt=Qe[Qe.length-1];Mt&&Mt.index+Mt.length===cr?Mt.length++:Qe.push({index:cr,length:1})}return Qe},[]),Be=lr.sort(function(Qe,gt){return gt.length-Qe.length})[0],Xe=void 0;if(Be&&Be.length>1){var le=_e.slice(0,Be.index),Ke=_e.slice(Be.index+Be.length);Xe=le.join(":")+"::"+Ke.join(":")}else Xe=_e.join(":");return E&&(Xe+="%"+E),Xe}else return u}var tf=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,rf="".match(/(){0}/)[1]===void 0;function kt(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={},h=l.iri!==!1?p:c;l.reference==="suffix"&&(u=(l.scheme?l.scheme+":":"")+"//"+u);var _=u.match(tf);if(_){rf?(f.scheme=_[1],f.userinfo=_[3],f.host=_[4],f.port=parseInt(_[5],10),f.path=_[6]||"",f.query=_[7],f.fragment=_[8],isNaN(f.port)&&(f.port=_[5])):(f.scheme=_[1]||void 0,f.userinfo=u.indexOf("@")!==-1?_[3]:void 0,f.host=u.indexOf("//")!==-1?_[4]:void 0,f.port=parseInt(_[5],10),f.path=_[6]||"",f.query=u.indexOf("?")!==-1?_[7]:void 0,f.fragment=u.indexOf("#")!==-1?_[8]:void 0,isNaN(f.port)&&(f.port=u.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?_[4]:void 0)),f.host&&(f.host=xs(fo(f.host,h),h)),f.scheme===void 0&&f.userinfo===void 0&&f.host===void 0&&f.port===void 0&&!f.path&&f.query===void 0?f.reference="same-document":f.scheme===void 0?f.reference="relative":f.fragment===void 0?f.reference="absolute":f.reference="uri",l.reference&&l.reference!=="suffix"&&l.reference!==f.reference&&(f.error=f.error||"URI is not a "+l.reference+" reference.");var E=Je[(l.scheme||f.scheme||"").toLowerCase()];if(!l.unicodeSupport&&(!E||!E.unicodeSupport)){if(f.host&&(l.domainHost||E&&E.domainHost))try{f.host=br.toASCII(f.host.replace(h.PCT_ENCODED,$r).toLowerCase())}catch(j){f.error=f.error||"Host's domain name can not be converted to ASCII via punycode: "+j}co(f,c)}else co(f,h);E&&E.parse&&E.parse(f,l)}else f.error=f.error||"URI can not be parsed.";return f}function nf(u,l){var f=l.iri!==!1?p:c,h=[];return u.userinfo!==void 0&&(h.push(u.userinfo),h.push("@")),u.host!==void 0&&h.push(xs(fo(String(u.host),f),f).replace(f.IPV6ADDRESS,function(_,E,j){return"["+E+(j?"%25"+j:"")+"]"})),(typeof u.port=="number"||typeof u.port=="string")&&(h.push(":"),h.push(String(u.port))),h.length?h.join(""):void 0}var Ts=/^\.\.?\//,Ps=/^\/\.(\/|$)/,Os=/^\/\.\.(\/|$)/,of=/^\/?(?:.|\n)*?(?=\/|$)/;function zr(u){for(var l=[];u.length;)if(u.match(Ts))u=u.replace(Ts,"");else if(u.match(Ps))u=u.replace(Ps,"/");else if(u.match(Os))u=u.replace(Os,"/"),l.pop();else if(u==="."||u==="..")u="";else{var f=u.match(of);if(f){var h=f[0];u=u.slice(h.length),l.push(h)}else throw new Error("Unexpected dot segment condition")}return l.join("")}function ht(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=l.iri?p:c,h=[],_=Je[(l.scheme||u.scheme||"").toLowerCase()];if(_&&_.serialize&&_.serialize(u,l),u.host&&!f.IPV6ADDRESS.test(u.host)){if(l.domainHost||_&&_.domainHost)try{u.host=l.iri?br.toUnicode(u.host):br.toASCII(u.host.replace(f.PCT_ENCODED,$r).toLowerCase())}catch(G){u.error=u.error||"Host's domain name can not be converted to "+(l.iri?"Unicode":"ASCII")+" via punycode: "+G}}co(u,f),l.reference!=="suffix"&&u.scheme&&(h.push(u.scheme),h.push(":"));var E=nf(u,l);if(E!==void 0&&(l.reference!=="suffix"&&h.push("//"),h.push(E),u.path&&u.path.charAt(0)!=="/"&&h.push("/")),u.path!==void 0){var j=u.path;!l.absolutePath&&(!_||!_.absolutePath)&&(j=zr(j)),E===void 0&&(j=j.replace(/^\/\//,"/%2F")),h.push(j)}return u.query!==void 0&&(h.push("?"),h.push(u.query)),u.fragment!==void 0&&(h.push("#"),h.push(u.fragment)),h.join("")}function Is(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments[3],_={};return h||(u=kt(ht(u,f),f),l=kt(ht(l,f),f)),f=f||{},!f.tolerant&&l.scheme?(_.scheme=l.scheme,_.userinfo=l.userinfo,_.host=l.host,_.port=l.port,_.path=zr(l.path||""),_.query=l.query):(l.userinfo!==void 0||l.host!==void 0||l.port!==void 0?(_.userinfo=l.userinfo,_.host=l.host,_.port=l.port,_.path=zr(l.path||""),_.query=l.query):(l.path?(l.path.charAt(0)==="/"?_.path=zr(l.path):((u.userinfo!==void 0||u.host!==void 0||u.port!==void 0)&&!u.path?_.path="/"+l.path:u.path?_.path=u.path.slice(0,u.path.lastIndexOf("/")+1)+l.path:_.path=l.path,_.path=zr(_.path)),_.query=l.query):(_.path=u.path,l.query!==void 0?_.query=l.query:_.query=u.query),_.userinfo=u.userinfo,_.host=u.host,_.port=u.port),_.scheme=u.scheme),_.fragment=l.fragment,_}function af(u,l,f){var h=a({scheme:"null"},f);return ht(Is(kt(u,h),kt(l,h),h,!0),h)}function sf(u,l){return typeof u=="string"?u=ht(kt(u,l),l):i(u)==="object"&&(u=kt(ht(u,l),l)),u}function lf(u,l,f){return typeof u=="string"?u=ht(kt(u,f),f):i(u)==="object"&&(u=ht(u,f)),typeof l=="string"?l=ht(kt(l,f),f):i(l)==="object"&&(l=ht(l,f)),u===l}function cf(u,l){return u&&u.toString().replace(!l||!l.iri?c.ESCAPE:p.ESCAPE,mt)}function Vt(u,l){return u&&u.toString().replace(!l||!l.iri?c.PCT_ENCODED:p.PCT_ENCODED,$r)}var di={scheme:"http",domainHost:!0,parse:function(l,f){return l.host||(l.error=l.error||"HTTP URIs must have a host."),l},serialize:function(l,f){var h=String(l.scheme).toLowerCase()==="https";return(l.port===(h?443:80)||l.port==="")&&(l.port=void 0),l.path||(l.path="/"),l}},Ds={scheme:"https",domainHost:di.domainHost,parse:di.parse,serialize:di.serialize};function Ns(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}var fi={scheme:"ws",domainHost:!0,parse:function(l,f){var h=l;return h.secure=Ns(h),h.resourceName=(h.path||"/")+(h.query?"?"+h.query:""),h.path=void 0,h.query=void 0,h},serialize:function(l,f){if((l.port===(Ns(l)?443:80)||l.port==="")&&(l.port=void 0),typeof l.secure=="boolean"&&(l.scheme=l.secure?"wss":"ws",l.secure=void 0),l.resourceName){var h=l.resourceName.split("?"),_=d(h,2),E=_[0],j=_[1];l.path=E&&E!=="/"?E:void 0,l.query=j,l.resourceName=void 0}return l.fragment=void 0,l}},ks={scheme:"wss",domainHost:fi.domainHost,parse:fi.parse,serialize:fi.serialize},uf={},df=!0,Vs="[A-Za-z0-9\\-\\.\\_\\~"+(df?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",_t="[0-9A-Fa-f]",ff=r(r("%[EFef]"+_t+"%"+_t+_t+"%"+_t+_t)+"|"+r("%[89A-Fa-f]"+_t+"%"+_t+_t)+"|"+r("%"+_t+_t)),pf="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",mf="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",hf=e(mf,'[\\"\\\\]'),_f="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",gf=new RegExp(Vs,"g"),Sr=new RegExp(ff,"g"),yf=new RegExp(e("[^]",pf,"[\\.]",'[\\"]',hf),"g"),Ms=new RegExp(e("[^]",Vs,_f),"g"),vf=Ms;function po(u){var l=$r(u);return l.match(gf)?l:u}var Rs={scheme:"mailto",parse:function(l,f){var h=l,_=h.to=h.path?h.path.split(","):[];if(h.path=void 0,h.query){for(var E=!1,j={},G=h.query.split("&"),ee=0,Ce=G.length;ee<Ce;++ee){var B=G[ee].split("=");switch(B[0]){case"to":for(var he=B[1].split(","),we=0,pe=he.length;we<pe;++we)_.push(he[we]);break;case"subject":h.subject=Vt(B[1],f);break;case"body":h.body=Vt(B[1],f);break;default:E=!0,j[Vt(B[0],f)]=Vt(B[1],f);break}}E&&(h.headers=j)}h.query=void 0;for(var Q=0,_e=_.length;Q<_e;++Q){var ne=_[Q].split("@");if(ne[0]=Vt(ne[0]),f.unicodeSupport)ne[1]=Vt(ne[1],f).toLowerCase();else try{ne[1]=br.toASCII(Vt(ne[1],f).toLowerCase())}catch(lr){h.error=h.error||"Email address's domain name can not be converted to ASCII via punycode: "+lr}_[Q]=ne.join("@")}return h},serialize:function(l,f){var h=l,_=o(l.to);if(_){for(var E=0,j=_.length;E<j;++E){var G=String(_[E]),ee=G.lastIndexOf("@"),Ce=G.slice(0,ee).replace(Sr,po).replace(Sr,n).replace(yf,mt),B=G.slice(ee+1);try{B=f.iri?br.toUnicode(B):br.toASCII(Vt(B,f).toLowerCase())}catch(Q){h.error=h.error||"Email address's domain name can not be converted to "+(f.iri?"Unicode":"ASCII")+" via punycode: "+Q}_[E]=Ce+"@"+B}h.path=_.join(",")}var he=l.headers=l.headers||{};l.subject&&(he.subject=l.subject),l.body&&(he.body=l.body);var we=[];for(var pe in he)he[pe]!==uf[pe]&&we.push(pe.replace(Sr,po).replace(Sr,n).replace(Ms,mt)+"="+he[pe].replace(Sr,po).replace(Sr,n).replace(vf,mt));return we.length&&(h.query=we.join("&")),h}},Cf=/^([^\:]+)\:(.*)/,Fs={scheme:"urn",parse:function(l,f){var h=l.path&&l.path.match(Cf),_=l;if(h){var E=f.scheme||_.scheme||"urn",j=h[1].toLowerCase(),G=h[2],ee=E+":"+(f.nid||j),Ce=Je[ee];_.nid=j,_.nss=G,_.path=void 0,Ce&&(_=Ce.parse(_,f))}else _.error=_.error||"URN can not be parsed.";return _},serialize:function(l,f){var h=f.scheme||l.scheme||"urn",_=l.nid,E=h+":"+(f.nid||_),j=Je[E];j&&(l=j.serialize(l,f));var G=l,ee=l.nss;return G.path=(_||f.nid)+":"+ee,G}},wf=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,As={scheme:"urn:uuid",parse:function(l,f){var h=l;return h.uuid=h.nss,h.nss=void 0,!f.tolerant&&(!h.uuid||!h.uuid.match(wf))&&(h.error=h.error||"UUID is not valid."),h},serialize:function(l,f){var h=l;return h.nss=(l.uuid||"").toLowerCase(),h}};Je[di.scheme]=di,Je[Ds.scheme]=Ds,Je[fi.scheme]=fi,Je[ks.scheme]=ks,Je[Rs.scheme]=Rs,Je[Fs.scheme]=Fs,Je[As.scheme]=As,t.SCHEMES=Je,t.pctEncChar=mt,t.pctDecChars=$r,t.parse=kt,t.removeDotSegments=zr,t.serialize=ht,t.resolveComponents=Is,t.resolve=af,t.normalize=sf,t.equal=lf,t.escapeComponent=cf,t.unescapeComponent=Vt,Object.defineProperty(t,"__esModule",{value:!0})})});var yu=x(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});var gu=_u();gu.code='require("ajv/dist/runtime/uri").default';ca.default=gu});var Eu=x(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.CodeGen=xe.Name=xe.nil=xe.stringify=xe.str=xe._=xe.KeywordCxt=void 0;var Hm=Oi();Object.defineProperty(xe,"KeywordCxt",{enumerable:!0,get:function(){return Hm.KeywordCxt}});var ei=W();Object.defineProperty(xe,"_",{enumerable:!0,get:function(){return ei._}});Object.defineProperty(xe,"str",{enumerable:!0,get:function(){return ei.str}});Object.defineProperty(xe,"stringify",{enumerable:!0,get:function(){return ei.stringify}});Object.defineProperty(xe,"nil",{enumerable:!0,get:function(){return ei.nil}});Object.defineProperty(xe,"Name",{enumerable:!0,get:function(){return ei.Name}});Object.defineProperty(xe,"CodeGen",{enumerable:!0,get:function(){return ei.CodeGen}});var Bm=Rn(),$u=Ii(),Km=Lo(),Di=An(),Gm=W(),Ni=xi(),qn=Ei(),da=X(),vu=mu(),Jm=yu(),zu=(t,e)=>new RegExp(t,e);zu.code="new RegExp";var Xm=["removeAdditional","useDefaults","coerceTypes"],Qm=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Zm={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Ym={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Cu=200;function eh(t){var e,r,i,n,o,a,s,c,p,d,m,b,C,w,y,S,g,D,A,re,M,Ge,st,ui,ar;let Pe=t.strict,sr=(e=t.code)===null||e===void 0?void 0:e.optimize,pt=sr===!0||sr===void 0?1:sr||0,Gi=(i=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&i!==void 0?i:zu,Ji=(n=t.uriResolver)!==null&&n!==void 0?n:Jm.default;return{strictSchema:(a=(o=t.strictSchema)!==null&&o!==void 0?o:Pe)!==null&&a!==void 0?a:!0,strictNumbers:(c=(s=t.strictNumbers)!==null&&s!==void 0?s:Pe)!==null&&c!==void 0?c:!0,strictTypes:(d=(p=t.strictTypes)!==null&&p!==void 0?p:Pe)!==null&&d!==void 0?d:"log",strictTuples:(b=(m=t.strictTuples)!==null&&m!==void 0?m:Pe)!==null&&b!==void 0?b:"log",strictRequired:(w=(C=t.strictRequired)!==null&&C!==void 0?C:Pe)!==null&&w!==void 0?w:!1,code:t.code?ge(O({},t.code),{optimize:pt,regExp:Gi}):{optimize:pt,regExp:Gi},loopRequired:(y=t.loopRequired)!==null&&y!==void 0?y:Cu,loopEnum:(S=t.loopEnum)!==null&&S!==void 0?S:Cu,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(D=t.messages)!==null&&D!==void 0?D:!0,inlineRefs:(A=t.inlineRefs)!==null&&A!==void 0?A:!0,schemaId:(re=t.schemaId)!==null&&re!==void 0?re:"$id",addUsedSchema:(M=t.addUsedSchema)!==null&&M!==void 0?M:!0,validateSchema:(Ge=t.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(st=t.validateFormats)!==null&&st!==void 0?st:!0,unicodeRegExp:(ui=t.unicodeRegExp)!==null&&ui!==void 0?ui:!0,int32range:(ar=t.int32range)!==null&&ar!==void 0?ar:!0,uriResolver:Ji}}var ki=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts=O(O({},e),eh(e));let{es5:r,lines:i}=this.opts.code;this.scope=new Gm.ValueScope({scope:{},prefixes:Qm,es5:r,lines:i}),this.logger=ah(e.logger);let n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Km.getRules)(),wu.call(this,Zm,e,"NOT SUPPORTED"),wu.call(this,Ym,e,"DEPRECATED","warn"),this._metaOpts=nh.call(this),e.formats&&rh.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&ih.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),th.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:i}=this.opts,n=vu;i==="id"&&(n=O({},vu),n.id=n.$id,delete n.$id),r&&e&&this.addMetaSchema(n,n[i],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let i;if(typeof e=="string"){if(i=this.getSchema(e),!i)throw new Error(`no schema with key or ref "${e}"`)}else i=this.compile(e);let n=i(r);return"$async"in i||(this.errors=i.errors),n}compile(e,r){let i=this._addSchema(e,r);return i.validate||this._compileSchemaEnv(i)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:i}=this.opts;return n.call(this,e,r);function n(d,m){return Dr(this,null,function*(){yield o.call(this,d.$schema);let b=this._addSchema(d,m);return b.validate||a.call(this,b)})}function o(d){return Dr(this,null,function*(){d&&!this.getSchema(d)&&(yield n.call(this,{$ref:d},!0))})}function a(d){return Dr(this,null,function*(){try{return this._compileSchemaEnv(d)}catch(m){if(!(m instanceof $u.default))throw m;return s.call(this,m),yield c.call(this,m.missingSchema),a.call(this,d)}})}function s({missingSchema:d,missingRef:m}){if(this.refs[d])throw new Error(`AnySchema ${d} is loaded but ${m} cannot be resolved`)}function c(d){return Dr(this,null,function*(){let m=yield p.call(this,d);this.refs[d]||(yield o.call(this,m.$schema)),this.refs[d]||this.addSchema(m,d,r)})}function p(d){return Dr(this,null,function*(){let m=this._loading[d];if(m)return m;try{return yield this._loading[d]=i(d)}finally{delete this._loading[d]}})}}addSchema(e,r,i,n=this.opts.validateSchema){if(Array.isArray(e)){for(let a of e)this.addSchema(a,void 0,i,n);return this}let o;if(typeof e=="object"){let{schemaId:a}=this.opts;if(o=e[a],o!==void 0&&typeof o!="string")throw new Error(`schema ${a} must be string`)}return r=(0,Ni.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(e,i,r,n,!0),this}addMetaSchema(e,r,i=this.opts.validateSchema){return this.addSchema(e,r,!0,i),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let i;if(i=e.$schema,i!==void 0&&typeof i!="string")throw new Error("$schema must be a string");if(i=i||this.opts.defaultMeta||this.defaultMeta(),!i)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(i,e);if(!n&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return n}getSchema(e){let r;for(;typeof(r=bu.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:i}=this.opts,n=new Di.SchemaEnv({schema:{},schemaId:i});if(r=Di.resolveSchema.call(this,n,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=bu.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let i=e[this.opts.schemaId];return i&&(i=(0,Ni.normalizeId)(i),delete this.schemas[i],delete this.refs[i]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let i;if(typeof e=="string")i=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=i);else if(typeof e=="object"&&r===void 0){if(r=e,i=r.keyword,Array.isArray(i)&&!i.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(lh.call(this,i,r),!r)return(0,da.eachItem)(i,o=>ua.call(this,o)),this;uh.call(this,r);let n=ge(O({},r),{type:(0,qn.getJSONTypes)(r.type),schemaType:(0,qn.getJSONTypes)(r.schemaType)});return(0,da.eachItem)(i,n.type.length===0?o=>ua.call(this,o,n):o=>n.type.forEach(a=>ua.call(this,o,n,a))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let i of r.rules){let n=i.rules.findIndex(o=>o.keyword===e);n>=0&&i.rules.splice(n,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:i="data"}={}){return!e||e.length===0?"No errors":e.map(n=>`${i}${n.instancePath} ${n.message}`).reduce((n,o)=>n+r+o)}$dataMetaSchema(e,r){let i=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let n of r){let o=n.split("/").slice(1),a=e;for(let s of o)a=a[s];for(let s in i){let c=i[s];if(typeof c!="object")continue;let{$data:p}=c.definition,d=a[s];p&&d&&(a[s]=Su(d))}}return e}_removeAllSchemas(e,r){for(let i in e){let n=e[i];(!r||r.test(i))&&(typeof n=="string"?delete e[i]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[i]))}}_addSchema(e,r,i,n=this.opts.validateSchema,o=this.opts.addUsedSchema){let a,{schemaId:s}=this.opts;if(typeof e=="object")a=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;i=(0,Ni.normalizeId)(a||i);let p=Ni.getSchemaRefs.call(this,e,i);return c=new Di.SchemaEnv({schema:e,schemaId:s,meta:r,baseId:i,localRefs:p}),this._cache.set(c.schema,c),o&&!i.startsWith("#")&&(i&&this._checkUnique(i),this.refs[i]=c),n&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Di.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Di.compileSchema.call(this,e)}finally{this.opts=r}}};ki.ValidationError=Bm.default;ki.MissingRefError=$u.default;xe.default=ki;function wu(t,e,r,i="error"){for(let n in t){let o=n;o in e&&this.logger[i](`${r}: option ${n}. ${t[o]}`)}}function bu(t){return t=(0,Ni.normalizeId)(t),this.schemas[t]||this.refs[t]}function th(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function rh(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function ih(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function nh(){let t=O({},this.opts);for(let e of Xm)delete t[e];return t}var oh={log(){},warn(){},error(){}};function ah(t){if(t===!1)return oh;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var sh=/^[a-z_$][a-z0-9_$:-]*$/i;function lh(t,e){let{RULES:r}=this;if((0,da.eachItem)(t,i=>{if(r.keywords[i])throw new Error(`Keyword ${i} is already defined`);if(!sh.test(i))throw new Error(`Keyword ${i} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function ua(t,e,r){var i;let n=e?.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,a=n?o.post:o.rules.find(({type:c})=>c===r);if(a||(a={type:r,rules:[]},o.rules.push(a)),o.keywords[t]=!0,!e)return;let s={keyword:t,definition:ge(O({},e),{type:(0,qn.getJSONTypes)(e.type),schemaType:(0,qn.getJSONTypes)(e.schemaType)})};e.before?ch.call(this,a,s,e.before):a.rules.push(s),o.all[t]=s,(i=e.implements)===null||i===void 0||i.forEach(c=>this.addKeyword(c))}function ch(t,e,r){let i=t.rules.findIndex(n=>n.keyword===r);i>=0?t.rules.splice(i,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function uh(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Su(e)),t.validateSchema=this.compile(e,!0))}var dh={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Su(t){return{anyOf:[t,dh]}}});var xu=x(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});var fh={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};fa.default=fh});var Iu=x(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.callRef=yr.getValidate=void 0;var ph=Ii(),Tu=nt(),He=W(),ti=Wt(),Pu=An(),Wn=X(),mh={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:i}=t,{baseId:n,schemaEnv:o,validateName:a,opts:s,self:c}=i,{root:p}=o;if((r==="#"||r==="#/")&&n===p.baseId)return m();let d=Pu.resolveRef.call(c,p,n,r);if(d===void 0)throw new ph.default(i.opts.uriResolver,n,r);if(d instanceof Pu.SchemaEnv)return b(d);return C(d);function m(){if(o===p)return Ln(t,a,o,o.$async);let w=e.scopeValue("root",{ref:p});return Ln(t,(0,He._)`${w}.validate`,p,p.$async)}function b(w){let y=Ou(t,w);Ln(t,y,w,w.$async)}function C(w){let y=e.scopeValue("schema",s.code.source===!0?{ref:w,code:(0,He.stringify)(w)}:{ref:w}),S=e.name("valid"),g=t.subschema({schema:w,dataTypes:[],schemaPath:He.nil,topSchemaRef:y,errSchemaPath:r},S);t.mergeEvaluated(g),t.ok(S)}}};function Ou(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,He._)`${r.scopeValue("wrapper",{ref:e})}.validate`}yr.getValidate=Ou;function Ln(t,e,r,i){let{gen:n,it:o}=t,{allErrors:a,schemaEnv:s,opts:c}=o,p=c.passContext?ti.default.this:He.nil;i?d():m();function d(){if(!s.$async)throw new Error("async schema referenced by sync schema");let w=n.let("valid");n.try(()=>{n.code((0,He._)`await ${(0,Tu.callValidateCode)(t,e,p)}`),C(e),a||n.assign(w,!0)},y=>{n.if((0,He._)`!(${y} instanceof ${o.ValidationError})`,()=>n.throw(y)),b(y),a||n.assign(w,!1)}),t.ok(w)}function m(){t.result((0,Tu.callValidateCode)(t,e,p),()=>C(e),()=>b(e))}function b(w){let y=(0,He._)`${w}.errors`;n.assign(ti.default.vErrors,(0,He._)`${ti.default.vErrors} === null ? ${y} : ${ti.default.vErrors}.concat(${y})`),n.assign(ti.default.errors,(0,He._)`${ti.default.vErrors}.length`)}function C(w){var y;if(!o.opts.unevaluated)return;let S=(y=r?.validate)===null||y===void 0?void 0:y.evaluated;if(o.props!==!0)if(S&&!S.dynamicProps)S.props!==void 0&&(o.props=Wn.mergeEvaluated.props(n,S.props,o.props));else{let g=n.var("props",(0,He._)`${w}.evaluated.props`);o.props=Wn.mergeEvaluated.props(n,g,o.props,He.Name)}if(o.items!==!0)if(S&&!S.dynamicItems)S.items!==void 0&&(o.items=Wn.mergeEvaluated.items(n,S.items,o.items));else{let g=n.var("items",(0,He._)`${w}.evaluated.items`);o.items=Wn.mergeEvaluated.items(n,g,o.items,He.Name)}}}yr.callRef=Ln;yr.default=mh});var Du=x(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});var hh=xu(),_h=Iu(),gh=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",hh.default,_h.default];pa.default=gh});var Nu=x(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});var Un=W(),ir=Un.operators,Hn={maximum:{okStr:"<=",ok:ir.LTE,fail:ir.GT},minimum:{okStr:">=",ok:ir.GTE,fail:ir.LT},exclusiveMaximum:{okStr:"<",ok:ir.LT,fail:ir.GTE},exclusiveMinimum:{okStr:">",ok:ir.GT,fail:ir.LTE}},yh={message:({keyword:t,schemaCode:e})=>(0,Un.str)`must be ${Hn[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Un._)`{comparison: ${Hn[t].okStr}, limit: ${e}}`},vh={keyword:Object.keys(Hn),type:"number",schemaType:"number",$data:!0,error:yh,code(t){let{keyword:e,data:r,schemaCode:i}=t;t.fail$data((0,Un._)`${r} ${Hn[e].fail} ${i} || isNaN(${r})`)}};ma.default=vh});var ku=x(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});var Vi=W(),Ch={message:({schemaCode:t})=>(0,Vi.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Vi._)`{multipleOf: ${t}}`},wh={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ch,code(t){let{gen:e,data:r,schemaCode:i,it:n}=t,o=n.opts.multipleOfPrecision,a=e.let("res"),s=o?(0,Vi._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,Vi._)`${a} !== parseInt(${a})`;t.fail$data((0,Vi._)`(${i} === 0 || (${a} = ${r}/${i}, ${s}))`)}};ha.default=wh});var Mu=x(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});function Vu(t){let e=t.length,r=0,i=0,n;for(;i<e;)r++,n=t.charCodeAt(i++),n>=55296&&n<=56319&&i<e&&(n=t.charCodeAt(i),(n&64512)===56320&&i++);return r}_a.default=Vu;Vu.code='require("ajv/dist/runtime/ucs2length").default'});var Ru=x(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});var vr=W(),bh=X(),$h=Mu(),zh={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,vr.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,vr._)`{limit: ${t}}`},Sh={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:zh,code(t){let{keyword:e,data:r,schemaCode:i,it:n}=t,o=e==="maxLength"?vr.operators.GT:vr.operators.LT,a=n.opts.unicode===!1?(0,vr._)`${r}.length`:(0,vr._)`${(0,bh.useFunc)(t.gen,$h.default)}(${r})`;t.fail$data((0,vr._)`${a} ${o} ${i}`)}};ga.default=Sh});var Fu=x(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});var Eh=nt(),Bn=W(),xh={message:({schemaCode:t})=>(0,Bn.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Bn._)`{pattern: ${t}}`},Th={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:xh,code(t){let{data:e,$data:r,schema:i,schemaCode:n,it:o}=t,a=o.opts.unicodeRegExp?"u":"",s=r?(0,Bn._)`(new RegExp(${n}, ${a}))`:(0,Eh.usePattern)(t,i);t.fail$data((0,Bn._)`!${s}.test(${e})`)}};ya.default=Th});var Au=x(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var Mi=W(),Ph={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Mi.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Mi._)`{limit: ${t}}`},Oh={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ph,code(t){let{keyword:e,data:r,schemaCode:i}=t,n=e==="maxProperties"?Mi.operators.GT:Mi.operators.LT;t.fail$data((0,Mi._)`Object.keys(${r}).length ${n} ${i}`)}};va.default=Oh});var ju=x(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});var Ri=nt(),Fi=W(),Ih=X(),Dh={message:({params:{missingProperty:t}})=>(0,Fi.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Fi._)`{missingProperty: ${t}}`},Nh={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Dh,code(t){let{gen:e,schema:r,schemaCode:i,data:n,$data:o,it:a}=t,{opts:s}=a;if(!o&&r.length===0)return;let c=r.length>=s.loopRequired;if(a.allErrors?p():d(),s.strictRequired){let C=t.parentSchema.properties,{definedProperties:w}=t.it;for(let y of r)if(C?.[y]===void 0&&!w.has(y)){let S=a.schemaEnv.baseId+a.errSchemaPath,g=`required property "${y}" is not defined at "${S}" (strictRequired)`;(0,Ih.checkStrictMode)(a,g,a.opts.strictRequired)}}function p(){if(c||o)t.block$data(Fi.nil,m);else for(let C of r)(0,Ri.checkReportMissingProp)(t,C)}function d(){let C=e.let("missing");if(c||o){let w=e.let("valid",!0);t.block$data(w,()=>b(C,w)),t.ok(w)}else e.if((0,Ri.checkMissingProp)(t,r,C)),(0,Ri.reportMissingProp)(t,C),e.else()}function m(){e.forOf("prop",i,C=>{t.setParams({missingProperty:C}),e.if((0,Ri.noPropertyInData)(e,n,C,s.ownProperties),()=>t.error())})}function b(C,w){t.setParams({missingProperty:C}),e.forOf(C,i,()=>{e.assign(w,(0,Ri.propertyInData)(e,n,C,s.ownProperties)),e.if((0,Fi.not)(w),()=>{t.error(),e.break()})},Fi.nil)}}};Ca.default=Nh});var qu=x(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});var Ai=W(),kh={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Ai.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Ai._)`{limit: ${t}}`},Vh={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:kh,code(t){let{keyword:e,data:r,schemaCode:i}=t,n=e==="maxItems"?Ai.operators.GT:Ai.operators.LT;t.fail$data((0,Ai._)`${r}.length ${n} ${i}`)}};wa.default=Vh});var Kn=x(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});var Wu=Qo();Wu.code='require("ajv/dist/runtime/equal").default';ba.default=Wu});var Lu=x(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});var $a=Ei(),Te=W(),Mh=X(),Rh=Kn(),Fh={message:({params:{i:t,j:e}})=>(0,Te.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Te._)`{i: ${t}, j: ${e}}`},Ah={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Fh,code(t){let{gen:e,data:r,$data:i,schema:n,parentSchema:o,schemaCode:a,it:s}=t;if(!i&&!n)return;let c=e.let("valid"),p=o.items?(0,$a.getSchemaTypes)(o.items):[];t.block$data(c,d,(0,Te._)`${a} === false`),t.ok(c);function d(){let w=e.let("i",(0,Te._)`${r}.length`),y=e.let("j");t.setParams({i:w,j:y}),e.assign(c,!0),e.if((0,Te._)`${w} > 1`,()=>(m()?b:C)(w,y))}function m(){return p.length>0&&!p.some(w=>w==="object"||w==="array")}function b(w,y){let S=e.name("item"),g=(0,$a.checkDataTypes)(p,S,s.opts.strictNumbers,$a.DataType.Wrong),D=e.const("indices",(0,Te._)`{}`);e.for((0,Te._)`;${w}--;`,()=>{e.let(S,(0,Te._)`${r}[${w}]`),e.if(g,(0,Te._)`continue`),p.length>1&&e.if((0,Te._)`typeof ${S} == "string"`,(0,Te._)`${S} += "_"`),e.if((0,Te._)`typeof ${D}[${S}] == "number"`,()=>{e.assign(y,(0,Te._)`${D}[${S}]`),t.error(),e.assign(c,!1).break()}).code((0,Te._)`${D}[${S}] = ${w}`)})}function C(w,y){let S=(0,Mh.useFunc)(e,Rh.default),g=e.name("outer");e.label(g).for((0,Te._)`;${w}--;`,()=>e.for((0,Te._)`${y} = ${w}; ${y}--;`,()=>e.if((0,Te._)`${S}(${r}[${w}], ${r}[${y}])`,()=>{t.error(),e.assign(c,!1).break(g)})))}}};za.default=Ah});var Uu=x(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var Sa=W(),jh=X(),qh=Kn(),Wh={message:"must be equal to constant",params:({schemaCode:t})=>(0,Sa._)`{allowedValue: ${t}}`},Lh={keyword:"const",$data:!0,error:Wh,code(t){let{gen:e,data:r,$data:i,schemaCode:n,schema:o}=t;i||o&&typeof o=="object"?t.fail$data((0,Sa._)`!${(0,jh.useFunc)(e,qh.default)}(${r}, ${n})`):t.fail((0,Sa._)`${o} !== ${r}`)}};Ea.default=Lh});var Hu=x(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});var ji=W(),Uh=X(),Hh=Kn(),Bh={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,ji._)`{allowedValues: ${t}}`},Kh={keyword:"enum",schemaType:"array",$data:!0,error:Bh,code(t){let{gen:e,data:r,$data:i,schema:n,schemaCode:o,it:a}=t;if(!i&&n.length===0)throw new Error("enum must have non-empty array");let s=n.length>=a.opts.loopEnum,c,p=()=>c??(c=(0,Uh.useFunc)(e,Hh.default)),d;if(s||i)d=e.let("valid"),t.block$data(d,m);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let C=e.const("vSchema",o);d=(0,ji.or)(...n.map((w,y)=>b(C,y)))}t.pass(d);function m(){e.assign(d,!1),e.forOf("v",o,C=>e.if((0,ji._)`${p()}(${r}, ${C})`,()=>e.assign(d,!0).break()))}function b(C,w){let y=n[w];return typeof y=="object"&&y!==null?(0,ji._)`${p()}(${r}, ${C}[${w}])`:(0,ji._)`${r} === ${y}`}}};xa.default=Kh});var Bu=x(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});var Gh=Nu(),Jh=ku(),Xh=Ru(),Qh=Fu(),Zh=Au(),Yh=ju(),e0=qu(),t0=Lu(),r0=Uu(),i0=Hu(),n0=[Gh.default,Jh.default,Xh.default,Qh.default,Zh.default,Yh.default,e0.default,t0.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},r0.default,i0.default];Ta.default=n0});var Oa=x(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.validateAdditionalItems=void 0;var Cr=W(),Pa=X(),o0={message:({params:{len:t}})=>(0,Cr.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Cr._)`{limit: ${t}}`},a0={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:o0,code(t){let{parentSchema:e,it:r}=t,{items:i}=e;if(!Array.isArray(i)){(0,Pa.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ku(t,i)}};function Ku(t,e){let{gen:r,schema:i,data:n,keyword:o,it:a}=t;a.items=!0;let s=r.const("len",(0,Cr._)`${n}.length`);if(i===!1)t.setParams({len:e.length}),t.pass((0,Cr._)`${s} <= ${e.length}`);else if(typeof i=="object"&&!(0,Pa.alwaysValidSchema)(a,i)){let p=r.var("valid",(0,Cr._)`${s} <= ${e.length}`);r.if((0,Cr.not)(p),()=>c(p)),t.ok(p)}function c(p){r.forRange("i",e.length,s,d=>{t.subschema({keyword:o,dataProp:d,dataPropType:Pa.Type.Num},p),a.allErrors||r.if((0,Cr.not)(p),()=>r.break())})}}qi.validateAdditionalItems=Ku;qi.default=a0});var Ia=x(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.validateTuple=void 0;var Gu=W(),Gn=X(),s0=nt(),l0={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Ju(t,"additionalItems",e);r.items=!0,!(0,Gn.alwaysValidSchema)(r,e)&&t.ok((0,s0.validateArray)(t))}};function Ju(t,e,r=t.schema){let{gen:i,parentSchema:n,data:o,keyword:a,it:s}=t;d(n),s.opts.unevaluated&&r.length&&s.items!==!0&&(s.items=Gn.mergeEvaluated.items(i,r.length,s.items));let c=i.name("valid"),p=i.const("len",(0,Gu._)`${o}.length`);r.forEach((m,b)=>{(0,Gn.alwaysValidSchema)(s,m)||(i.if((0,Gu._)`${p} > ${b}`,()=>t.subschema({keyword:a,schemaProp:b,dataProp:b},c)),t.ok(c))});function d(m){let{opts:b,errSchemaPath:C}=s,w=r.length,y=w===m.minItems&&(w===m.maxItems||m[e]===!1);if(b.strictTuples&&!y){let S=`"${a}" is ${w}-tuple, but minItems or maxItems/${e} are not specified or different at path "${C}"`;(0,Gn.checkStrictMode)(s,S,b.strictTuples)}}}Wi.validateTuple=Ju;Wi.default=l0});var Xu=x(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});var c0=Ia(),u0={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,c0.validateTuple)(t,"items")};Da.default=u0});var Zu=x(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});var Qu=W(),d0=X(),f0=nt(),p0=Oa(),m0={message:({params:{len:t}})=>(0,Qu.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Qu._)`{limit: ${t}}`},h0={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:m0,code(t){let{schema:e,parentSchema:r,it:i}=t,{prefixItems:n}=r;i.items=!0,!(0,d0.alwaysValidSchema)(i,e)&&(n?(0,p0.validateAdditionalItems)(t,n):t.ok((0,f0.validateArray)(t)))}};Na.default=h0});var Yu=x(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});var at=W(),Jn=X(),_0={message:({params:{min:t,max:e}})=>e===void 0?(0,at.str)`must contain at least ${t} valid item(s)`:(0,at.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,at._)`{minContains: ${t}}`:(0,at._)`{minContains: ${t}, maxContains: ${e}}`},g0={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:_0,code(t){let{gen:e,schema:r,parentSchema:i,data:n,it:o}=t,a,s,{minContains:c,maxContains:p}=i;o.opts.next?(a=c===void 0?1:c,s=p):a=1;let d=e.const("len",(0,at._)`${n}.length`);if(t.setParams({min:a,max:s}),s===void 0&&a===0){(0,Jn.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&a>s){(0,Jn.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Jn.alwaysValidSchema)(o,r)){let y=(0,at._)`${d} >= ${a}`;s!==void 0&&(y=(0,at._)`${y} && ${d} <= ${s}`),t.pass(y);return}o.items=!0;let m=e.name("valid");s===void 0&&a===1?C(m,()=>e.if(m,()=>e.break())):a===0?(e.let(m,!0),s!==void 0&&e.if((0,at._)`${n}.length > 0`,b)):(e.let(m,!1),b()),t.result(m,()=>t.reset());function b(){let y=e.name("_valid"),S=e.let("count",0);C(y,()=>e.if(y,()=>w(S)))}function C(y,S){e.forRange("i",0,d,g=>{t.subschema({keyword:"contains",dataProp:g,dataPropType:Jn.Type.Num,compositeRule:!0},y),S()})}function w(y){e.code((0,at._)`${y}++`),s===void 0?e.if((0,at._)`${y} >= ${a}`,()=>e.assign(m,!0).break()):(e.if((0,at._)`${y} > ${s}`,()=>e.assign(m,!1).break()),a===1?e.assign(m,!0):e.if((0,at._)`${y} >= ${a}`,()=>e.assign(m,!0)))}}};ka.default=g0});var rd=x(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.validateSchemaDeps=Pt.validatePropertyDeps=Pt.error=void 0;var Va=W(),y0=X(),Li=nt();Pt.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let i=e===1?"property":"properties";return(0,Va.str)`must have ${i} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:i}})=>(0,Va._)`{property: ${t},
    missingProperty: ${i},
    depsCount: ${e},
    deps: ${r}}`};var v0={keyword:"dependencies",type:"object",schemaType:"object",error:Pt.error,code(t){let[e,r]=C0(t);ed(t,e),td(t,r)}};function C0({schema:t}){let e={},r={};for(let i in t){if(i==="__proto__")continue;let n=Array.isArray(t[i])?e:r;n[i]=t[i]}return[e,r]}function ed(t,e=t.schema){let{gen:r,data:i,it:n}=t;if(Object.keys(e).length===0)return;let o=r.let("missing");for(let a in e){let s=e[a];if(s.length===0)continue;let c=(0,Li.propertyInData)(r,i,a,n.opts.ownProperties);t.setParams({property:a,depsCount:s.length,deps:s.join(", ")}),n.allErrors?r.if(c,()=>{for(let p of s)(0,Li.checkReportMissingProp)(t,p)}):(r.if((0,Va._)`${c} && (${(0,Li.checkMissingProp)(t,s,o)})`),(0,Li.reportMissingProp)(t,o),r.else())}}Pt.validatePropertyDeps=ed;function td(t,e=t.schema){let{gen:r,data:i,keyword:n,it:o}=t,a=r.name("valid");for(let s in e)(0,y0.alwaysValidSchema)(o,e[s])||(r.if((0,Li.propertyInData)(r,i,s,o.opts.ownProperties),()=>{let c=t.subschema({keyword:n,schemaProp:s},a);t.mergeValidEvaluated(c,a)},()=>r.var(a,!0)),t.ok(a))}Pt.validateSchemaDeps=td;Pt.default=v0});var nd=x(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var id=W(),w0=X(),b0={message:"property name must be valid",params:({params:t})=>(0,id._)`{propertyName: ${t.propertyName}}`},$0={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:b0,code(t){let{gen:e,schema:r,data:i,it:n}=t;if((0,w0.alwaysValidSchema)(n,r))return;let o=e.name("valid");e.forIn("key",i,a=>{t.setParams({propertyName:a}),t.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),e.if((0,id.not)(o),()=>{t.error(!0),n.allErrors||e.break()})}),t.ok(o)}};Ma.default=$0});var Fa=x(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});var Xn=nt(),dt=W(),z0=Wt(),Qn=X(),S0={message:"must NOT have additional properties",params:({params:t})=>(0,dt._)`{additionalProperty: ${t.additionalProperty}}`},E0={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:S0,code(t){let{gen:e,schema:r,parentSchema:i,data:n,errsCount:o,it:a}=t;if(!o)throw new Error("ajv implementation error");let{allErrors:s,opts:c}=a;if(a.props=!0,c.removeAdditional!=="all"&&(0,Qn.alwaysValidSchema)(a,r))return;let p=(0,Xn.allSchemaProperties)(i.properties),d=(0,Xn.allSchemaProperties)(i.patternProperties);m(),t.ok((0,dt._)`${o} === ${z0.default.errors}`);function m(){e.forIn("key",n,S=>{!p.length&&!d.length?w(S):e.if(b(S),()=>w(S))})}function b(S){let g;if(p.length>8){let D=(0,Qn.schemaRefOrVal)(a,i.properties,"properties");g=(0,Xn.isOwnProperty)(e,D,S)}else p.length?g=(0,dt.or)(...p.map(D=>(0,dt._)`${S} === ${D}`)):g=dt.nil;return d.length&&(g=(0,dt.or)(g,...d.map(D=>(0,dt._)`${(0,Xn.usePattern)(t,D)}.test(${S})`))),(0,dt.not)(g)}function C(S){e.code((0,dt._)`delete ${n}[${S}]`)}function w(S){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){C(S);return}if(r===!1){t.setParams({additionalProperty:S}),t.error(),s||e.break();return}if(typeof r=="object"&&!(0,Qn.alwaysValidSchema)(a,r)){let g=e.name("valid");c.removeAdditional==="failing"?(y(S,g,!1),e.if((0,dt.not)(g),()=>{t.reset(),C(S)})):(y(S,g),s||e.if((0,dt.not)(g),()=>e.break()))}}function y(S,g,D){let A={keyword:"additionalProperties",dataProp:S,dataPropType:Qn.Type.Str};D===!1&&Object.assign(A,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(A,g)}}};Ra.default=E0});var sd=x(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});var x0=Oi(),od=nt(),Aa=X(),ad=Fa(),T0={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:i,data:n,it:o}=t;o.opts.removeAdditional==="all"&&i.additionalProperties===void 0&&ad.default.code(new x0.KeywordCxt(o,ad.default,"additionalProperties"));let a=(0,od.allSchemaProperties)(r);for(let m of a)o.definedProperties.add(m);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=Aa.mergeEvaluated.props(e,(0,Aa.toHash)(a),o.props));let s=a.filter(m=>!(0,Aa.alwaysValidSchema)(o,r[m]));if(s.length===0)return;let c=e.name("valid");for(let m of s)p(m)?d(m):(e.if((0,od.propertyInData)(e,n,m,o.opts.ownProperties)),d(m),o.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(m),t.ok(c);function p(m){return o.opts.useDefaults&&!o.compositeRule&&r[m].default!==void 0}function d(m){t.subschema({keyword:"properties",schemaProp:m,dataProp:m},c)}}};ja.default=T0});var dd=x(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});var ld=nt(),Zn=W(),cd=X(),ud=X(),P0={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:i,parentSchema:n,it:o}=t,{opts:a}=o,s=(0,ld.allSchemaProperties)(r),c=s.filter(y=>(0,cd.alwaysValidSchema)(o,r[y]));if(s.length===0||c.length===s.length&&(!o.opts.unevaluated||o.props===!0))return;let p=a.strictSchema&&!a.allowMatchingProperties&&n.properties,d=e.name("valid");o.props!==!0&&!(o.props instanceof Zn.Name)&&(o.props=(0,ud.evaluatedPropsToName)(e,o.props));let{props:m}=o;b();function b(){for(let y of s)p&&C(y),o.allErrors?w(y):(e.var(d,!0),w(y),e.if(d))}function C(y){for(let S in p)new RegExp(y).test(S)&&(0,cd.checkStrictMode)(o,`property ${S} matches pattern ${y} (use allowMatchingProperties)`)}function w(y){e.forIn("key",i,S=>{e.if((0,Zn._)`${(0,ld.usePattern)(t,y)}.test(${S})`,()=>{let g=c.includes(y);g||t.subschema({keyword:"patternProperties",schemaProp:y,dataProp:S,dataPropType:ud.Type.Str},d),o.opts.unevaluated&&m!==!0?e.assign((0,Zn._)`${m}[${S}]`,!0):!g&&!o.allErrors&&e.if((0,Zn.not)(d),()=>e.break())})})}}};qa.default=P0});var fd=x(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});var O0=X(),I0={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:i}=t;if((0,O0.alwaysValidSchema)(i,r)){t.fail();return}let n=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),t.failResult(n,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Wa.default=I0});var pd=x(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});var D0=nt(),N0={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:D0.validateUnion,error:{message:"must match a schema in anyOf"}};La.default=N0});var md=x(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});var Yn=W(),k0=X(),V0={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Yn._)`{passingSchemas: ${t.passing}}`},M0={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:V0,code(t){let{gen:e,schema:r,parentSchema:i,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&i.discriminator)return;let o=r,a=e.let("valid",!1),s=e.let("passing",null),c=e.name("_valid");t.setParams({passing:s}),e.block(p),t.result(a,()=>t.reset(),()=>t.error(!0));function p(){o.forEach((d,m)=>{let b;(0,k0.alwaysValidSchema)(n,d)?e.var(c,!0):b=t.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},c),m>0&&e.if((0,Yn._)`${c} && ${a}`).assign(a,!1).assign(s,(0,Yn._)`[${s}, ${m}]`).else(),e.if(c,()=>{e.assign(a,!0),e.assign(s,m),b&&t.mergeEvaluated(b,Yn.Name)})})}}};Ua.default=M0});var hd=x(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});var R0=X(),F0={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let n=e.name("valid");r.forEach((o,a)=>{if((0,R0.alwaysValidSchema)(i,o))return;let s=t.subschema({keyword:"allOf",schemaProp:a},n);t.ok(n),t.mergeEvaluated(s)})}};Ha.default=F0});var yd=x(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});var eo=W(),gd=X(),A0={message:({params:t})=>(0,eo.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,eo._)`{failingKeyword: ${t.ifClause}}`},j0={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:A0,code(t){let{gen:e,parentSchema:r,it:i}=t;r.then===void 0&&r.else===void 0&&(0,gd.checkStrictMode)(i,'"if" without "then" and "else" is ignored');let n=_d(i,"then"),o=_d(i,"else");if(!n&&!o)return;let a=e.let("valid",!0),s=e.name("_valid");if(c(),t.reset(),n&&o){let d=e.let("ifClause");t.setParams({ifClause:d}),e.if(s,p("then",d),p("else",d))}else n?e.if(s,p("then")):e.if((0,eo.not)(s),p("else"));t.pass(a,()=>t.error(!0));function c(){let d=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);t.mergeEvaluated(d)}function p(d,m){return()=>{let b=t.subschema({keyword:d},s);e.assign(a,s),t.mergeValidEvaluated(b,a),m?e.assign(m,(0,eo._)`${d}`):t.setParams({ifClause:d})}}}};function _d(t,e){let r=t.schema[e];return r!==void 0&&!(0,gd.alwaysValidSchema)(t,r)}Ba.default=j0});var vd=x(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});var q0=X(),W0={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,q0.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Ka.default=W0});var Cd=x(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});var L0=Oa(),U0=Xu(),H0=Ia(),B0=Zu(),K0=Yu(),G0=rd(),J0=nd(),X0=Fa(),Q0=sd(),Z0=dd(),Y0=fd(),e_=pd(),t_=md(),r_=hd(),i_=yd(),n_=vd();function o_(t=!1){let e=[Y0.default,e_.default,t_.default,r_.default,i_.default,n_.default,J0.default,X0.default,G0.default,Q0.default,Z0.default];return t?e.push(U0.default,B0.default):e.push(L0.default,H0.default),e.push(K0.default),e}Ga.default=o_});var wd=x(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});var ye=W(),a_={message:({schemaCode:t})=>(0,ye.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,ye._)`{format: ${t}}`},s_={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:a_,code(t,e){let{gen:r,data:i,$data:n,schema:o,schemaCode:a,it:s}=t,{opts:c,errSchemaPath:p,schemaEnv:d,self:m}=s;if(!c.validateFormats)return;n?b():C();function b(){let w=r.scopeValue("formats",{ref:m.formats,code:c.code.formats}),y=r.const("fDef",(0,ye._)`${w}[${a}]`),S=r.let("fType"),g=r.let("format");r.if((0,ye._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(S,(0,ye._)`${y}.type || "string"`).assign(g,(0,ye._)`${y}.validate`),()=>r.assign(S,(0,ye._)`"string"`).assign(g,y)),t.fail$data((0,ye.or)(D(),A()));function D(){return c.strictSchema===!1?ye.nil:(0,ye._)`${a} && !${g}`}function A(){let re=d.$async?(0,ye._)`(${y}.async ? await ${g}(${i}) : ${g}(${i}))`:(0,ye._)`${g}(${i})`,M=(0,ye._)`(typeof ${g} == "function" ? ${re} : ${g}.test(${i}))`;return(0,ye._)`${g} && ${g} !== true && ${S} === ${e} && !${M}`}}function C(){let w=m.formats[o];if(!w){D();return}if(w===!0)return;let[y,S,g]=A(w);y===e&&t.pass(re());function D(){if(c.strictSchema===!1){m.logger.warn(M());return}throw new Error(M());function M(){return`unknown format "${o}" ignored in schema at path "${p}"`}}function A(M){let Ge=M instanceof RegExp?(0,ye.regexpCode)(M):c.code.formats?(0,ye._)`${c.code.formats}${(0,ye.getProperty)(o)}`:void 0,st=r.scopeValue("formats",{key:o,ref:M,code:Ge});return typeof M=="object"&&!(M instanceof RegExp)?[M.type||"string",M.validate,(0,ye._)`${st}.validate`]:["string",M,st]}function re(){if(typeof w=="object"&&!(w instanceof RegExp)&&w.async){if(!d.$async)throw new Error("async format in sync schema");return(0,ye._)`await ${g}(${i})`}return typeof S=="function"?(0,ye._)`${g}(${i})`:(0,ye._)`${g}.test(${i})`}}}};Ja.default=s_});var bd=x(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});var l_=wd(),c_=[l_.default];Xa.default=c_});var $d=x(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.contentVocabulary=ri.metadataVocabulary=void 0;ri.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ri.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Sd=x(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});var u_=Du(),d_=Bu(),f_=Cd(),p_=bd(),zd=$d(),m_=[u_.default,d_.default,(0,f_.default)(),p_.default,zd.metadataVocabulary,zd.contentVocabulary];Qa.default=m_});var xd=x(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.DiscrError=void 0;var Ed=function(t){return t.Tag="tag",t.Mapping="mapping",t}(Ed||(to.DiscrError=Ed={}))});var Pd=x(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});var ii=W(),Za=xd(),Td=An(),h_=Ii(),__=X(),g_={message:({params:{discrError:t,tagName:e}})=>t===Za.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,ii._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},y_={keyword:"discriminator",type:"object",schemaType:"object",error:g_,code(t){let{gen:e,data:r,schema:i,parentSchema:n,it:o}=t,{oneOf:a}=n;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let s=i.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),p=e.const("tag",(0,ii._)`${r}${(0,ii.getProperty)(s)}`);e.if((0,ii._)`typeof ${p} == "string"`,()=>d(),()=>t.error(!1,{discrError:Za.DiscrError.Tag,tag:p,tagName:s})),t.ok(c);function d(){let C=b();e.if(!1);for(let w in C)e.elseIf((0,ii._)`${p} === ${w}`),e.assign(c,m(C[w]));e.else(),t.error(!1,{discrError:Za.DiscrError.Mapping,tag:p,tagName:s}),e.endIf()}function m(C){let w=e.name("valid"),y=t.subschema({keyword:"oneOf",schemaProp:C},w);return t.mergeEvaluated(y,ii.Name),w}function b(){var C;let w={},y=g(n),S=!0;for(let re=0;re<a.length;re++){let M=a[re];if(M?.$ref&&!(0,__.schemaHasRulesButRef)(M,o.self.RULES)){let st=M.$ref;if(M=Td.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,st),M instanceof Td.SchemaEnv&&(M=M.schema),M===void 0)throw new h_.default(o.opts.uriResolver,o.baseId,st)}let Ge=(C=M?.properties)===null||C===void 0?void 0:C[s];if(typeof Ge!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);S=S&&(y||g(M)),D(Ge,re)}if(!S)throw new Error(`discriminator: "${s}" must be required`);return w;function g({required:re}){return Array.isArray(re)&&re.includes(s)}function D(re,M){if(re.const)A(re.const,M);else if(re.enum)for(let Ge of re.enum)A(Ge,M);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function A(re,M){if(typeof re!="string"||re in w)throw new Error(`discriminator: "${s}" values must be unique strings`);w[re]=M}}}};Ya.default=y_});var Od=x((KC,v_)=>{v_.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var ts=x((fe,es)=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.MissingRefError=fe.ValidationError=fe.CodeGen=fe.Name=fe.nil=fe.stringify=fe.str=fe._=fe.KeywordCxt=fe.Ajv=void 0;var C_=Eu(),w_=Sd(),b_=Pd(),Id=Od(),$_=["/properties"],ro="http://json-schema.org/draft-07/schema",ni=class extends C_.default{_addVocabularies(){super._addVocabularies(),w_.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(b_.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(Id,$_):Id;this.addMetaSchema(e,ro,!1),this.refs["http://json-schema.org/schema"]=ro}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(ro)?ro:void 0)}};fe.Ajv=ni;es.exports=fe=ni;es.exports.Ajv=ni;Object.defineProperty(fe,"__esModule",{value:!0});fe.default=ni;var z_=Oi();Object.defineProperty(fe,"KeywordCxt",{enumerable:!0,get:function(){return z_.KeywordCxt}});var oi=W();Object.defineProperty(fe,"_",{enumerable:!0,get:function(){return oi._}});Object.defineProperty(fe,"str",{enumerable:!0,get:function(){return oi.str}});Object.defineProperty(fe,"stringify",{enumerable:!0,get:function(){return oi.stringify}});Object.defineProperty(fe,"nil",{enumerable:!0,get:function(){return oi.nil}});Object.defineProperty(fe,"Name",{enumerable:!0,get:function(){return oi.Name}});Object.defineProperty(fe,"CodeGen",{enumerable:!0,get:function(){return oi.CodeGen}});var S_=Rn();Object.defineProperty(fe,"ValidationError",{enumerable:!0,get:function(){return S_.default}});var E_=Ii();Object.defineProperty(fe,"MissingRefError",{enumerable:!0,get:function(){return E_.default}})});var Ad=x(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.formatNames=It.fastFormats=It.fullFormats=void 0;function Ot(t,e){return{validate:t,compare:e}}It.fullFormats={date:Ot(Vd,os),time:Ot(is(!0),as),"date-time":Ot(Dd(!0),Rd),"iso-time":Ot(is(),Md),"iso-date-time":Ot(Dd(),Fd),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:D_,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:A_,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:N_,int32:{type:"number",validate:M_},int64:{type:"number",validate:R_},float:{type:"number",validate:kd},double:{type:"number",validate:kd},password:!0,binary:!0};It.fastFormats=ge(O({},It.fullFormats),{date:Ot(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,os),time:Ot(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,as),"date-time":Ot(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Rd),"iso-time":Ot(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Md),"iso-date-time":Ot(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Fd),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i});It.formatNames=Object.keys(It.fullFormats);function x_(t){return t%4===0&&(t%100!==0||t%400===0)}var T_=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,P_=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Vd(t){let e=T_.exec(t);if(!e)return!1;let r=+e[1],i=+e[2],n=+e[3];return i>=1&&i<=12&&n>=1&&n<=(i===2&&x_(r)?29:P_[i])}function os(t,e){if(t&&e)return t>e?1:t<e?-1:0}var rs=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function is(t){return function(r){let i=rs.exec(r);if(!i)return!1;let n=+i[1],o=+i[2],a=+i[3],s=i[4],c=i[5]==="-"?-1:1,p=+(i[6]||0),d=+(i[7]||0);if(p>23||d>59||t&&!s)return!1;if(n<=23&&o<=59&&a<60)return!0;let m=o-d*c,b=n-p*c-(m<0?1:0);return(b===23||b===-1)&&(m===59||m===-1)&&a<61}}function as(t,e){if(!(t&&e))return;let r=new Date("2020-01-01T"+t).valueOf(),i=new Date("2020-01-01T"+e).valueOf();if(r&&i)return r-i}function Md(t,e){if(!(t&&e))return;let r=rs.exec(t),i=rs.exec(e);if(r&&i)return t=r[1]+r[2]+r[3],e=i[1]+i[2]+i[3],t>e?1:t<e?-1:0}var ns=/t|\s/i;function Dd(t){let e=is(t);return function(i){let n=i.split(ns);return n.length===2&&Vd(n[0])&&e(n[1])}}function Rd(t,e){if(!(t&&e))return;let r=new Date(t).valueOf(),i=new Date(e).valueOf();if(r&&i)return r-i}function Fd(t,e){if(!(t&&e))return;let[r,i]=t.split(ns),[n,o]=e.split(ns),a=os(r,n);if(a!==void 0)return a||as(i,o)}var O_=/\/|:/,I_=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function D_(t){return O_.test(t)&&I_.test(t)}var Nd=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function N_(t){return Nd.lastIndex=0,Nd.test(t)}var k_=-(2**31),V_=2**31-1;function M_(t){return Number.isInteger(t)&&t<=V_&&t>=k_}function R_(t){return Number.isInteger(t)}function kd(){return!0}var F_=/[^\\]\\Z/;function A_(t){if(F_.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var jd=x(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.formatLimitDefinition=void 0;var j_=ts(),ft=W(),nr=ft.operators,io={formatMaximum:{okStr:"<=",ok:nr.LTE,fail:nr.GT},formatMinimum:{okStr:">=",ok:nr.GTE,fail:nr.LT},formatExclusiveMaximum:{okStr:"<",ok:nr.LT,fail:nr.GTE},formatExclusiveMinimum:{okStr:">",ok:nr.GT,fail:nr.LTE}},q_={message:({keyword:t,schemaCode:e})=>(0,ft.str)`should be ${io[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,ft._)`{comparison: ${io[t].okStr}, limit: ${e}}`};ai.formatLimitDefinition={keyword:Object.keys(io),type:"string",schemaType:"string",$data:!0,error:q_,code(t){let{gen:e,data:r,schemaCode:i,keyword:n,it:o}=t,{opts:a,self:s}=o;if(!a.validateFormats)return;let c=new j_.KeywordCxt(o,s.RULES.all.format.definition,"format");c.$data?p():d();function p(){let b=e.scopeValue("formats",{ref:s.formats,code:a.code.formats}),C=e.const("fmt",(0,ft._)`${b}[${c.schemaCode}]`);t.fail$data((0,ft.or)((0,ft._)`typeof ${C} != "object"`,(0,ft._)`${C} instanceof RegExp`,(0,ft._)`typeof ${C}.compare != "function"`,m(C)))}function d(){let b=c.schema,C=s.formats[b];if(!C||C===!0)return;if(typeof C!="object"||C instanceof RegExp||typeof C.compare!="function")throw new Error(`"${n}": format "${b}" does not define "compare" function`);let w=e.scopeValue("formats",{key:b,ref:C,code:a.code.formats?(0,ft._)`${a.code.formats}${(0,ft.getProperty)(b)}`:void 0});t.fail$data(m(w))}function m(b){return(0,ft._)`${b}.compare(${r}, ${i}) ${io[n].fail} 0`}},dependencies:["format"]};var W_=t=>(t.addKeyword(ai.formatLimitDefinition),t);ai.default=W_});var Ud=x((Ui,Ld)=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var si=Ad(),L_=jd(),ss=W(),qd=new ss.Name("fullFormats"),U_=new ss.Name("fastFormats"),ls=(t,e={keywords:!0})=>{if(Array.isArray(e))return Wd(t,e,si.fullFormats,qd),t;let[r,i]=e.mode==="fast"?[si.fastFormats,U_]:[si.fullFormats,qd],n=e.formats||si.formatNames;return Wd(t,n,r,i),e.keywords&&(0,L_.default)(t),t};ls.get=(t,e="full")=>{let i=(e==="fast"?si.fastFormats:si.fullFormats)[t];if(!i)throw new Error(`Unknown format "${t}"`);return i};function Wd(t,e,r,i){var n,o;(n=(o=t.opts.code).formats)!==null&&n!==void 0||(o.formats=(0,ss._)`require("ajv-formats/dist/formats").${i}`);for(let a of e)t.addFormat(a,r[a])}Ld.exports=Ui=ls;Object.defineProperty(Ui,"__esModule",{value:!0});Ui.default=ls});var Pf={formatMap:{"date-time":{widget:"date",showTime:!0,format:"yyyy-MM-dd'T'HH:mm:ss.SSSxxx"},date:{widget:"date",format:"yyyy-MM-dd"},"full-date":{widget:"date",format:"yyyy-MM-dd"},time:{widget:"time",format:"HH:mm:ss.SSSxxx"},"full-time":{widget:"time"},week:{widget:"date",mode:"week",format:"yyyy-ww"},month:{widget:"date",mode:"month",format:"yyyy-MM"},uri:{widget:"upload"},email:{widget:"autocomplete",type:"email"},color:{widget:"string",type:"color"},"":{widget:"string"}},ingoreKeywords:["type","enum"],liveValidate:!0,autocomplete:null,firstVisual:!1,onlyVisual:!1,errors:{},ui:{},button:{submit_type:"primary",reset_type:"default"},uiDateStringFormat:"yyyy-MM-dd HH:mm:ss",uiDateNumberFormat:"T",uiTimeStringFormat:"HH:mm:ss",uiTimeNumberFormat:"T",uiEmailSuffixes:["qq.com","163.com","gmail.com","126.com","aliyun.com"],delay:!1};function qr(t){return t.merge("sf",Pf)}var Se="/";function Co(t){return t==null}function Me(t,e){return t==null?e:`${t}`!="false"}function Wr(t,...e){}function Of(t,e){let r=/^#\/definitions\/(.*)$/.exec(t);if(r&&r[1]){let i=r[1].split(Se),n=e;for(let o of i)if(o=o.replace(/~1/g,Se).replace(/~0/g,"~"),n.hasOwnProperty(o))n=n[o];else throw new Error(`Could not find a definition for ${t}.`);return n}throw new Error(`Could not find a definition for ${t}.`)}function vi(t,e={}){if(t.hasOwnProperty("$ref")){let i=Of(t.$ref,e),r=t,{$ref:n}=r,o=Us(r,["$ref"]);return vi(O(O({},i),o),e)}return t}function cc(t,e){let r=(i,n)=>{If(i,n),Object.keys(i.properties).forEach(o=>{let a=i.properties[o],s=`$${o}`;a.items&&r(a.items,n[s].$items),a.properties&&r(a,n[s])})};r(t,e)}function If(t,e){if(!(t.hasOwnProperty("if")&&t.hasOwnProperty("then")))return null;if(!t.if.properties)throw new Error("if: does not contain 'properties'");let r=Object.keys(t.properties),i=Object.keys(t.if.properties);vo(r,i),vo(r,t.then.required),t.required=t.required.concat(t.then.required);let n=t.hasOwnProperty("else");n&&(vo(r,t.else.required),t.required=t.required.concat(t.else.required));let o={},a={};return i.forEach(s=>{let c=t.if.properties[s].enum;o[s]=c,n&&(a[s]=p=>!c.includes(p))}),t.then.required.forEach(s=>e[`$${s}`].visibleIf=o),n&&t.else.required.forEach(s=>e[`$${s}`].visibleIf=a),t}function vo(t,e){e.forEach(r=>{if(!t.includes(r))throw new Error(`if: properties does not contain '${r}'`)})}function uc(t,e){if(!Array.isArray(e))return t;let r=d=>d.reduce((m,b)=>(m[b]=!0,m),{}),i=d=>`property [${d.join("', '")}]`,n=r(t),o=r(e),a=e.filter(d=>d!=="*"&&!n[d]);if(a.length)throw new Error(`ui schema order list contains extraneous ${i(a)}`);let s=t.filter(d=>!o[d]),c=e.indexOf("*");if(c===-1){if(s.length)throw new Error(`ui schema order list does not contain ${i(s)}`);return e}if(c!==e.lastIndexOf("*"))throw new Error("ui schema order list contains more than one wildcard item");let p=[...e];return p.splice(c,1,...s),p}function dc(t,e,r){return Co(t)||!Array.isArray(t)||t.length===0?[]:(typeof t[0]!="object"&&(t=t.map(i=>({label:i,value:i}))),e&&(Array.isArray(e)||(e=[e]),t.forEach(i=>{~e.indexOf(i.value)&&(i.checked=!0)})),r&&t.forEach(i=>i.disabled=!0),t)}function Df(t,e,r){return dc(dr(t||[]),e,r)}function Lr(t,e,r,i){return typeof e.asyncData=="function"?e.asyncData(i).pipe(Vr(n=>dc(n,r,t.readOnly))):Ks(Df(t.enum,r,t.readOnly))}var Ci=class{constructor(e,r,i,n,o,a,s,c){this.injector=e,this._options=c,this._errors=null,this._valueChanges=new kr({path:null,pathValue:null,value:null}),this._errorsChanges=new kr(null),this._visible=!0,this._visibilityChanges=new kr(!0),this._objErrors={},this._value=null,this.schema=i,this.ui=n,this.schemaValidator=r.createValidatorFn(i,{ingoreKeywords:this.ui.ingoreKeywords,debug:n.debug}),this.formData=o||i.default,this._parent=a,a?this._root=a.root:this._root=this,this.path=s}get valueChanges(){return this._valueChanges}get errorsChanges(){return this._errorsChanges}get type(){return this.schema.type}get parent(){return this._parent}get root(){return this._root}get value(){return this._value}get errors(){return this._errors}get visible(){return this._visible}get valid(){return this._errors===null||this._errors.length===0}get options(){return this._options}cd(e=!1){this.widget?.detectChanges(e)}updateValueAndValidity(e){e=O({onlySelf:!1,emitValidator:!0,emitValueEvent:!0,updatePath:"",updateValue:null},e),this._updateValue(),e.emitValueEvent&&(e.updatePath=e.updatePath||this.path,e.updateValue=e.updateValue==null?this.value:e.updateValue,this.valueChanges.next({value:this.value,path:e.updatePath,pathValue:e.updateValue})),e.emitValidator&&this.ui.liveValidate===!0&&this._runValidation(),this.parent&&!e.onlySelf&&this.parent.updateValueAndValidity(ge(O({},e),{emitValidator:!1}))}searchProperty(e){let r=this,i=null,n=null;if(e[0]===Se)i=this.findRoot(),n=i.getProperty(e.substring(1));else for(;n===null&&r.parent!==null;)r=i=r.parent,n=i.getProperty(e);return n}findRoot(){let e=this;for(;e.parent!==null;)e=e.parent;return e}isEmptyData(e){if(Co(e))return!0;switch(this.type){case"string":return`${e}`.length===0}return!1}_runValidation(){let e,r=this.isEmptyData(this._value);r&&this.ui._required?e=[{keyword:"required"}]:r?e=[]:e=this.schemaValidator(this._value)||[];let i=this.ui.validator;if(typeof i=="function"){let n=i(this.value,this,this.findRoot());if(n instanceof Bs){n.subscribe(o=>{this.setCustomErrors(e,o),this.cd(!1)});return}this.setCustomErrors(e,n);return}this._errors=e,this.setErrors(this._errors)}setCustomErrors(e,r){let i=Array.isArray(r)&&r.length>0;i&&r.forEach(n=>{if(!n.message)throw new Error("The custom validator must contain a 'message' attribute to viewed error text");n.keyword=null}),this._errors=i?e.concat(...r):e,this.setErrors(this._errors)}setErrors(e=[],r=!0){let i=Array.isArray(e)?e:[e];if(r&&i&&!this.ui.onlyVisual){let n=this.widget&&this.widget.l.error||{};i=i.map(o=>{let a=o.keyword==null&&o.message?o.message:(this.ui.errors||{})[o.keyword]||this._options.errors[o.keyword]||n[o.keyword]||"";return a&&typeof a=="function"&&(a=a(o)),a&&(~a.indexOf("{")&&o.params&&(a=a.replace(/{([\.a-zA-Z0-9]+)}/g,(s,c)=>o.params[c]||"")),o.message=a),o})}this._errors=i,this._errorsChanges.next(i),this._parent&&this._parent.setParentAndPlatErrors(i,this.path)}setParentAndPlatErrors(e,r){this._objErrors[r]=e;let i=[];Object.keys(this._objErrors).forEach(n=>{let o=this.searchProperty(n);o&&!o.visible||i.push(...this._objErrors[n])}),this.setErrors(i,!1)}setVisible(e){return this._visible=e,this._visibilityChanges.next(e),e&&this.injector.get(Gt).onStable.pipe(Qs(1)).subscribe(()=>{this.resetValue(this.value,!0)}),this}_bindVisibility(){let e=this.ui.visibleIf;if(typeof e=="object"&&Object.keys(e).length===0)this.setVisible(!1);else if(e!=null){let r=[];for(let i in e)if(e.hasOwnProperty(i)){let n=this.searchProperty(i);if(n){let o=n.valueChanges.pipe(Vr(c=>{let p=e[i];if(typeof p=="function"){let d=p(c.value,n);if(typeof d=="object"){let m=O({show:!1,required:!1},d),b=this.parent?.schema.required;if(b&&this.propertyId){let C=b.findIndex(w=>w===this.propertyId);m.required?C===-1&&b.push(this.propertyId):C!==-1&&b.splice(C,1),this.ui._required=m.required}return m.show}return d}return p.indexOf("$ANY$")!==-1?c.value&&c.value.length>0:p.indexOf(c.value)!==-1})),a=n._visibilityChanges,s=_o([o,a]).pipe(Vr(c=>c[0]&&c[1]));r.push(s)}}_o(r).pipe(Vr(i=>this.ui.visibleIfLogical==="and"?i.every(n=>n):i.some(n=>n)),en()).subscribe(i=>this.setVisible(i))}}updateFeedback(e=""){this.ui.feedback=e,this.widget?.injector.get(Ar).formStatusChanges.next({status:e,hasFeedback:!!e}),this.cd(!0)}},Et=class t extends Ci{constructor(){super(...arguments),this.properties=null}getProperty(e){let r=e.indexOf(Se),i=r!==-1?e.substring(0,r):e,n=this.properties[i];if(n!==null&&r!==-1&&n instanceof t){let o=e.substring(r+1);n=n.getProperty(o)}return n}forEachChild(e){for(let r in this.properties)if(this.properties.hasOwnProperty(r)){let i=this.properties[r];e(i,r)}}forEachChildRecursive(e){this.forEachChild(r=>{e(r),r instanceof t&&r.forEachChildRecursive(e)})}_bindVisibility(){super._bindVisibility(),this._bindVisibilityRecursive()}_bindVisibilityRecursive(){this.forEachChildRecursive(e=>{e._bindVisibility()})}isRoot(){return this===this.root}};var Ur=class extends Et{get propertiesId(){return this._propertiesId}constructor(e,r,i,n,o,a,s,c,p){super(e,i,n,o,a,s,c,p),this.formPropertyFactory=r,this._propertiesId=[],this.createProperties()}createProperties(){this.properties={},this._propertiesId=[];let e;try{e=uc(Object.keys(this.schema.properties),this.ui.order)}catch(r){console.error(`Invalid ${this.schema.title||"root"} object field configuration:`,r)}e.forEach(r=>{this.properties[r]=this.formPropertyFactory.createProperty(this.schema.properties[r],this.ui[`$${r}`],(this.formData||{})[r],this,r),this._propertiesId.push(r)})}setValue(e,r){let i=this.properties;for(let n in e)e.hasOwnProperty(n)&&i[n]&&i[n].setValue(e[n],!0);this.cd(r),this.updateValueAndValidity({onlySelf:r,emitValueEvent:!0})}resetValue(e,r){e=e||this.schema.default||{};let i=this.properties;for(let n in this.schema.properties)this.schema.properties.hasOwnProperty(n)&&i[n].resetValue(e[n],!0);this.cd(r),this.updateValueAndValidity({onlySelf:r,emitValueEvent:!0})}_hasValue(){return this.value!=null&&!!Object.keys(this.value).length}_updateValue(){let e={};this.forEachChild((r,i)=>{r.visible&&r._hasValue()&&(e[i]=r.value)}),this._value=e}};var Hr=class extends Et{constructor(e,r,i,n,o,a,s,c,p){super(e,i,n,o,a,s,c,p),this.formPropertyFactory=r,this.properties=[]}getProperty(e){let r=e.indexOf(Se),i=+(r!==-1?e.substring(0,r):e),n=this.properties;if(isNaN(i)||i>=n.length)return;let o=e.substring(r+1);return n[i].getProperty(o)}setValue(e,r){this.properties=[],this.clearErrors(),this.resetProperties(e),this.cd(r),this.updateValueAndValidity({onlySelf:r,emitValueEvent:!0})}resetValue(e,r){this._value=e||this.schema.default||[],this.setValue(this._value,r)}_hasValue(){return!0}_updateValue(){let e=[];this.forEachChild(r=>{r.visible&&e.push(O(O({},this.widget?.cleanValue?null:r.formData),r.value))}),this._value=e}addProperty(e){let r=this.formPropertyFactory.createProperty(dr(this.schema.items),dr(this.ui.$items),e,this);return this.properties.push(r),r}resetProperties(e){for(let r of e)this.addProperty(r).resetValue(r,!0)}clearErrors(e){(e||this)._objErrors={}}add(e){let r=this.addProperty(e);return r.resetValue(e,!1),r}remove(e){let r=this.properties;this.clearErrors(),r.splice(e,1),r.forEach((i,n)=>{i.path=[i.parent.path,n].join(Se),this.clearErrors(i),i instanceof Ur&&i.forEachChild(o=>{o.updateValueAndValidity({emitValueEvent:!1})})}),r.length===0&&this.updateValueAndValidity()}};var Xt=class extends Ci{setValue(e,r){this._value=e,this.cd(r),this.updateValueAndValidity({onlySelf:r,emitValueEvent:!0})}resetValue(e,r){e==null&&(e=this.schema.default!==void 0?this.schema.default:this.fallbackValue()),this._value=e,this.updateValueAndValidity({onlySelf:r,emitValueEvent:!0}),this.widget&&(this.widget.reset(e),this.cd(r))}_hasValue(){return this.fallbackValue()!==this.value}_updateValue(){}};var Cn=class extends Xt{fallbackValue(){return null}};var wn=class extends Xt{fallbackValue(){return null}setValue(e,r){typeof e=="string"&&(e.length?e=e.indexOf(".")>-1?parseFloat(e):parseInt(e,10):e=void 0),this._value=e,this.cd(r),this.updateValueAndValidity({onlySelf:r,emitValueEvent:!0})}};var bn=class extends Xt{fallbackValue(){return null}setValue(e,r){this._value=e??"",this.cd(r),this.updateValueAndValidity({onlySelf:r,emitValueEvent:!0})}};var Br=class{constructor(e,r,i){this.injector=e,this.schemaValidatorFactory=r,this.options=qr(i)}createProperty(e,r,i,n=null,o){let a=null,s="";if(n)switch(s+=n.path,n.parent!==null&&(s+=Se),n.type){case"object":s+=o;break;case"array":s+=n.properties.length;break;default:throw new Error(`Instanciation of a FormProperty with an unknown parent type: ${n.type}`)}else s=Se;if(e.$ref){let c=vi(e,n.root.schema.definitions);a=this.createProperty(c,r,i,n,s)}else switch((o&&n.schema.required.indexOf(o.split(Se).pop())!==-1||r.showRequired===!0)&&(r._required=!0),e.title==null&&(e.title=o),(e.type==="string"||e.type==="number")&&!e.format&&!r.format?r.widget==="date"?r._format=e.type==="string"?this.options.uiDateStringFormat:this.options.uiDateNumberFormat:r.widget==="time"&&(r._format=e.type==="string"?this.options.uiTimeStringFormat:this.options.uiTimeNumberFormat):r._format=r.format,e.type){case"integer":case"number":a=new wn(this.injector,this.schemaValidatorFactory,e,r,i,n,s,this.options);break;case"string":a=new bn(this.injector,this.schemaValidatorFactory,e,r,i,n,s,this.options);break;case"boolean":a=new Cn(this.injector,this.schemaValidatorFactory,e,r,i,n,s,this.options);break;case"object":a=new Ur(this.injector,this,this.schemaValidatorFactory,e,r,i,n,s,this.options);break;case"array":a=new Hr(this.injector,this,this.schemaValidatorFactory,e,r,i,n,s,this.options);break;default:throw new TypeError(`Undefined type ${e.type}`)}return a.propertyId=o,a instanceof Et&&this.initializeRoot(a),a}initializeRoot(e){e._bindVisibility()}};var fr=class{constructor(){this.onDestroy=new Nr}destroy(){this.onDestroy.next(!0)}};var Hd=Hs(ts()),Bd=Hs(Ud());var wr=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=yi({token:e,factory:e.\u0275fac});let t=e;return t})(),no=(()=>{let e=class e extends wr{constructor(){if(super(),this.ngZone=Z(Gt),this.cogSrv=Z($t),!(typeof document=="object"&&document))return;this.options=qr(this.cogSrv);let i=this.options.ajv||{};this.ngZone.runOutsideAngular(()=>{this.ajv=new Hd.default(ge(O({allErrors:!0,loopEnum:50},i),{formats:O({"data-url":/^data:([a-z]+\/[a-z0-9-+.]+)?;name=(.*);base64,(.*)$/,color:gn.color,mobile:gn.mobile,"id-card":gn.idCard},i.formats)})),(0,Bd.default)(this.ajv)})}createValidatorFn(i,n){let o=[...this.options.ingoreKeywords,...n.ingoreKeywords||[]];return a=>{try{this.ngZone.runOutsideAngular(()=>this.ajv.validate(i,a))}catch{}let s=this.ajv.errors;return this.options&&o&&s&&(s=s.filter(c=>o.indexOf(c.keyword)===-1)),s}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=yi({token:e,factory:e.\u0275fac});let t=e;return t})();var Dt=class{constructor(){this._widgets={}}get widgets(){return this._widgets}setDefault(e){this.defaultWidget=e}register(e,r){this._widgets[e]=r}has(e){return this._widgets.hasOwnProperty(e)}getType(e){return this.has(e)?this._widgets[e]:this.defaultWidget}},oo=(()=>{let e=class e{constructor(){this.registry=Z(Dt)}createWidget(i,n){this.registry.has(n);let o=this.registry.getType(n);return i.createComponent(o)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=yi({token:e,factory:e.\u0275fac});let t=e;return t})();var H_=["target"];function B_(t,e){}function K_(t,e){t&1&&cl(0)}var G_=0,Ht=(()=>{let e=class e{constructor(){this.widgetFactory=Z(oo),this.terminator=Z(fr),this.destroy$=new Nr,this.widget=null,this.footer=null}onWidgetInstanciated(i){this.widget=i;let n=`_sf-${G_++}`,o=this.formProperty.ui;this.widget.formProperty=this.formProperty,this.widget.schema=this.formProperty.schema,this.widget.ui=o,this.widget.id=n,this.formProperty.widget=i}ngOnInit(){this.terminator.onDestroy.subscribe(()=>this.ngOnDestroy())}ngOnChanges(){let i=this.formProperty;this.ref=this.widgetFactory.createWidget(this.container,i.ui.widget||i.schema.type),this.onWidgetInstanciated(this.ref.instance)}ngOnDestroy(){let{destroy$:i}=this;i.next(),i.complete(),this.ref.destroy()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=te({type:e,selectors:[["sf-item"]],viewQuery:function(n,o){if(n&1&&ul(H_,7,ol),n&2){let a;dl(a=fl())&&(o.container=a.first)}},hostVars:2,hostBindings:function(n,o){n&2&&Ee("sf__item",!0)},inputs:{formProperty:"formProperty",footer:"footer"},exportAs:["sfItem"],features:[cn([Ar]),Kt],decls:3,vars:1,consts:[["target",""],[4,"ngTemplateOutlet"]],template:function(n,o){n&1&&I(0,B_,0,0,"ng-template",null,0,Ae)(2,K_,1,0,"ng-container",1),n&2&&(z(2),$("ngTemplateOutlet",o.footer))},dependencies:[je],encapsulation:2});let t=e;return t})();var Hi=(()=>{let e=class e{constructor(){this.el=Z(nn).nativeElement,this.render=Z(nl),this._inited=!1}init(){if(!this._inited||this.num==null||this.num<=0)return;let i=this.el,n=i.querySelector(".ant-row")||i;this.render.addClass(n,"sf__fixed");let o=n.querySelector(".ant-form-item-label"),a=n.querySelector(".ant-form-item-control-wrapper,.ant-form-item-control"),s=`${this.num}px`;o?(this.render.setStyle(o,"flex",`0 0 ${s}`),this.render.setStyle(a,"max-width",`calc(100% - ${s})`)):this.render.setStyle(a,"margin-left",s)}ngAfterViewInit(){this._inited=!0,this.init()}ngOnChanges(){this._inited&&this.init()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=At({type:e,selectors:[["","fixed-label",""]],inputs:{num:[2,"fixed-label","num",i=>hl(i,0)]},features:[on,Kt]});let t=e;return t})();var Q_=["*"];function Z_(t,e){t&1&&ln(0)}function Y_(t,e){if(t&1&&ie(0,"i",10),t&2){let r=v(5);$("nzType",r._btn.submit_icon.type)("nzTheme",r._btn.submit_icon.theme)("nzTwotoneColor",r._btn.submit_icon.twoToneColor)("nzIconfont",r._btn.submit_icon.iconfont)}}function eg(t,e){if(t&1&&ie(0,"i",10),t&2){let r=v(6);$("nzType",r._btn.reset_icon.type)("nzTheme",r._btn.reset_icon.theme)("nzTwotoneColor",r._btn.reset_icon.twoToneColor)("nzIconfont",r._btn.reset_icon.iconfont)}}function tg(t,e){if(t&1){let r=me();T(0,"button",12),Y("click",function(){R(r);let n=v(5);return F(n.reset(!0))}),I(1,eg,1,4,"i",10),ue(2),P()}if(t&2){let r=v(5);$("nzType",r._btn.reset_type)("nzSize",r._btn.render.size)("disabled",r.loading),z(),k(r._btn.reset_icon?1:-1),z(),ze(" ",r._btn.reset," ")}}function rg(t,e){if(t&1&&(T(0,"button",9),I(1,Y_,1,4,"i",10),ue(2),P(),I(3,tg,3,5,"button",11)),t&2){let r=v(4);$("nzType",r._btn.submit_type)("nzSize",r._btn.render.size)("nzLoading",r.loading)("disabled",r.liveValidate&&!r.valid),z(),k(r._btn.submit_icon?1:-1),z(),ze(" ",r._btn.submit," "),z(),k(r._btn.reset?3:-1)}}function ig(t,e){}function ng(t,e){if(t&1&&I(0,ig,0,0,"ng-template",4),t&2){v(4);let r=Oe(1);$("ngTemplateOutlet",r)}}function og(t,e){if(t&1&&(T(0,"nz-form-item",5)(1,"div",6)(2,"div",7)(3,"div",8),I(4,rg,4,7)(5,ng,1,1,null,4),P()()()()),t&2){let r=v(3);$("ngClass",r._btn.render.class)("fixed-label",r._btn.render.spanLabelFixed),z(),$("nzSpan",r.btnGrid.span)("nzOffset",r.btnGrid.offset)("nzXs",r.btnGrid.xs)("nzSm",r.btnGrid.sm)("nzMd",r.btnGrid.md)("nzLg",r.btnGrid.lg)("nzXl",r.btnGrid.xl)("nzXXl",r.btnGrid.xxl),z(3),k(r.button?4:5)}}function ag(t,e){if(t&1&&I(0,og,6,11,"nz-form-item",5),t&2){let r=v(2);k(r._btn&&r._btn.render?0:-1)}}function sg(t,e){}function lg(t,e){if(t&1&&I(0,sg,0,0,"ng-template",4),t&2){v(2);let r=Oe(1);$("ngTemplateOutlet",r)}}function cg(t,e){if(t&1&&I(0,ag,1,1)(1,lg,1,1,null,4),t&2){let r=v();k(r.button!=="none"?0:1)}}function ug(t,e){if(t&1&&ie(0,"sf-item",3),t&2){let r=v(),i=Oe(3);$("formProperty",r.rootProperty)("footer",i)}}function dg(t,e,r){return new Br(t,e,r)}var Ki=(()=>{let e=class e{get btnGrid(){return this._btn.render.grid}set mode(i){switch(i){case"search":this.layout="inline",this.firstVisual=!1,this.liveValidate=!1,this._btn&&(this._btn.submit=this._btn.search);break;case"edit":this.layout="horizontal",this.firstVisual=!1,this.liveValidate=!0,this._btn&&(this._btn.submit=this._btn.edit);break}this._mode=i}get mode(){return this._mode}get valid(){return this._valid}get value(){return this._item}getProperty(i){return this.rootProperty?.searchProperty(i)}getValue(i){return this.getProperty(i)?.value}setValue(i,n){let o=this.getProperty(i);if(!o)throw new Error(`Invalid path: ${i}`);return o.resetValue(n,!1),this}setDisabled(i,n){let o=this.getProperty(i);if(!o)throw new Error(`Invalid path: ${i}`);return o.schema.readOnly=n,o.widget.detectChanges(),this}setRequired(i,n){let o=this.getProperty(i);if(!o)throw new Error(`Invalid path: ${i}`);let a=i.split(Se).pop(),s=o.parent?.schema.required||[],c=s.findIndex(p=>p===a);return n?c===-1&&s.push(a):c!==-1&&s.splice(c,1),o.parent.schema.required=s,o.ui._required=n,o.widget.detectChanges(),this.validator({onlyRoot:!1}),this}updateFeedback(i,n=""){return this.getProperty(i)?.updateFeedback(n),this}onSubmit(i){i.preventDefault(),i.stopPropagation(),this.liveValidate||this.validator(),this.valid&&this.formSubmit.emit(this.value)}constructor(i){this.formPropertyFactory=Z(Br),this.terminator=Z(fr),this.dom=Z(dn),this.cdr=Z(un),this.localeSrv=Z(Sl),this.aclSrv=Z(yl),this.i18nSrv=Z(vl),this.platform=Z(Cl),this._renders=new Map,this._valid=!0,this._inited=!1,this.locale={},this.rootProperty=null,this.layout="horizontal",this.button={},this.liveValidate=!0,this.firstVisual=!0,this.onlyVisual=!1,this.compact=!1,this.loading=!1,this.disabled=!1,this.noColon=!1,this.cleanValue=!1,this.delay=!1,this.formValueChange=new Mr,this.formChange=new Mr,this.formSubmit=new Mr,this.formReset=new Mr,this.formError=new Mr,this.options=qr(i),this.liveValidate=this.options.liveValidate,this.firstVisual=this.options.firstVisual,this.autocomplete=this.options.autocomplete,this.delay=this.options.delay,this.localeSrv.change.pipe(yo()).subscribe(()=>{this.locale=this.localeSrv.getData("sf"),this._inited&&(this.validator({emitError:!1,onlyRoot:!1}),this.coverButtonProperty(),this.cdr.markForCheck())}),Gs(this.aclSrv.change,this.i18nSrv.change).pipe(Js(()=>this._inited),yo()).subscribe(()=>this.refreshSchema())}fanyi(i){return this.i18nSrv.fanyi(i)||i}inheritUI(i){["optionalHelp"].filter(n=>!!this._defUi[n]).forEach(n=>i[n]=O(O({},this._defUi[n]),i[n]))}coverProperty(){let i=this.layout==="horizontal",n=dr(this.schema),{definitions:o}=n,a=(s,c,p,d,m)=>{Array.isArray(s.required)||(s.required=[]),Object.keys(s.properties).forEach(b=>{let C="$",w=C+b,y=vi(s.properties[b],o),S=O(O({},y.ui),p[w]),g=O(O(O(O(ge(O(O({},this._defUi),d),{visibleIf:void 0,hidden:void 0,optional:void 0,optionalHelp:void 0,widget:y.type}),y.format&&this.options.formatMap[y.format]),typeof y.ui=="string"?{widget:y.ui}:null),!y.format&&!y.ui&&Array.isArray(y.enum)&&y.enum.length>0?{widget:"select"}:null),S);if(Object.keys(g).filter(D=>D.startsWith(C)).forEach(D=>delete g[D]),i?d.spanLabelFixed?S.spanLabelFixed||(g.spanLabelFixed=d.spanLabelFixed):(g.spanLabel||(g.spanLabel=typeof d.spanLabel>"u"?5:d.spanLabel),g.spanControl||(g.spanControl=typeof d.spanControl>"u"?19:d.spanControl),g.offsetControl||(g.offsetControl=typeof d.offsetControl>"u"?null:d.offsetControl)):(g.spanLabel=null,g.spanControl=null,g.offsetControl=null),this.layout==="inline"&&delete g.grid,this.layout!=="horizontal"&&(g.spanLabelFixed=null),g.spanLabelFixed!=null&&g.spanLabelFixed>0&&(g.spanLabel=null,g.spanControl=null),g.widget==="date"&&g.end!=null){let D=s.properties[g.end];D?D.ui=ge(O({},D.ui),{widget:g.widget,hidden:!0}):g.end=null}if(this.inheritUI(g),g.optionalHelp){typeof g.optionalHelp=="string"&&(g.optionalHelp={text:g.optionalHelp});let D=g.optionalHelp=O({text:"",icon:"question-circle",placement:"top",trigger:"hover",mouseEnterDelay:.15,mouseLeaveDelay:.1},g.optionalHelp);D.i18n&&(D.text=this.fanyi(D.i18n)),D.text||(g.optionalHelp=void 0)}if(g.i18n&&(y.title=this.fanyi(g.i18n)),g.descriptionI18n&&(y.description=this.fanyi(g.descriptionI18n)),y.description&&(g._description=this.dom.bypassSecurityTrustHtml(y.description)),g.hidden=typeof g.hidden=="boolean"?g.hidden:!1,g.hidden===!1&&g.acl&&this.aclSrv&&!this.aclSrv.can(g.acl)&&(g.hidden=!0),m[w]=g,delete y.ui,g.hidden===!0){let D=s.required.indexOf(b);D!==-1&&s.required.splice(D,1)}y.items&&(g.$items=O(O(O({},y.items.ui),p[w]),g.$items),a(y.items,y.items,p[w]?.$items??{},g.$items,g.$items)),y.properties&&Object.keys(y.properties).length&&a(y,s,p[w]||{},g,g)})};this.ui==null&&(this.ui={}),this._defUi=O(O(O({onlyVisual:this.options.onlyVisual,size:this.options.size,liveValidate:this.liveValidate},this.options.ui),n.ui),this.ui["*"]),this.onlyVisual===!0&&(this._defUi.onlyVisual=!0),this.layout==="inline"&&delete this._defUi.grid,this._ui=O({},this._defUi),a(n,n,this.ui,this.ui,this._ui),cc(n,this._ui),this._schema=n,delete n.ui,Wr(this._ui,"cover schema & ui",this._ui,n)}coverButtonProperty(){this._btn=O(O(O({render:{size:"default"}},this.locale),this.options.button),this.button);let i=Object.keys(this._ui).find(o=>o.startsWith("$")),n=this._btn.render;if(this.layout==="horizontal"){let o=i?this._ui[i]:this._defUi;n.grid||(n.grid={offset:o.spanLabel,span:o.spanControl}),n.spanLabelFixed==null&&(n.spanLabelFixed=o.spanLabelFixed),!n.class&&typeof o.spanLabelFixed=="number"&&o.spanLabelFixed>0&&(n.class="text-center")}else n.grid={};this._mode&&(this.mode=this._mode),Wr(this._ui,"button property",this._btn)}ngOnInit(){this.platform.isBrowser&&(this.validator(),this._inited=!0)}ngOnChanges(i){if(!this.platform.isBrowser)return;let n=["disabled","loading"];if(Object.keys(i).every(o=>n.includes(o))){this.cdr.detectChanges();return}this.delay||this.refreshSchema()}_addTpl(i,n){this._inited&&(this._renders.has(i)||(this._renders.set(i,n),this.attachCustomRender()))}attachCustomRender(){this._renders.forEach((i,n)=>{let o=this.rootProperty?.searchProperty(n);o!=null&&(o.ui._render=i)})}validator(i={emitError:!0,onlyRoot:!0}){if(this.rootProperty==null||!this.platform.isBrowser)return!1;let n=a=>{a._runValidation(),!(!(a instanceof Et)||!a.properties)&&(Array.isArray(a.properties)?a.properties.forEach(s=>n(s)):Object.keys(a.properties).forEach(s=>n(a.properties[s])))};i.onlyRoot?this.rootProperty._runValidation():n(this.rootProperty);let o=this.rootProperty.errors;return this._valid=!(o&&o.length),i.emitError&&!this._valid&&this.formError.emit(o),this.cdr.detectChanges(),this._valid}refreshSchema(i,n){if(!this.platform.isBrowser)return this;if(i&&(this.schema=i),n&&(this.ui=n),!this.schema||typeof this.schema.properties>"u")throw new Error("Invalid Schema");if(this.schema.ui&&typeof this.schema.ui=="string")throw new Error("Don't support string with root ui property");this.schema.type="object",this._formData=O({},this.formData),this._inited&&this.terminator.destroy(),this.cleanRootSub(),this.coverProperty(),this.coverButtonProperty(),this.rootProperty=this.formPropertyFactory.createProperty(this._schema,this._ui,this.formData),this.attachCustomRender(),this.cdr.detectChanges(),this.reset();let o=!0;return this.rootProperty.valueChanges.subscribe(a=>{if(this._item=O(O({},this.cleanValue?null:this.formData),a.value),o){o=!1;return}this.formChange.emit(this._item),this.formValueChange.emit({value:this._item,path:a.path,pathValue:a.pathValue})}),this.rootProperty.errorsChanges.subscribe(a=>{this._valid=!(a&&a.length),this.formError.emit(a),this.cdr.detectChanges()}),this}reset(i=!1){return this.rootProperty==null||!this.platform.isBrowser?this:(this.rootProperty.resetValue(this.formData,!1),Promise.resolve().then(()=>this.cdr.detectChanges()),i&&this.formReset.emit(this.value),this)}cleanRootSub(){this.rootProperty&&(this.rootProperty.errorsChanges.unsubscribe(),this.rootProperty.valueChanges.unsubscribe())}ngOnDestroy(){this.cleanRootSub(),this.terminator.destroy()}};e.\u0275fac=function(n){return new(n||e)(rl($t))},e.\u0275cmp=te({type:e,selectors:[["sf"],["","sf",""]],hostVars:16,hostBindings:function(n,o){n&2&&Ee("sf",!0)("sf__inline",o.layout==="inline")("sf__horizontal",o.layout==="horizontal")("sf__search",o.mode==="search")("sf__edit",o.mode==="edit")("sf__no-error",o.onlyVisual)("sf__no-colon",o.noColon)("sf__compact",o.compact)},inputs:{layout:"layout",schema:"schema",ui:"ui",formData:"formData",button:"button",liveValidate:[2,"liveValidate","liveValidate",bt],autocomplete:"autocomplete",firstVisual:[2,"firstVisual","firstVisual",bt],onlyVisual:[2,"onlyVisual","onlyVisual",bt],compact:[2,"compact","compact",bt],mode:"mode",loading:[2,"loading","loading",bt],disabled:[2,"disabled","disabled",bt],noColon:[2,"noColon","noColon",bt],cleanValue:[2,"cleanValue","cleanValue",bt],delay:[2,"delay","delay",bt]},outputs:{formValueChange:"formValueChange",formChange:"formChange",formSubmit:"formSubmit",formReset:"formReset",formError:"formError"},exportAs:["sf"],features:[cn([oo,{provide:Br,useFactory:dg,deps:[rn,wr,$t]},fr]),on,Kt],ngContentSelectors:Q_,decls:6,vars:3,consts:[["con",""],["btnTpl",""],["nz-form","",3,"submit","nzLayout"],[3,"formProperty","footer"],[3,"ngTemplateOutlet"],[1,"sf-btns",3,"ngClass","fixed-label"],["nz-col","",1,"ant-form-item-control",3,"nzSpan","nzOffset","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],[1,"ant-form-item-control-input"],[1,"ant-form-item-control-input-content"],["type","submit","nz-button","","data-type","submit",3,"nzType","nzSize","nzLoading","disabled"],["nz-icon","",3,"nzType","nzTheme","nzTwotoneColor","nzIconfont"],["type","button","nz-button","","data-type","reset",3,"nzType","nzSize","disabled"],["type","button","nz-button","","data-type","reset",3,"click","nzType","nzSize","disabled"]],template:function(n,o){if(n&1){let a=me();sn(),I(0,Z_,1,0,"ng-template",null,0,Ae)(2,cg,2,1,"ng-template",null,1,Ae),T(4,"form",2),Y("submit",function(c){return R(a),F(o.onSubmit(c))}),I(5,ug,1,2,"sf-item",3),P()}n&2&&(z(4),$("nzLayout",o.layout),Ze("autocomplete",o.autocomplete),z(),k(o.rootProperty?5:-1))},dependencies:[Fr,je,Pl,xl,Tl,pn,qe,fn,St,zt,ic,jr,rt,Ht,Hi],encapsulation:2,changeDetection:0});let t=e;return t})();var fg=["*"];function pg(t,e){if(t&1&&ie(0,"i",9),t&2){let r=v(4);$("nzTooltipTitle",r.oh.text)("nzTooltipPlacement",r.oh.placement)("nzTooltipTrigger",r.oh.trigger)("nzTooltipColor",r.oh.bgColor)("nzTooltipOverlayClassName",r.oh.overlayClassName)("nzTooltipOverlayStyle",r.oh.overlayStyle)("nzTooltipMouseEnterDelay",r.oh.mouseEnterDelay)("nzTooltipMouseLeaveDelay",r.oh.mouseLeaveDelay)("nzType",r.oh.icon)}}function mg(t,e){if(t&1&&(T(0,"span",8),ue(1),I(2,pg,1,9,"i",9),P()),t&2){let r=v(3);z(),ze(" ",r.ui.optional," "),z(),k(r.oh?2:-1)}}function hg(t,e){if(t&1&&(T(0,"label")(1,"span",7),ue(2),P(),I(3,mg,3,2,"span",8),P()),t&2){let r=v(2);Ee("ant-form-item-required",r.ui._required),Ze("for",r.id),z(2),Rr(r.t),z(),k(r.ui.optional||r.oh?3:-1)}}function _g(t,e){if(t&1&&(T(0,"div",0),I(1,hg,4,5,"label",6),P()),t&2){let r=v();$("nzSpan",r.ui.spanLabel),z(),k(r.t?1:-1)}}function gg(t,e){if(t&1&&(T(0,"div",4)(1,"div",10),ue(2),P()()),t&2){let r=v();$("@helpMotion",void 0),z(2),ze(" ",r.error," ")}}function yg(t,e){if(t&1&&ie(0,"div",5),t&2){let r=v();$("innerHTML",r.ui._description,yt)}}var ve=(()=>{let e=class e{constructor(){this.statusSrv=Z(Ar),this._showTitle=!1,this.title=null}set showTitle(i){this._showTitle=!!i}get t(){return this.title===null?this.schema.title:this.title}get oh(){return this.ui.optionalHelp}ngOnChanges(){let i=!!this.error;this.statusSrv.formStatusChanges.next({status:i?"error":"",hasFeedback:!!this.ui.feedback})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=te({type:e,selectors:[["sf-item-wrap"]],inputs:{id:"id",schema:"schema",ui:"ui",showError:"showError",error:"error",showTitle:"showTitle",title:"title"},features:[Kt],ngContentSelectors:fg,decls:8,vars:21,consts:[["nz-col","",1,"ant-form-item-label",3,"nzSpan"],["nz-col","",1,"ant-form-item-control",3,"nzSpan","nzOffset"],[1,"ant-form-item-control-input"],[1,"ant-form-item-control-input-content"],[1,"ant-form-item-explain","ant-form-item-explain-connected"],[1,"ant-form-item-extra",3,"innerHTML"],[3,"ant-form-item-required"],[1,"sf__label-text"],[1,"sf__optional"],["nz-tooltip","","nz-icon","",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipTrigger","nzTooltipColor","nzTooltipOverlayClassName","nzTooltipOverlayStyle","nzTooltipMouseEnterDelay","nzTooltipMouseLeaveDelay","nzType"],["role","alert",1,"ant-form-item-explain-error"]],template:function(n,o){n&1&&(sn(),T(0,"nz-form-item"),I(1,_g,2,2,"div",0),T(2,"div",1)(3,"div",2)(4,"div",3),ln(5),P()(),I(6,gg,3,2,"div",4)(7,yg,1,1,"div",5),P()()),n&2&&(an("width",o.ui.width,"px"),Ee("ant-form-item-has-error",o.showError)("ant-form-item-with-help",o.showError)("ant-form-item-has-success",o.ui.feedback==="success")("ant-form-item-has-warning",o.ui.feedback==="warning")("ant-form-item-has-error",o.ui.feedback==="error")("ant-form-item-is-validating",o.ui.feedback==="validating")("ant-form-item-has-feedback",o.ui.feedback),z(),k(o._showTitle?1:-1),z(),$("nzSpan",o.ui.spanControl)("nzOffset",o.ui.offsetControl),z(4),k(!o.ui.onlyVisual&&o.showError?6:-1),z(),k(o.schema.description?7:-1))},dependencies:[qe,St,zt,jr,rt,Jt],encapsulation:2,data:{animation:[zl]}});let t=e;return t})();var vg=(()=>{let e=class e{constructor(){this.table=Z(Ki),this.templateRef=Z(il)}ngOnInit(){this.table._addTpl(this.path.startsWith(Se)?this.path:Se+this.path,this.templateRef)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=At({type:e,selectors:[["","sf-template",""]],inputs:{path:[0,"sf-template","path"]}});let t=e;return t})();var ds=(()=>{let e=class e{constructor(){this.cd=Z(un),this.injector=Z(rn),this.sfItemComp=Z(Ht),this.sfComp=Z(Ki),this.showError=!1,this.id=""}get cls(){return this.ui.class||""}get disabled(){return!!(this.schema.readOnly===!0||this.sfComp.disabled)}get l(){return this.formProperty.root.widget.sfComp.locale}get oh(){return this.ui.optionalHelp}get dom(){return this.injector.get(dn)}get cleanValue(){return this.sfComp?.cleanValue}ngAfterViewInit(){this.formProperty.errorsChanges.pipe(Bt(this.sfItemComp.destroy$)).subscribe(i=>{if(i==null)return;Wr(this.ui,"errorsChanges",this.formProperty.path,i);let n=this.sfComp?.firstVisual;(n||!n&&this.sfComp?._inited)&&(this.showError=i.length>0,this.error=this.showError?i[0].message:"",this.cd.detectChanges())}),this.afterViewInit()}setValue(i){this.formProperty.setValue(i,!1),Wr(this.ui,"valueChanges",this.formProperty.path,this.formProperty)}get value(){return this.formProperty.value}detectChanges(i=!1){i?this.cd.markForCheck():this.formProperty.root.widget?.cd.markForCheck()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=At({type:e,hostVars:2,hostBindings:function(n,o){n&2&&al(o.cls)}});let t=e;return t})();var $e=(()=>{let e=class e extends ds{reset(i){}afterViewInit(){}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275dir=At({type:e,features:[ae]});let t=e;return t})(),Jd=(()=>{let e=class e extends ds{reset(i){}afterViewInit(){}ngAfterViewInit(){this.formProperty.errorsChanges.pipe(Bt(this.sfItemComp.destroy$)).subscribe(()=>this.cd.detectChanges())}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275dir=At({type:e,features:[ae]});let t=e;return t})(),Xd=(()=>{let e=class e extends ds{reset(i){}afterViewInit(){}ngAfterViewInit(){this.formProperty.errorsChanges.pipe(Bt(this.sfItemComp.destroy$)).subscribe(()=>this.cd.detectChanges())}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275dir=At({type:e,features:[ae]});let t=e;return t})();function wg(t,e){if(t&1&&ie(0,"i",8),t&2){let r=v(2);$("nzTooltipTitle",r.oh.text)("nzTooltipPlacement",r.oh.placement)("nzTooltipTrigger",r.oh.trigger)("nzTooltipOverlayClassName",r.oh.overlayClassName)("nzTooltipOverlayStyle",r.oh.overlayStyle)("nzTooltipMouseEnterDelay",r.oh.mouseEnterDelay)("nzTooltipMouseLeaveDelay",r.oh.mouseLeaveDelay)("nzType",r.oh.icon)}}function bg(t,e){if(t&1){let r=me();T(0,"div",0)(1,"label"),ue(2),T(3,"span",7),ue(4),I(5,wg,1,8,"i",8),P()(),T(6,"div",9)(7,"button",10),Y("click",function(){R(r);let n=v();return F(n.addItem())}),P()()()}if(t&2){let r=v();$("nzSpan",r.ui.spanLabel),z(),Ee("ant-form-item-required",r.ui.required),z(),ze(" ",r.schema.title," "),z(2),ze(" ",r.ui.optional," "),z(),k(r.oh?5:-1),z(2),$("nzType",r.addType)("disabled",r.addDisabled)("innerHTML",r.addTitle,yt)}}function $g(t,e){if(t&1){let r=me();T(0,"span",14),Y("click",function(){R(r);let n=v(2).index,o=v();return F(o.removeItem(n))}),ie(1,"i",15),P()}if(t&2){let r=v(3);Ze("title",r.removeTitle)}}function zg(t,e){if(t&1&&(T(0,"div",11)(1,"nz-card"),ie(2,"sf-item",12),I(3,$g,2,1,"span",13),P()()),t&2){let r=v(),i=r.$implicit,n=r.index,o=v();$("nzSpan",o.arraySpan),Ze("data-index",n),z(2),$("formProperty",i),z(),k(o.showRemove?3:-1)}}function Sg(t,e){if(t&1&&(sl(0),I(1,zg,4,4,"div",11),ll()),t&2){let r=e.$implicit;z(),k(r.visible&&!r.ui.hidden?1:-1)}}function Eg(t,e){if(t&1&&(T(0,"div",5),ue(1),P()),t&2){let r=v();z(),Rr(r.error)}}function xg(t,e){if(t&1&&ie(0,"div",6),t&2){let r=v();$("innerHTML",r.ui._description,yt)}}var fs=(()=>{let e=class e extends Jd{constructor(){super(...arguments),this.arraySpan=8}get addDisabled(){return this.disabled||this.schema.maxItems!=null&&this.formProperty.properties.length>=this.schema.maxItems}get showRemove(){return!(this.disabled||!this.removeTitle||this.schema.minItems!=null&&this.formProperty.properties.length<=this.schema.minItems)}ngOnInit(){let{grid:i,addTitle:n,addType:o,removable:a,removeTitle:s}=this.ui;i&&i.arraySpan&&(this.arraySpan=i.arraySpan),this.addTitle=this.dom.bypassSecurityTrustHtml(n||this.l.addText),this.addType=o||"dashed",this.removeTitle=a===!1?null:s||this.l.removeText}reValid(i){this.formProperty.updateValueAndValidity(O({onlySelf:!1,emitValueEvent:!1,emitValidator:!0},i))}addItem(){let i=this.formProperty.add({});this.reValid(),this.ui.add?.(i)}removeItem(i){let n=this.formProperty.properties[i].path;this.formProperty.remove(i),this.reValid({updatePath:n,emitValueEvent:!0}),this.ui.remove?.(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-array"]],hostVars:2,hostBindings:function(n,o){n&2&&Ee("sf__array",!0)},features:[ae],decls:8,vars:10,consts:[["nz-col","",1,"ant-form-item-label",3,"nzSpan"],["nz-col","",1,"ant-form-item-control-wrapper",3,"nzSpan","nzOffset"],[1,"ant-form-item-control"],["nz-row","",1,"sf__array-container"],[4,"ngFor","ngForOf"],[1,"ant-form-explain"],[1,"ant-form-extra",3,"innerHTML"],[1,"sf__optional"],["nz-tooltip","","nz-icon","",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipTrigger","nzTooltipOverlayClassName","nzTooltipOverlayStyle","nzTooltipMouseEnterDelay","nzTooltipMouseLeaveDelay","nzType"],[1,"sf__array-add"],["type","button","nz-button","",3,"click","nzType","disabled","innerHTML"],["nz-col","",1,"sf__array-item",3,"nzSpan"],[3,"formProperty"],[1,"sf__array-remove"],[1,"sf__array-remove",3,"click"],["nz-icon","","nzType","delete"]],template:function(n,o){n&1&&(T(0,"nz-form-item"),I(1,bg,8,9,"div",0),T(2,"div",1)(3,"div",2)(4,"div",3),I(5,Sg,2,1,"ng-container",4),P(),I(6,Eg,2,1,"div",5)(7,xg,1,1,"div",6),P()()()),n&2&&(Ee("ant-form-item-with-help",o.showError),z(),k(o.schema.title?1:-1),z(),$("nzSpan",o.ui.spanControl)("nzOffset",o.ui.offsetControl),z(),Ee("has-error",o.showError),z(2),$("ngForOf",o.formProperty.properties),z(),k(!o.ui.onlyVisual&&o.showError?6:-1),z(),k(o.schema.description?7:-1))},dependencies:[_l,pn,qe,fn,vn,St,zt,jr,rt,Jt,Ht],encapsulation:2});let t=e;return t})();var ps=(()=>{let e=class e extends $e{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-boolean"]],features:[ae],decls:2,vars:12,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngModelChange","ngModel","nzDisabled","nzSize","nzCheckedChildren","nzUnCheckedChildren","nzLoading"]],template:function(n,o){n&1&&(T(0,"sf-item-wrap",0)(1,"nz-switch",1),Y("ngModelChange",function(s){return o.setValue(s)}),P()()),n&2&&($("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(),$("ngModel",o.value)("nzDisabled",o.disabled)("nzSize",o.ui.size)("nzCheckedChildren",o.ui.checkedChildren)("nzUnCheckedChildren",o.ui.unCheckedChildren)("nzLoading",o.ui.loading))},dependencies:[Ie,De,ac,ve],encapsulation:2});let t=e;return t})();function Tg(t,e){if(t&1){let r=me();T(0,"label",3),wt("ngModelChange",function(n){R(r);let o=v(2);return Ct(o.allChecked,n)||(o.allChecked=n),F(n)}),Y("ngModelChange",function(){R(r);let n=v(2);return F(n.onAllChecked())}),ue(1),P()}if(t&2){let r=v(2);vt("ngModel",r.allChecked),$("nzIndeterminate",r.indeterminate),z(),ze(" ",r.ui.checkAllText||r.l.checkAllText," ")}}function Pg(t,e){if(t&1&&I(0,Tg,2,3,"label",2),t&2){let r=v();k(r.ui.checkAll?0:-1)}}function Og(t,e){if(t&1&&ie(0,"i",7),t&2){let r=v(3);$("nzTooltipTitle",r.oh.text)("nzTooltipPlacement",r.oh.placement)("nzTooltipTrigger",r.oh.trigger)("nzTooltipOverlayClassName",r.oh.overlayClassName)("nzTooltipOverlayStyle",r.oh.overlayStyle)("nzTooltipMouseEnterDelay",r.oh.mouseEnterDelay)("nzTooltipMouseLeaveDelay",r.oh.mouseLeaveDelay)("nzType",r.oh.icon)}}function Ig(t,e){if(t&1){let r=me();T(0,"label",5),Y("ngModelChange",function(n){R(r);let o=v(2);return F(o._setValue(n))}),ue(1),T(2,"span",6),ue(3),I(4,Og,1,8,"i",7),P()()}if(t&2){let r=v(2);$("nzDisabled",r.disabled)("ngModel",r.value),z(),ze(" ",r.schema.title," "),z(2),ze(" ",r.ui.optional," "),z(),k(r.oh?4:-1)}}function Dg(t,e){}function Ng(t,e){if(t&1){let r=me();I(0,Dg,0,0,"ng-template",9),T(1,"nz-checkbox-group",10),Y("ngModelChange",function(){R(r);let n=v(3);return F(n.notifySet())}),P()}if(t&2){let r=v(3),i=Oe(1);$("ngTemplateOutlet",i),z(),$("ngModel",r.data)}}function kg(t,e){}function Vg(t,e){if(t&1&&(T(0,"div",13),I(1,kg,0,0,"ng-template",9),P()),t&2){let r=v(4),i=Oe(1);$("nzSpan",r.grid_span),z(),$("ngTemplateOutlet",i)}}function Mg(t,e){if(t&1&&(T(0,"div",13)(1,"label",14),ue(2),P()()),t&2){let r=e.$implicit,i=v(4);$("nzSpan",i.grid_span),z(),$("nzValue",r.value)("ngModel",r.checked)("nzDisabled",r.disabled),z(),ze(" ",r.label," ")}}function Rg(t,e){if(t&1){let r=me();T(0,"nz-checkbox-wrapper",11),Y("nzOnChange",function(n){R(r);let o=v(3);return F(o.groupInGridChange(n))}),T(1,"div",12),I(2,Vg,2,2,"div",13),et(3,Mg,3,5,"div",13,Ye),P()()}if(t&2){let r=v(3);z(2),k(r.ui.checkAll?2:-1),z(),tt(r.data)}}function Fg(t,e){if(t&1&&I(0,Ng,2,2)(1,Rg,5,1,"nz-checkbox-wrapper",8),t&2){let r=v(2);k(r.grid_span===0?0:1)}}function Ag(t,e){if(t&1&&I(0,Ig,5,5,"label",4)(1,Fg,2,1),t&2){let r=v();k(r.data.length===0?0:1)}}var ms=(()=>{let e=class e extends $e{constructor(){super(...arguments),this.data=[],this.allChecked=!1,this.indeterminate=!1,this.labelTitle="",this.inited=!1}reset(i){this.inited=!1,Lr(this.schema,this.ui,i).subscribe(n=>{this.data=n,this.allChecked=!1,this.indeterminate=!1,this.labelTitle=n.length===0?"":this.schema.title;let{span:o}=this.ui;this.grid_span=o&&o>0?o:0,this.updateAllChecked(),this.inited=!0,this.detectChanges()})}_setValue(i){this.setValue(i),this.detectChanges(),this.notifyChange(i)}notifySet(){let i=this.data.filter(n=>n.checked);this.updateAllChecked().setValue(i.map(n=>n.value)),this.notifyChange(i)}groupInGridChange(i){this.data.forEach(n=>n.checked=i.indexOf(n.value)!==-1),this.notifySet()}onAllChecked(){this.data.forEach(i=>i.checked=this.allChecked),this.notifySet()}updateAllChecked(){return this.data.every(i=>i.checked!==!0)?(this.allChecked=!1,this.indeterminate=!1):this.data.every(i=>i.checked===!0)?(this.allChecked=!0,this.indeterminate=!1):this.indeterminate=!0,this.detectChanges(),this}notifyChange(i){this.ui.change&&this.ui.change(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-checkbox"]],features:[ae],decls:4,vars:8,consts:[["all",""],[3,"id","schema","ui","showError","error","showTitle","title"],["nz-checkbox","",1,"sf__checkbox-all","mr-sm",3,"ngModel","nzIndeterminate"],["nz-checkbox","",1,"sf__checkbox-all","mr-sm",3,"ngModelChange","ngModel","nzIndeterminate"],["nz-checkbox","",3,"nzDisabled","ngModel"],["nz-checkbox","",3,"ngModelChange","nzDisabled","ngModel"],[1,"sf__optional"],["nz-tooltip","","nz-icon","",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipTrigger","nzTooltipOverlayClassName","nzTooltipOverlayStyle","nzTooltipMouseEnterDelay","nzTooltipMouseLeaveDelay","nzType"],[1,"sf__checkbox-list"],[3,"ngTemplateOutlet"],[3,"ngModelChange","ngModel"],[1,"sf__checkbox-list",3,"nzOnChange"],["nz-row",""],["nz-col","",3,"nzSpan"],["nz-checkbox","",3,"nzValue","ngModel","nzDisabled"]],template:function(n,o){n&1&&(I(0,Pg,1,1,"ng-template",null,0,Ae),T(2,"sf-item-wrap",1),I(3,Ag,2,1),P()),n&2&&(z(2),$("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",!0)("title",o.labelTitle),z(),k(o.inited?3:-1))},dependencies:[je,Ie,De,qe,Dl,Nl,Il,St,zt,rt,Jt,ve],encapsulation:2});let t=e;return t})();var jg=(t,e,r)=>({$implicit:t,schema:e,ui:r});function qg(t,e){}var hs=(()=>{let e=class e extends $e{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-custom"]],features:[ae],decls:2,vars:12,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){n&1&&(T(0,"sf-item-wrap",0),I(1,qg,0,0,"ng-template",1),P()),n&2&&($("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(),$("ngTemplateOutlet",o.ui._render)("ngTemplateOutletContext",ml(8,jg,o,o.schema,o.ui)))},dependencies:[je,ve],encapsulation:2});let t=e;return t})();function Wg(t,e){if(t&1){let r=me();T(0,"nz-year-picker",5),wt("ngModelChange",function(n){R(r);let o=v();return Ct(o.displayValue,n)||(o.displayValue=n),F(n)}),Y("ngModelChange",function(n){R(r);let o=v();return F(o._change(n))})("nzOnOpenChange",function(n){R(r);let o=v();return F(o._openChange(n))}),P()}if(t&2){let r=v();$("nzId",r.id)("nzDisabled",r.disabled)("nzSize",r.ui.size)("nzFormat",r.displayFormat),vt("ngModel",r.displayValue),$("nzAllowClear",r.i.allowClear)("ngClass",r.ui.className)("nzDisabledDate",r.ui.disabledDate)("nzLocale",r.ui.locale)("nzPlaceHolder",r.ui.placeholder)("nzPopupStyle",r.ui.popupStyle)("nzDropdownClassName",r.ui.dropdownClassName)("nzRenderExtraFooter",r.ui.renderExtraFooter)("nzInputReadOnly",r.ui.inputReadOnly)("nzInline",r.ui.inline)}}function Lg(t,e){if(t&1){let r=me();T(0,"nz-month-picker",5),wt("ngModelChange",function(n){R(r);let o=v();return Ct(o.displayValue,n)||(o.displayValue=n),F(n)}),Y("ngModelChange",function(n){R(r);let o=v();return F(o._change(n))})("nzOnOpenChange",function(n){R(r);let o=v();return F(o._openChange(n))}),P()}if(t&2){let r=v();$("nzId",r.id)("nzDisabled",r.disabled)("nzSize",r.ui.size)("nzFormat",r.displayFormat),vt("ngModel",r.displayValue),$("nzAllowClear",r.i.allowClear)("ngClass",r.ui.className)("nzDisabledDate",r.ui.disabledDate)("nzLocale",r.ui.locale)("nzPlaceHolder",r.ui.placeholder)("nzPopupStyle",r.ui.popupStyle)("nzDropdownClassName",r.ui.dropdownClassName)("nzRenderExtraFooter",r.ui.renderExtraFooter)("nzInputReadOnly",r.ui.inputReadOnly)("nzInline",r.ui.inline)}}function Ug(t,e){if(t&1){let r=me();T(0,"nz-week-picker",6),wt("ngModelChange",function(n){R(r);let o=v();return Ct(o.displayValue,n)||(o.displayValue=n),F(n)}),Y("ngModelChange",function(n){R(r);let o=v();return F(o._change(n))})("nzOnOpenChange",function(n){R(r);let o=v();return F(o._openChange(n))}),P()}if(t&2){let r=v();$("nzId",r.id)("nzDisabled",r.disabled)("nzSize",r.ui.size)("nzFormat",r.displayFormat),vt("ngModel",r.displayValue),$("nzAllowClear",r.i.allowClear)("ngClass",r.ui.className)("nzDisabledDate",r.ui.disabledDate)("nzLocale",r.ui.locale)("nzPlaceHolder",r.ui.placeholder)("nzPopupStyle",r.ui.popupStyle)("nzDropdownClassName",r.ui.dropdownClassName)("nzInputReadOnly",r.ui.inputReadOnly)("nzInline",r.ui.inline)}}function Hg(t,e){if(t&1){let r=me();T(0,"nz-range-picker",7),wt("ngModelChange",function(n){R(r);let o=v();return Ct(o.displayValue,n)||(o.displayValue=n),F(n)}),Y("ngModelChange",function(n){R(r);let o=v();return F(o._change(n))})("nzOnOpenChange",function(n){R(r);let o=v();return F(o._openChange(n))})("nzOnOk",function(n){R(r);let o=v();return F(o._ok(n))}),P()}if(t&2){let r=v();$("nzId",r.id)("nzDisabled",r.disabled)("nzSize",r.ui.size)("nzFormat",r.displayFormat),vt("ngModel",r.displayValue),$("nzAllowClear",r.i.allowClear)("ngClass",r.ui.className)("nzDisabledDate",r.ui.disabledDate)("nzLocale",r.ui.locale)("nzPlaceHolder",r.ui.placeholder)("nzPopupStyle",r.ui.popupStyle)("nzDropdownClassName",r.ui.dropdownClassName)("nzDisabledTime",r.ui.disabledTime)("nzRenderExtraFooter",r.ui.renderExtraFooter)("nzRanges",r.ui.ranges)("nzShowTime",r.ui.showTime)("nzSeparator",r.ui.separator)("nzShowWeekNumber",r.ui.showWeekNumber||!1)("nzMode",r.ui.rangeMode)("nzInputReadOnly",r.ui.inputReadOnly)("nzInline",r.ui.inline)}}function Bg(t,e){if(t&1){let r=me();T(0,"nz-date-picker",8),wt("ngModelChange",function(n){R(r);let o=v();return Ct(o.displayValue,n)||(o.displayValue=n),F(n)}),Y("ngModelChange",function(n){R(r);let o=v();return F(o._change(n))})("nzOnOpenChange",function(n){R(r);let o=v();return F(o._openChange(n))})("nzOnOk",function(n){R(r);let o=v();return F(o._ok(n))}),P()}if(t&2){let r=v();$("nzId",r.id)("nzDisabled",r.disabled)("nzSize",r.ui.size)("nzFormat",r.displayFormat),vt("ngModel",r.displayValue),$("nzAllowClear",r.i.allowClear)("ngClass",r.ui.className)("nzDisabledDate",r.ui.disabledDate)("nzLocale",r.ui.locale)("nzPlaceHolder",r.ui.placeholder)("nzPopupStyle",r.ui.popupStyle)("nzDropdownClassName",r.ui.dropdownClassName)("nzDisabledTime",r.ui.disabledTime)("nzRenderExtraFooter",r.ui.renderExtraFooter)("nzShowTime",r.ui.showTime)("nzShowToday",r.i.showToday)("nzShowWeekNumber",r.ui.showWeekNumber||!1)("nzInputReadOnly",r.ui.inputReadOnly)("nzInline",r.ui.inline)}}var _s=(()=>{let e=class e extends $e{constructor(){super(...arguments),this.flatRange=!1,this.displayValue=null}ngOnInit(){let{mode:i,end:n,displayFormat:o,allowClear:a,showToday:s}=this.ui;if(this.mode=i||"date",this.flatRange=n!=null,this.startFormat=this.ui._format,this.flatRange){this.mode="range";let c=this.endProperty.ui;this.endFormat=c.format?c._format:this.startFormat}if(o)this.displayFormat=o;else switch(this.mode){case"year":this.displayFormat="yyyy";break;case"month":this.displayFormat="yyyy-MM";break;case"week":this.displayFormat="yyyy-ww";break}this.i={allowClear:Me(a,!0),showToday:Me(s,!0)}}reset(i){let n={formatString:this.startFormat,defaultValue:null};if(Array.isArray(i)?i=i.map(o=>hn(o,n)):i=hn(i,n),this.flatRange){let o=hn(this.endProperty.formData,{formatString:this.endFormat||this.startFormat,defaultValue:null});this.displayValue=i==null||o==null?[]:[i,o]}else this.displayValue=i;this.detectChanges(),this.displayValue&&setTimeout(()=>this._change(this.displayValue,!1))}_change(i,n=!0){if(n&&this.ui.change&&this.ui.change(i),i==null||Array.isArray(i)&&i.length<2){this.setValue(null),this.setEnd(null);return}let o=Array.isArray(i)?[mn(i[0],this.startFormat),mn(i[1],this.endFormat||this.startFormat)]:mn(i,this.startFormat);this.flatRange?(this.setValue(o[0]),this.setEnd(o[1])):this.setValue(o)}_openChange(i){this.ui.onOpenChange&&this.ui.onOpenChange(i)}_ok(i){this.ui.onOk&&this.ui.onOk(i)}get endProperty(){return this.formProperty.parent.properties[this.ui.end]}setEnd(i){this.flatRange&&(this.endProperty.setValue(i,!0),this.endProperty.updateValueAndValidity())}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-date"]],features:[ae],decls:6,vars:7,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"nzId","nzDisabled","nzSize","nzFormat","ngModel","nzAllowClear","ngClass","nzDisabledDate","nzLocale","nzPlaceHolder","nzPopupStyle","nzDropdownClassName","nzRenderExtraFooter","nzInputReadOnly","nzInline"],[3,"nzId","nzDisabled","nzSize","nzFormat","ngModel","nzAllowClear","ngClass","nzDisabledDate","nzLocale","nzPlaceHolder","nzPopupStyle","nzDropdownClassName","nzInputReadOnly","nzInline"],[3,"nzId","nzDisabled","nzSize","nzFormat","ngModel","nzAllowClear","ngClass","nzDisabledDate","nzLocale","nzPlaceHolder","nzPopupStyle","nzDropdownClassName","nzDisabledTime","nzRenderExtraFooter","nzRanges","nzShowTime","nzSeparator","nzShowWeekNumber","nzMode","nzInputReadOnly","nzInline"],[3,"nzId","nzDisabled","nzSize","nzFormat","ngModel","nzAllowClear","ngClass","nzDisabledDate","nzLocale","nzPlaceHolder","nzPopupStyle","nzDropdownClassName","nzDisabledTime","nzRenderExtraFooter","nzShowTime","nzShowToday","nzShowWeekNumber","nzInputReadOnly","nzInline"],[3,"ngModelChange","nzOnOpenChange","nzId","nzDisabled","nzSize","nzFormat","ngModel","nzAllowClear","ngClass","nzDisabledDate","nzLocale","nzPlaceHolder","nzPopupStyle","nzDropdownClassName","nzRenderExtraFooter","nzInputReadOnly","nzInline"],[3,"ngModelChange","nzOnOpenChange","nzId","nzDisabled","nzSize","nzFormat","ngModel","nzAllowClear","ngClass","nzDisabledDate","nzLocale","nzPlaceHolder","nzPopupStyle","nzDropdownClassName","nzInputReadOnly","nzInline"],[3,"ngModelChange","nzOnOpenChange","nzOnOk","nzId","nzDisabled","nzSize","nzFormat","ngModel","nzAllowClear","ngClass","nzDisabledDate","nzLocale","nzPlaceHolder","nzPopupStyle","nzDropdownClassName","nzDisabledTime","nzRenderExtraFooter","nzRanges","nzShowTime","nzSeparator","nzShowWeekNumber","nzMode","nzInputReadOnly","nzInline"],[3,"ngModelChange","nzOnOpenChange","nzOnOk","nzId","nzDisabled","nzSize","nzFormat","ngModel","nzAllowClear","ngClass","nzDisabledDate","nzLocale","nzPlaceHolder","nzPopupStyle","nzDropdownClassName","nzDisabledTime","nzRenderExtraFooter","nzShowTime","nzShowToday","nzShowWeekNumber","nzInputReadOnly","nzInline"]],template:function(n,o){if(n&1&&(T(0,"sf-item-wrap",0),I(1,Wg,1,15,"nz-year-picker",1)(2,Lg,1,15,"nz-month-picker",1)(3,Ug,1,14,"nz-week-picker",2)(4,Hg,1,21,"nz-range-picker",3)(5,Bg,1,19,"nz-date-picker",4),P()),n&2){let a;$("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(),k((a=o.mode)==="year"?1:a==="month"?2:a==="week"?3:a==="range"?4:5)}},dependencies:[Fr,Ie,De,Xl,Zl,Ql,ec,Yl,ve],encapsulation:2});let t=e;return t})();var Kg=t=>({"ant-input-number__hide-step":t}),so=(()=>{let e=class e extends $e{constructor(){super(...arguments),this.formatter=i=>i,this.parser=i=>i,this.width=""}ngOnInit(){let{minimum:i,exclusiveMinimum:n,maximum:o,exclusiveMaximum:a,multipleOf:s,type:c}=this.schema;this.step=s||1,typeof i<"u"&&(this.min=n?i+this.step:i),typeof o<"u"&&(this.max=a?o-this.step:o),c==="integer"&&(this.min=Math.trunc(this.min),this.max=Math.trunc(this.max),this.step=Math.trunc(this.step));let p=this.ui;p.prefix!=null&&(p.formatter=d=>d==null?"":`${p.prefix} ${d}`,p.parser=d=>d.replace(`${p.prefix} `,"")),p.unit!=null&&(p.formatter=d=>d==null?"":`${d} ${p.unit}`,p.parser=d=>d.replace(` ${p.unit}`,"")),p.formatter&&(this.formatter=p.formatter),p.parser&&(this.parser=p.parser),this.width=typeof p.widgetWidth=="number"?`${p.widgetWidth}px`:p.widgetWidth??"90px"}_setValue(i){this.setValue(this.schema.type==="integer"?Math.floor(i):i),this.ui.change&&this.ui.change(this.value)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-number"]],features:[ae],decls:2,vars:22,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngModelChange","nzId","ngModel","nzDisabled","nzSize","nzMin","nzMax","nzStep","nzFormatter","nzParser","nzPrecision","nzPlaceHolder","ngClass"]],template:function(n,o){n&1&&(T(0,"sf-item-wrap",0)(1,"nz-input-number",1),Y("ngModelChange",function(s){return o._setValue(s)}),P()()),n&2&&($("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(),an("width",o.width),$("nzId",o.id)("ngModel",o.value)("nzDisabled",o.disabled)("nzSize",o.ui.size)("nzMin",o.min)("nzMax",o.max)("nzStep",o.step)("nzFormatter",o.formatter)("nzParser",o.parser)("nzPrecision",o.ui.precision)("nzPlaceHolder",o.ui.placeholder||"")("ngClass",pl(20,Kg,o.ui.hideStep)))},dependencies:[Fr,Ie,De,Gl,ve],encapsulation:2});let t=e;return t})();var Gg=()=>[],Jg=()=>({$implicit:!0});function Xg(t,e){if(t&1&&(T(0,"div",4),ue(1),P()),t&2){let r=v(2);z(),Rr(r.title)}}function Qg(t,e){if(t&1&&(T(0,"div",6),ie(1,"sf-item",7),P()),t&2){let r=v().$implicit;$("nzSpan",r.grid.span)("nzOffset",r.grid.offset)("nzXs",r.grid.xs)("nzSm",r.grid.sm)("nzMd",r.grid.md)("nzLg",r.grid.lg)("nzXl",r.grid.xl)("nzXXl",r.grid.xxl),z(),$("formProperty",r.property)("fixed-label",r.spanLabelFixed)}}function Zg(t,e){if(t&1&&I(0,Qg,2,10,"div",6),t&2){let r=e.$implicit;k(r.property.visible&&r.show?0:-1)}}function Yg(t,e){if(t&1&&(T(0,"div",5),et(1,Zg,1,1,null,null,Ye),P()),t&2){let r=v(2);$("nzGutter",r.grid.gutter),z(),tt(r.list)}}function ey(t,e){if(t&1&&ie(0,"sf-item",7),t&2){let r=v().$implicit;$("formProperty",r.property)("fixed-label",r.spanLabelFixed)}}function ty(t,e){if(t&1&&I(0,ey,1,2,"sf-item",7),t&2){let r=e.$implicit;k(r.property.visible&&r.show?0:-1)}}function ry(t,e){if(t&1&&et(0,ty,1,1,null,null,Ye),t&2){let r=v(2);tt(r.list)}}function iy(t,e){if(t&1&&I(0,Xg,2,1,"div",4)(1,Yg,3,1,"div",5)(2,ry,2,0),t&2){let r=e.$implicit,i=v();k(!r&&i.title?0:-1),z(),k(i.grid?1:2)}}function ny(t,e){if(t&1&&ie(0,"i",11),t&2){let r=v(3);$("nzType",r.expand?"down":"up")}}function oy(t,e){if(t&1&&ie(0,"i",13),t&2){let r=v(4);$("nzTooltipTitle",r.oh.text)("nzTooltipPlacement",r.oh.placement)("nzTooltipTrigger",r.oh.trigger)("nzTooltipColor",r.oh.bgColor)("nzTooltipOverlayClassName",r.oh.overlayClassName)("nzTooltipOverlayStyle",r.oh.overlayStyle)("nzTooltipMouseEnterDelay",r.oh.mouseEnterDelay)("nzTooltipMouseLeaveDelay",r.oh.mouseLeaveDelay)("nzType",r.oh.icon)}}function ay(t,e){if(t&1&&(T(0,"span",12),ue(1),I(2,oy,1,9,"i",13),P()),t&2){let r=v(3);z(),ze(" ",r.ui.optional," "),z(),k(r.oh?2:-1)}}function sy(t,e){if(t&1){let r=me();T(0,"div",10),Y("click",function(){R(r);let n=v(2);return F(n.changeExpand())}),I(1,ny,1,1,"i",11),ue(2),I(3,ay,3,2,"span",12),P()}if(t&2){let r=v(2);Ee("point",r.showExpand),z(),k(r.showExpand?1:-1),z(),ze(" ",r.title," "),z(),k(r.ui.optional||r.oh?3:-1)}}function ly(t,e){}function cy(t,e){if(t&1&&(T(0,"nz-card",8),I(1,sy,4,5,"ng-template",null,1,Ae)(3,ly,0,0,"ng-template",9),P()),t&2){let r=Oe(2),i=v(),n=Oe(1);Ee("sf__object-card-fold",!i.expand),$("nzTitle",r)("nzExtra",i.ui.cardExtra)("nzSize",i.ui.cardSize||"small")("nzActions",i.ui.cardActions||go(11,Gg))("nzBodyStyle",i.ui.cardBodyStyle)("nzBordered",i.ui.cardBordered||!0)("nzBorderless",i.ui.cardBorderless||!1),z(3),$("ngTemplateOutlet",n)("ngTemplateOutletContext",go(12,Jg))}}function uy(t,e){}function dy(t,e){if(t&1&&I(0,uy,0,0,"ng-template",3),t&2){v();let r=Oe(1);$("ngTemplateOutlet",r)}}var gs=(()=>{let e=class e extends Xd{constructor(){super(...arguments),this.type="default",this.list=[],this.showExpand=!0,this.expand=!0}ngOnInit(){let{formProperty:i,ui:n}=this,{grid:o,showTitle:a,type:s}=n;this.showExpand=Me(n.showExpand,!0),this.expand=Me(n.expand,!0),this.type=s??"default",(this.type==="card"||!i.isRoot()&&!(i.parent instanceof Hr)&&a===!0)&&(this.title=this.schema.title),this.grid=o;let c=[];for(let p of i.propertiesId){let d=i.properties[p],m={property:d,grid:d.ui.grid||o||{},spanLabelFixed:d.ui.spanLabelFixed,show:d.ui.hidden===!1};c.push(m)}this.list=c}changeExpand(){this.showExpand&&(this.expand=!this.expand,this.detectChanges(!0))}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-object"]],features:[ae],decls:4,vars:1,consts:[["default",""],["cardTitleTpl",""],[1,"sf__object-card",3,"nzTitle","nzExtra","nzSize","nzActions","nzBodyStyle","nzBordered","nzBorderless","sf__object-card-fold"],[3,"ngTemplateOutlet"],[1,"sf__title"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan","nzOffset","nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],[3,"formProperty","fixed-label"],[1,"sf__object-card",3,"nzTitle","nzExtra","nzSize","nzActions","nzBodyStyle","nzBordered","nzBorderless"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"click"],["nz-icon","",1,"mr-xs","text-xs",3,"nzType"],[1,"sf__optional"],["s","","nz-tooltip","","nz-icon","",3,"nzTooltipTitle","nzTooltipPlacement","nzTooltipTrigger","nzTooltipColor","nzTooltipOverlayClassName","nzTooltipOverlayStyle","nzTooltipMouseEnterDelay","nzTooltipMouseLeaveDelay","nzType"]],template:function(n,o){n&1&&I(0,iy,3,2,"ng-template",null,0,Ae)(2,cy,4,13,"nz-card",2)(3,dy,1,1,null,3),n&2&&(z(2),k(o.type==="card"?2:3))},dependencies:[je,qe,vn,St,zt,rt,Jt,Ht,Hi],encapsulation:2});let t=e;return t})();function fy(t,e){if(t&1&&(T(0,"label",2),ie(1,"span",3),P()),t&2){let r=e.$implicit,i=v(2);$("nzValue",r.value)("nzDisabled",i.disabled||r.disabled),z(),$("innerHTML",r.label,yt)}}function py(t,e){if(t&1&&et(0,fy,2,3,"label",2,Ye),t&2){let r=v();tt(r.data)}}function my(t,e){if(t&1&&(T(0,"label",4),ie(1,"span",3),P()),t&2){let r=e.$implicit,i=v(2);$("nzValue",r.value)("nzDisabled",i.disabled||r.disabled),z(),$("innerHTML",r.label,yt)}}function hy(t,e){if(t&1&&et(0,my,2,3,"label",4,Ye),t&2){let r=v();tt(r.data)}}var ys=(()=>{let e=class e extends $e{constructor(){super(...arguments),this.data=[]}reset(i){this.styleType=(this.ui.styleType||"default")==="default",Lr(this.schema,this.ui,i).subscribe(n=>{this.data=n,this.detectChanges()})}_setValue(i){this.setValue(i),this.ui.change&&this.ui.change(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-radio"]],features:[ae],decls:4,vars:11,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngModelChange","nzSize","nzName","ngModel","nzButtonStyle"],["nz-radio","",3,"nzValue","nzDisabled"],[3,"innerHTML"],["nz-radio-button","",3,"nzValue","nzDisabled"]],template:function(n,o){n&1&&(T(0,"sf-item-wrap",0)(1,"nz-radio-group",1),Y("ngModelChange",function(s){return o._setValue(s)}),I(2,py,2,0)(3,hy,2,0),P()()),n&2&&($("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(),$("nzSize",o.ui.size)("nzName",o.id)("ngModel",o.value)("nzButtonStyle",o.ui.buttonStyle||"outline"),z(),k(o.styleType?2:3))},dependencies:[Ie,De,Ml,Vl,ve],encapsulation:2});let t=e;return t})();function _y(t,e){if(t&1&&ie(0,"nz-option",3),t&2){let r=e.$implicit;$("nzLabel",r.label)("nzValue",r.value)("nzHide",r.hide)("nzDisabled",r.disabled)}}function gy(t,e){if(t&1&&et(0,_y,1,4,"nz-option",3,Ye),t&2){let r=v();tt(r.data)}}function yy(t,e){if(t&1&&ie(0,"nz-option",5),t&2){let r=e.$implicit;$("nzLabel",r.label)("nzValue",r.value)("nzDisabled",r.disabled)("nzHide",r.hide)}}function vy(t,e){if(t&1&&(T(0,"nz-option-group",4),et(1,yy,1,4,"nz-option",5,Ye),P()),t&2){let r=e.$implicit;$("nzLabel",r.label),z(),tt(r.children)}}function Cy(t,e){if(t&1&&et(0,vy,3,1,"nz-option-group",4,Ye),t&2){let r=v();tt(r.data)}}function wy(t,e){if(t&1&&(T(0,"nz-option",2),ie(1,"i",6),ue(2),P()),t&2){let r=v();z(2),ze(" ",r.ui.searchLoadingText," ")}}var vs=(()=>{let e=class e extends $e{constructor(){super(...arguments),this.search$=new Nr,this.data=[],this.hasGroup=!1,this.loading=!1}checkGroup(i){this.hasGroup=(i||[]).filter(n=>n.group===!0).length>0}ngOnInit(){let{autoClearSearchValue:i,borderless:n,autoFocus:o,dropdownMatchSelectWidth:a,serverSearch:s,maxMultipleCount:c,mode:p,showSearch:d,tokenSeparators:m,maxTagCount:b,compareWith:C,optionHeightPx:w,optionOverflowSize:y,showArrow:S}=this.ui;this.i={autoClearSearchValue:Me(i,!0),borderless:Me(n,!1),autoFocus:Me(o,!1),dropdownMatchSelectWidth:Me(a,!0),serverSearch:Me(s,!1),maxMultipleCount:c||1/0,mode:p||"default",showSearch:Me(d,!0),tokenSeparators:m||[],maxTagCount:b||void 0,optionHeightPx:w||32,optionOverflowSize:y||8,showArrow:typeof S!="boolean"?void 0:S,compareWith:C||((D,A)=>D===A)};let g=this.ui.onSearch;g&&this.search$.pipe(Bt(this.sfItemComp.destroy$),en(),Yi(this.ui.searchDebounceTime||300),tn(D=>g(D)),Xs(()=>[])).subscribe(D=>{this.data=D,this.checkGroup(D),this.loading=!1,this.detectChanges()})}reset(i){let n=this.ui.onSearch;Lr(this.schema,this.ui,i).subscribe(o=>{this._value=i,n==null&&(this.data=o),this.checkGroup(o),this.detectChanges()}),i&&n!=null&&this.search$.next(i)}change(i){this.ui.change&&this.ui.change(i,this.getOrgData(i)),this.setValue(i??void 0)}getOrgData(i){let n=this.injector.get(lc);return Array.isArray(i)?i.map(o=>n.findTree(this.data,a=>a.value===o)):n.findTree(this.data,o=>o.value===i)}openChange(i){this.ui.openChange&&this.ui.openChange(i)}scrollToBottom(){this.ui.scrollToBottom&&this.ui.scrollToBottom()}onSearch(i){this.ui.onSearch&&(this.loading=!0,this.search$.next(i))}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-select"]],features:[ae],decls:5,vars:39,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngModelChange","nzOpenChange","nzOnSearch","nzScrollToBottom","nzId","nzDisabled","ngModel","nzSize","nzPlaceHolder","nzNotFoundContent","nzDropdownClassName","nzAllowClear","nzDropdownStyle","nzCustomTemplate","nzSuffixIcon","nzRemoveIcon","nzClearIcon","nzMenuItemSelectedIcon","nzMaxTagPlaceholder","nzDropdownRender","nzAutoClearSearchValue","nzBorderless","nzAutoFocus","nzDropdownMatchSelectWidth","nzServerSearch","nzMaxMultipleCount","nzMode","nzShowSearch","nzShowArrow","nzTokenSeparators","nzMaxTagCount","compareWith","nzOptionHeightPx","nzOptionOverflowSize"],["nzDisabled","","nzCustomContent",""],[3,"nzLabel","nzValue","nzHide","nzDisabled"],[3,"nzLabel"],[3,"nzLabel","nzValue","nzDisabled","nzHide"],["nz-icon","","nzType","loading"]],template:function(n,o){n&1&&(T(0,"sf-item-wrap",0)(1,"nz-select",1),wt("ngModelChange",function(s){return Ct(o._value,s)||(o._value=s),s}),Y("ngModelChange",function(s){return o.change(s)})("nzOpenChange",function(s){return o.openChange(s)})("nzOnSearch",function(s){return o.onSearch(s)})("nzScrollToBottom",function(){return o.scrollToBottom()}),I(2,gy,2,0)(3,Cy,2,0)(4,wy,3,1,"nz-option",2),P()()),n&2&&($("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(),$("nzId",o.id)("nzDisabled",o.disabled),vt("ngModel",o._value),$("nzSize",o.ui.size)("nzPlaceHolder",o.ui.placeholder)("nzNotFoundContent",o.ui.notFoundContent)("nzDropdownClassName",o.ui.dropdownClassName)("nzAllowClear",o.ui.allowClear)("nzDropdownStyle",o.ui.dropdownStyle)("nzCustomTemplate",o.ui.customTemplate)("nzSuffixIcon",o.ui.suffixIcon)("nzRemoveIcon",o.ui.removeIcon)("nzClearIcon",o.ui.clearIcon)("nzMenuItemSelectedIcon",o.ui.menuItemSelectedIcon)("nzMaxTagPlaceholder",o.ui.maxTagPlaceholder)("nzDropdownRender",o.ui.dropdownRender)("nzAutoClearSearchValue",o.i.autoClearSearchValue)("nzBorderless",o.i.borderless)("nzAutoFocus",o.i.autoFocus)("nzDropdownMatchSelectWidth",o.i.dropdownMatchSelectWidth)("nzServerSearch",o.i.serverSearch)("nzMaxMultipleCount",o.i.maxMultipleCount)("nzMode",o.i.mode)("nzShowSearch",o.i.showSearch)("nzShowArrow",o.i.showArrow)("nzTokenSeparators",o.i.tokenSeparators)("nzMaxTagCount",o.i.maxTagCount)("compareWith",o.i.compareWith)("nzOptionHeightPx",o.i.optionHeightPx)("nzOptionOverflowSize",o.i.optionOverflowSize),z(),k(!o.loading&&!o.hasGroup?2:-1),z(),k(!o.loading&&o.hasGroup?3:-1),z(),k(o.loading?4:-1))},dependencies:[Ie,De,qe,rt,jl,ql,Al,ve],encapsulation:2});let t=e;return t})();function $y(t,e){if(t&1){let r=me();T(0,"input",4),Y("ngModelChange",function(n){R(r);let o=v();return F(o.change(n))})("keyup.enter",function(n){R(r);let o=v();return F(o.enter(n))})("focus",function(n){R(r);let o=v();return F(o.focus(n))})("blur",function(n){R(r);let o=v();return F(o.blur(n))}),P()}if(t&2){let r=v();$("disabled",r.disabled)("nzSize",r.ui.size)("nzBorderless",r.ui.borderless)("ngModel",r.value),Ze("id",r.id)("disabled",r.disabled)("maxLength",r.schema.maxLength||null)("type",r.ui.type||"text")("placeholder",r.ui.placeholder)("autocomplete",r.ui.autocomplete)("autoFocus",r.ui.autofocus)}}function zy(t,e){}function Sy(t,e){if(t&1&&(T(0,"nz-input-group",2),I(1,zy,0,0,"ng-template",3),P()),t&2){let r=v(),i=Oe(2);$("nzAddOnBefore",r.ui.addOnBefore)("nzAddOnAfter",r.ui.addOnAfter)("nzAddOnBeforeIcon",r.ui.addOnBeforeIcon)("nzAddOnAfterIcon",r.ui.addOnAfterIcon)("nzPrefix",r.ui.prefix)("nzPrefixIcon",r.ui.prefixIcon)("nzSuffix",r.ui.suffix)("nzSuffixIcon",r.ui.suffixIcon),z(),$("ngTemplateOutlet",i)}}function Ey(t,e){}function xy(t,e){if(t&1&&I(0,Ey,0,0,"ng-template",3),t&2){v();let r=Oe(2);$("ngTemplateOutlet",r)}}var lo=(()=>{let e=class e extends $e{constructor(){super(...arguments),this.change$=null}ngOnInit(){let{addOnAfter:i,addOnAfterIcon:n,addOnBefore:o,addOnBeforeIcon:a,prefix:s,prefixIcon:c,suffix:p,suffixIcon:d,autofocus:m}=this.ui;this.type=i||o||n||a||s||c||p||d?"addon":"",m===!0&&setTimeout(()=>{this.injector.get(nn).nativeElement.querySelector(`#${this.id}`).focus()},20),this.initChange()}reset(i){!i&&this.schema.format==="color"&&this.setValue("#000000")}initChange(){let i=this.ui.changeDebounceTime,n=this.ui.change;if(i==null||i<=0||n==null)return;this.change$=new kr(this.value);let o=this.change$.asObservable().pipe(Yi(i),Bt(this.sfItemComp.destroy$));this.ui.changeMap!=null&&(o=o.pipe(tn(this.ui.changeMap))),o.subscribe(a=>n(a))}change(i){if(this.setValue(i),this.change$!=null){this.change$.next(i);return}this.ui.change&&this.ui.change(i)}focus(i){this.ui.focus&&this.ui.focus(i)}blur(i){this.ui.blur&&this.ui.blur(i)}enter(i){this.ui.enter&&this.ui.enter(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-string"]],features:[ae],decls:5,vars:7,consts:[["ipt",""],[3,"id","schema","ui","showError","error","showTitle"],[3,"nzAddOnBefore","nzAddOnAfter","nzAddOnBeforeIcon","nzAddOnAfterIcon","nzPrefix","nzPrefixIcon","nzSuffix","nzSuffixIcon"],[3,"ngTemplateOutlet"],["nz-input","",3,"ngModelChange","keyup.enter","focus","blur","disabled","nzSize","nzBorderless","ngModel"]],template:function(n,o){n&1&&(T(0,"sf-item-wrap",1),I(1,$y,1,11,"ng-template",null,0,Ae)(3,Sy,2,9,"nz-input-group",2)(4,xy,1,1,null,3),P()),n&2&&($("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(3),k(o.type==="addon"?3:4))},dependencies:[je,_n,Ie,De,qe,yn,Ul,Ll,ve],encapsulation:2});let t=e;return t})();function Ty(t,e){if(t&1&&ie(0,"span",1),t&2){let r=v();$("innerHTML",r.text,yt)}}function Py(t,e){if(t&1&&ie(0,"span",2),t&2){let r=v();$("innerText",r.text)}}var Cs=(()=>{let e=class e extends $e{constructor(){super(...arguments),this.text=""}ngOnInit(){this.ui._required=!1,this.ui.html=Me(this.ui.html,!0)}reset(i){this.text=i||this.ui.defaultText||"-"}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-text"]],features:[ae],decls:3,vars:9,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"innerHTML"],[3,"innerText"]],template:function(n,o){n&1&&(T(0,"sf-item-wrap",0),I(1,Ty,1,1,"span",1)(2,Py,1,1,"span",2),P()),n&2&&(Ee("sf__text-html",o.ui.html),$("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(),k(o.ui.html?1:2))},dependencies:[ve],encapsulation:2});let t=e;return t})();function Oy(t,e){if(t&1){let r=me();T(0,"textarea",4),Y("ngModelChange",function(n){R(r);let o=v();return F(o.change(n))})("focus",function(n){R(r);let o=v();return F(o.focus(n))})("blur",function(n){R(r);let o=v();return F(o.blur(n))}),ue(1,"      "),P()}if(t&2){let r=v();$("disabled",r.disabled)("nzSize",r.ui.size)("ngModel",r.value)("nzAutosize",r.autosize)("nzBorderless",r.ui.borderless),Ze("id",r.id)("disabled",r.disabled)("maxLength",r.schema.maxLength||null)("placeholder",r.ui.placeholder)}}function Iy(t,e){if(t&1){let r=me();T(0,"nz-textarea-count",2)(1,"textarea",4),Y("ngModelChange",function(n){R(r);let o=v();return F(o.change(n))})("focus",function(n){R(r);let o=v();return F(o.focus(n))})("blur",function(n){R(r);let o=v();return F(o.blur(n))}),ue(2,"        "),P()()}if(t&2){let r=v();$("nzMaxCharacterCount",r.ui.maxCharacterCount)("nzComputeCharacterCount",r.ui.computeCharacterCount),z(),$("disabled",r.disabled)("nzSize",r.ui.size)("ngModel",r.value)("nzAutosize",r.autosize)("nzBorderless",r.ui.borderless),Ze("id",r.id)("disabled",r.disabled)("maxLength",r.schema.maxLength||null)("placeholder",r.ui.placeholder)}}function Dy(t,e){}function Ny(t,e){if(t&1&&I(0,Dy,0,0,"ng-template",3),t&2){v();let r=Oe(2);$("ngTemplateOutlet",r)}}var ws=(()=>{let e=class e extends $e{constructor(){super(...arguments),this.autosize=!0}ngOnInit(){this.ui.autosize!=null&&(this.autosize=this.ui.autosize),this.ui.computeCharacterCount==null&&(this.ui.computeCharacterCount=i=>i.length)}change(i){this.setValue(i),this.ui.change&&this.ui.change(i)}focus(i){this.ui.focus&&this.ui.focus(i)}blur(i){this.ui.blur&&this.ui.blur(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=oe(e)))(o||e)}})(),e.\u0275cmp=te({type:e,selectors:[["sf-textarea"]],features:[ae],decls:5,vars:7,consts:[["ipt",""],[3,"id","schema","ui","showError","error","showTitle"],[3,"nzMaxCharacterCount","nzComputeCharacterCount"],[3,"ngTemplateOutlet"],["nz-input","",3,"ngModelChange","focus","blur","disabled","nzSize","ngModel","nzAutosize","nzBorderless"]],template:function(n,o){n&1&&(T(0,"sf-item-wrap",1),I(1,Oy,2,9,"ng-template",null,0,Ae)(3,Iy,3,11,"nz-textarea-count",2)(4,Ny,1,1,null,3),P()),n&2&&($("id",o.id)("schema",o.schema)("ui",o.ui)("showError",o.showError)("error",o.error)("showTitle",o.schema.title),z(3),k(o.ui.maxCharacterCount?3:4))},dependencies:[je,_n,Ie,De,Bl,yn,Hl,ve],encapsulation:2});let t=e;return t})();var ci=class extends Dt{constructor(){super(),this.register("object",gs),this.register("array",fs),this.register("text",Cs),this.register("string",lo),this.register("number",so),this.register("integer",so),this.register("date",_s),this.register("radio",ys),this.register("checkbox",ms),this.register("boolean",ps),this.register("textarea",ws),this.register("select",vs),this.register("custom",hs),this.setDefault(lo)}};var ky=[bl,oc,kl,tc,nc,rc,wl,Kl,Jl,$l,Rl,Wl,sc,Fl];var i$=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[{provide:wr,useClass:no,deps:[$t,Gt]},{provide:Dt,useClass:ci}]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=el({type:e}),e.\u0275inj=Zs({imports:[gl,Ol,El,ky]});let t=e;return t})();function u$(t){let e=[{provide:wr,useClass:no,deps:[$t,Gt]},{provide:Dt,useClass:ci}];return t?.widgets&&e.push({provide:Ys,multi:!0,useValue:()=>{let r=Z(Dt);t?.widgets?.forEach(i=>r.register(i.KEY,i.type))}}),tl(e)}export{Me as a,dc as b,Df as c,Lr as d,Ki as e,ve as f,vg as g,$e as h,i$ as i,u$ as j};
