import{a as D}from"./chunk-6PBQZBWO.js";import{a as lt,b as ct}from"./chunk-22CD57KE.js";import{Aa as _,Ab as W,Ba as B,Bb as U,Ca as $,D as E,Dg as at,Eg as st,Hb as q,I as h,Ic as et,Jc as u,Kc as g,Kd as nt,Lb as J,Ld as ot,M as A,Mb as K,Na as f,Nb as X,Sb as Y,Td as rt,W as d,Wb as a,Xa as j,Xb as tt,Xc as it,Ya as L,Za as M,a as w,ab as F,bb as R,ca as G,da as k,g as O,ga as r,k as p,mb as H,ob as Z,sa as m,ta as N,tb as P,ub as Q,vb as V,wb as T}from"./chunk-P5SMEL6S.js";var y=class i{cogSrv=r(ot);lazySrv=r(nt);_cog;loading=!1;loaded=!1;notify$=new p;get cog(){return this._cog}set cog(e){this._cog=this.cogSrv.merge("chart",{theme:"",libs:["https://gw.alipayobjects.com/os/lib/antv/g2/4.1.46/dist/g2.min.js","https://gw.alipayobjects.com/os/lib/antv/data-set/0.11.8/dist/data-set.js"]},e)}constructor(){this.cog={theme:""}}libLoad(){return this.loading?(this.loaded&&this.notify$.next(),this):(this.loading=!0,this.lazySrv.load(this.cog.libs).then(()=>{this.loaded=!0,this.notify$.next()}),this)}get notify(){return this.notify$.asObservable()}ngOnDestroy(){this.notify$.unsubscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=G({token:i,factory:i.\u0275fac,providedIn:"root"})};var ht=["container"],c=class c{srv=r(y);el=r($);ngZone=r(N);platform=r(rt);cdr=r(et);get chart(){return this._chart}get winG2(){return window.G2}constructor(){this.theme=this.srv.cog.theme,this.srv.notify.pipe(d(this.destroy$),h(()=>!this.loaded)).subscribe(()=>this.load())}repaint=!0;node;resize$;destroy$=new p;_chart;loaded=!1;delay=0;theme;ready=new m;onlyChangeData;changeData(){}onInit(){}onChanges(e){}load(){this.ngZone.run(()=>{this.loaded=!0,this.cdr.detectChanges()}),setTimeout(()=>this.install(),this.delay)}ngOnInit(){this.platform.isBrowser&&(this.onInit(),this.winG2?this.load():this.srv.libLoad())}ngOnChanges(e){if(this.onChanges(e),this.onlyChangeData?this.onlyChangeData(e):Object.keys(e).length===1&&!!e.data){this.changeData();return}!this.chart||!this.repaint||this.ngZone.runOutsideAngular(()=>{this.destroyChart().install()})}destroyChart(){return this._chart&&this._chart.destroy(),this}ngOnDestroy(){this.resize$&&this.resize$.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.destroyChart()}static \u0275fac=function(t){return new(t||c)};static \u0275dir=M({type:c,viewQuery:function(t,n){if(t&1&&J(ht,7),t&2){let s;K(s=X())&&(n.node=s.first)}},inputs:{repaint:[2,"repaint","repaint",u],delay:[2,"delay","delay",g],theme:"theme"},outputs:{ready:"ready"},features:[_]})};O([D()],c.prototype,"load",1),O([D()],c.prototype,"destroyChart",1);var v=c;function Rt(i,e){let t=w({showTitle:!1,showMarkers:!0,enterable:!0,domStyles:{"g2-tooltip":{padding:"0px"},"g2-tooltip-title":{display:"none"},"g2-tooltip-list-item":{margin:"4px"}}},e);return i==="mini"&&(t.position="top",t.domStyles["g2-tooltip"]={padding:"0px",backgroundColor:"transparent",boxShadow:"none"},t.itemTpl="<li>{value}</li>",t.offset=8),t}function dt(i,e){if(i&1&&(W(0),a(1,`
      `),Q(2,"h4",2),a(3),V(),a(4,`
    `),U()),i&2){let t=q();f(3),tt(t.title)}}function mt(i,e){i&1&&(a(0,`
      `),T(1,"nz-skeleton"),a(2,`
    `))}var ft=41,C=class i extends v{title;color="rgba(24, 144, 255, 0.85)";height=0;padding="auto";data=[];autoLabel=!0;interaction="none";clickItem=new m;getHeight(){return this.title?this.height-ft:this.height}install(){let{node:e,padding:t,interaction:n,theme:s}=this,b=e.nativeElement,o=this._chart=new this.winG2.Chart({container:b,autoFit:!0,height:this.getHeight(),padding:t,theme:s});this.updatelabel(),o.axis("y",{title:null,line:null,tickLine:null}),o.scale({x:{type:"cat"},y:{min:0}}),o.tooltip({showTitle:!1}),n!=="none"&&o.interaction(n),o.legend(!1),o.interval().position("x*y").color("x*y",(l,x)=>{let S=this.data.find(I=>I.x===l&&I.y===x);return S&&S.color?S.color:this.color}).tooltip("x*y",(l,x)=>({name:l,value:x})),o.on("interval:click",l=>{this.ngZone.run(()=>this.clickItem.emit({item:l.data?.data,ev:l}))}),this.ready.next(o),this.changeData(),o.render(),this.installResizeEvent()}changeData(){let{_chart:e,data:t}=this;!e||!Array.isArray(t)||t.length<=0||e.changeData(t)}updatelabel(){let{node:e,data:t,_chart:n}=this,s=e.nativeElement.clientWidth,b=t.length*30;n.axis("x",s>b).render()}installResizeEvent(){!this.autoLabel||this.resize$||(this.resize$=E(window,"resize").pipe(d(this.destroy$),h(()=>!!this._chart),A(200)).subscribe(()=>this.ngZone.runOutsideAngular(()=>this.updatelabel())))}static \u0275fac=(()=>{let e;return function(n){return(e||(e=B(i)))(n||i)}})();static \u0275cmp=j({type:i,selectors:[["g2-bar"]],hostVars:2,hostBindings:function(t,n){t&2&&Y("height",n.height,"px")},inputs:{title:"title",color:"color",height:[2,"height","height",g],padding:"padding",data:"data",autoLabel:[2,"autoLabel","autoLabel",u],interaction:"interaction"},outputs:{clickItem:"clickItem"},exportAs:["g2Bar"],features:[F],decls:7,vars:2,consts:[["container",""],[4,"nzStringTemplateOutlet"],[2,"margin-bottom","20px"]],template:function(t,n){t&1&&(a(0,`
    `),R(1,dt,5,1,"ng-container",1),a(2,`
    `),H(3,mt,3,0),T(4,"div",null,0),a(6,`
  `)),t&2&&(f(),P("nzStringTemplateOutlet",n.title),f(2),Z(n.loaded?-1:3))},dependencies:[at,lt],encapsulation:2,changeDetection:0})};var ut=[C],pt=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=L({type:i});static \u0275inj=k({imports:[it,st,ct,ut]})};export{v as a,Rt as b,C as c,pt as d};
