"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[960],{38960:(q,g,s)=>{s.r(g),s.d(g,{FormPagesModule:()=>W});var D=s(52787),t=s(65879),h=s(60095),m=s(96814),V=s(92438),S=s(83620);const _=new t.OlP("NU_MONACO_EDITOR_CONFIG");let C,v=!1,z=(()=>{var n;class l{set disabled(e){this._disabled="string"==typeof e||e,this.setDisabled()}set options(e){this._options={...this._config.defaultOptions,...e}}get options(){return this._options}constructor(e,o,i,r){this.el=e,this.doc=i,this.ngZone=r,this._resize$=null,this.height="200px",this.delay=0,this.event=new t.vpe,this._config={baseUrl:"https://cdn.jsdelivr.net/npm/monaco-editor/min",...o},this.options=this._config.defaultOptions}notifyEvent(e,o){this.ngZone.run(()=>this.event.emit({type:e,editor:this._editor,...o}))}setDisabled(){return this._editor&&this._editor.updateOptions({readOnly:this._disabled}),this}init(){v?C.then(()=>this.initMonaco(this.options,!0)):(v=!0,C=new Promise((e,o)=>{const i=window;if(null==i)return void e();if(i.monaco)return void e();const r=this._config.baseUrl,d=()=>{i.require.config({paths:{vs:`${r}/vs`}}),"function"==typeof this._config.monacoPreLoad&&this._config.monacoPreLoad(),i.require(["vs/editor/editor.main"],()=>{"function"==typeof this._config.monacoLoad&&this._config.monacoLoad(i.monaco),this.initMonaco(this.options,!0),e()},()=>{o("Unable to load editor/editor.main module, please check your network environment.")})};if(i.require)d();else{const c=this.doc.createElement("script");c.type="text/javascript",c.src=`${r}/vs/loader.js`,c.onload=d,c.onerror=()=>o(`Unable to load ${c.src}, please check your network environment.`),this.doc.getElementsByTagName("head")[0].appendChild(c)}}).catch(e=>this.notifyEvent("load-error",{error:e})))}cleanResize(){return this._resize$&&this._resize$.unsubscribe(),this}registerResize(){return this.cleanResize(),this._resize$=(0,V.R)(window,"resize").pipe((0,S.b)(100)).subscribe(()=>{this._editor.layout(),this.notifyEvent("resize")}),this}updateOptions(){this._editor&&this.ngZone.runOutsideAngular(()=>{this._editor.dispose(),this.initMonaco(this._options,!1)})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>setTimeout(()=>this.init(),+this.delay))}ngOnChanges(e){const o=Object.keys(e);1===o.length&&"disabled"===o[0]||this.updateOptions()}ngOnDestroy(){this.cleanResize(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(_),t.Y36(m.K0),t.Y36(t.R0b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nu-monaco-base"]],inputs:{height:"height",delay:"delay",disabled:"disabled",options:"options"},outputs:{event:"event"},standalone:!0,features:[t.TTD,t.jDz],decls:0,vars:0,template:function(e,o){},encapsulation:2}),l})(),y=(()=>{var n;class l extends z{constructor(){super(...arguments),this._value="",this.autoFormat=!0,this.onChange=e=>{},this.onTouched=()=>{}}get editor(){return this._editor}initMonaco(e,o){const i=!!this.model;if(i){const d=monaco.editor.getModel(this.model.uri||"");if(d)e.model=d,e.model.setValue(this._value);else{const{value:c,language:u,uri:p}=this.model;e.model=monaco.editor.createModel(c||this._value,u,p)}}null!=this._disabled&&(e.readOnly=this._disabled);const r=this._editor=monaco.editor.create(this.el.nativeElement,e);i||r.setValue(this._value),r.onDidChangeModelContent(()=>{const d=r.getValue();this.ngZone.run(()=>{this._value=d,this.onChange(d)})}),r.onDidBlurEditorWidget(()=>this.onTouched()),this.registerResize(),this.autoFormat?r.getAction("editor.action.formatDocument").run().then(()=>this.notifyEvent(o?"init":"re-init")):this.notifyEvent(o?"init":"re-init")}writeValue(e){this._value=e||"",this._editor&&this._editor.setValue(this._value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this.setDisabled()}}return(n=l).\u0275fac=function(){let a;return function(o){return(a||(a=t.n5z(n)))(o||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["nu-monaco-editor"]],hostVars:4,hostBindings:function(e,o){2&e&&t.Udp("display","block")("height",o.height)},inputs:{model:"model",autoFormat:"autoFormat"},exportAs:["nuMonacoEditor"],standalone:!0,features:[t._Bn([{provide:h.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0}]),t.qOj,t.jDz],decls:0,vars:0,template:function(e,o){},encapsulation:2,changeDetection:0}),l})(),J=(()=>{var n;class l{static forRoot(e){return{ngModule:l,providers:[{provide:_,useValue:e}]}}}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.ez]}),l})();var N=s(71993),M=s(980),Z=s(24593),A=s(3604),x=s(87691),B=s(43460),Q=s(47535),T=s(42840),U=s(70855),L=s(41958),b=s(10095),G=s(96109),O=s(9691),j=s(90551),F=s(79382),f=s(57907),R=s(63123);const Y=["schemaEditor"],$=["formCodeEditor"],w=["uiEditor"];function I(n,l){if(1&n&&t._UZ(0,"nz-option",24),2&n){const a=l.$implicit;t.Q6J("nzValue",a.name)("nzLabel",a.title)}}function P(n,l){if(1&n){const a=t.EpF();t.TgZ(0,"div",1)(1,"sf",25),t.NdJ("formSubmit",function(o){t.CHM(a);const i=t.oxw();return t.KtG(i.submit(o))})("formChange",function(o){t.CHM(a);const i=t.oxw();return t.KtG(i.change(o))})("formValueChange",function(o){t.CHM(a);const i=t.oxw();return t.KtG(i.valueChange(o))})("formError",function(o){t.CHM(a);const i=t.oxw();return t.KtG(i.error(o))}),t.qZA()()}if(2&n){const a=t.oxw();t.Q6J("nzSpan",a.expand?12:24),t.xp6(1),t.Q6J("schema",a.schemaData)("formData",a.formData)("ui",a.uiSchema)("layout",a.layout)}}let E=(()=>{var n;class l{constructor(e,o,i,r,d,c){this.i18n=e,this.codeSrv=o,this.http=i,this.msg=r,this.appService=d,this.cdr=c,this.files=[{name:"basic",title:"\u57fa\u672c"},{name:"conditional",title:"\u6761\u4ef6"},{name:"sort",title:"\u987a\u5e8f"},{name:"validation",title:"\u81ea\u5b9a\u4e49\u6821\u9a8c"},{name:"fixed",title:"\u4e0d\u89c4\u5219\u5e03\u5c40"}],this.layout="horizontal",this.expand=!0,this.editorOptions={language:"json",theme:"vs"},this.name=this.files[0].name,this.title=this.files[0].title,this.appService.theme$.pipe((0,N.sL)()).subscribe(p=>{this.editorOptions={language:"json",theme:"dark"===p?"vs-dark":"vs"}})}ngOnInit(){this.getSchema()}refreshLayout(e){setTimeout(()=>{this[e].editor.layout()},100)}getSchema(){const e=this.files.find(o=>o.name===this.name);if(e){if(this.name=e.name,this.title=e.title,e.cache)return this.schema=e.cache,void this.run();this.http.get(`./assets/schema/${e.name}.json`,null,{responseType:"text"}).subscribe(o=>{e.cache=o,this.schema=e.cache,this.run()})}}run(){this.schemaData=JSON.parse(this.schema||"{}"),this.formData=JSON.parse(this.formCode||"{}"),this.uiSchema=JSON.parse(this.uiCode||"{}"),this.cdr.detectChanges()}openOnStackBlitz(){const e={schema:this.schema,layout:this.layout,formData:this.formCode||"{}",ui:this.uiCode||"{}"},o="\nimport { Component } from '@angular/core';\nimport { SFSchema } from '@delon/form';\nimport { NzMessageService } from 'ng-zorro-antd/message';\n\n@Component({\n  selector: 'demo',\n  template: `\n  <sf [schema]=\"schema\" [formData]=\"formData\" [ui]=\"ui\" [layout]=\"layout\"\n      (formSubmit)=\"submit($event)\"\n      (formChange)=\"change($event)\"\n      (formError)=\"error($event)\"></sf>\n    `\n})\nexport class DemoComponent {\n  schema = {schema};\n  formData = {formData};\n  ui = {ui};\n  layout = '{layout}';\n\n  constructor(private msg: NzMessageService) { }\n\n  submit(value: any) {\n    this.msg.success(JSON.stringify(value));\n  }\n\n  change(value: any) {\n    console.log('formChange', value);\n  }\n\n  error(value: any) {\n    console.log('formError', value);\n  }\n}".replace(/\{(\w+)\}/g,(i,r)=>(e[r]||"").trim());this.codeSrv.openOnStackBlitz("sf-validator",o)}onCopy(){(0,Z.J)(this.schema).then(()=>this.msg.success(this.i18n.fanyi("app.demo.copied")))}submit(e){this.msg.success(JSON.stringify(e))}change(e){console.log("formChange",e)}valueChange(e){console.log("formChange",e)}error(e){console.log("formError",e)}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(M.Oi),t.Y36(A.$),t.Y36(M.lP),t.Y36(B.dD),t.Y36(x.z),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["form-validator"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Y,5),t.Gf($,5),t.Gf(w,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.schemaEditor=i.first),t.iGM(i=t.CRH())&&(o.formCodeEditor=i.first),t.iGM(i=t.CRH())&&(o.uiEditor=i.first)}},decls:34,vars:23,consts:[["nz-row","",1,"border-bottom-1","pb-sm","mb-md"],["nz-col","",3,"nzSpan"],[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"ml-sm",3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","horizontal"],["nz-radio-button","","nzValue","vertical"],["nz-radio-button","","nzValue","inline"],["nz-col","",1,"text-right",3,"nzSpan"],["nz-tooltip","","nz-button","",3,"nzTooltipTitle","click"],["nz-icon","",3,"nzType"],["nz-tooltip","","nz-button","",1,"ml-sm",3,"nzTooltipTitle","click"],["nz-icon","","nzType","form"],["nz-icon","","nzType","copy"],["nz-row","",1,"border-bottom-1","pb-sm","mb-md",3,"nzGutter"],["nz-col","",3,"nzSpan","hidden"],["nzTitle","Schema",3,"nzClick"],["height","500px",3,"ngModel","options","ngModelChange"],["schemaEditor",""],["nzTitle","Form Data",3,"nzClick"],["formCodeEditor",""],["nzTitle","UI Schema",3,"nzClick"],["uiEditor",""],["nz-col","",3,"nzSpan",4,"ngIf"],[3,"nzValue","nzLabel"],[3,"schema","formData","ui","layout","formSubmit","formChange","formValueChange","formError"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nz-select",2),t.NdJ("ngModelChange",function(r){return o.name=r})("ngModelChange",function(){return o.getSchema()}),t.YNc(3,I,1,2,"nz-option",3),t.qZA(),t.TgZ(4,"nz-radio-group",4),t.NdJ("ngModelChange",function(r){return o.layout=r}),t.TgZ(5,"label",5),t._uU(6,"\u6c34\u5e73"),t.qZA(),t.TgZ(7,"label",6),t._uU(8,"\u5782\u76f4"),t.qZA(),t.TgZ(9,"label",7),t._uU(10,"\u884c\u5185"),t.qZA()()(),t.TgZ(11,"div",8)(12,"nz-button-group")(13,"button",9),t.NdJ("click",function(){return o.expand=!o.expand}),t._UZ(14,"i",10),t.qZA(),t.TgZ(15,"button",11),t.NdJ("click",function(){return o.openOnStackBlitz()}),t.ALo(16,"i18n"),t._UZ(17,"i",12),t.qZA(),t.TgZ(18,"button",11),t.NdJ("click",function(){return o.onCopy()}),t.ALo(19,"i18n"),t._UZ(20,"i",13),t.qZA()()()(),t.TgZ(21,"div",14)(22,"div",15)(23,"nz-tabset")(24,"nz-tab",16),t.NdJ("nzClick",function(){return o.refreshLayout("schemaEditor")}),t.TgZ(25,"nu-monaco-editor",17,18),t.NdJ("ngModelChange",function(r){return o.schema=r})("ngModelChange",function(){return o.run()}),t.qZA()(),t.TgZ(27,"nz-tab",19),t.NdJ("nzClick",function(){return o.refreshLayout("formCodeEditor")}),t.TgZ(28,"nu-monaco-editor",17,20),t.NdJ("ngModelChange",function(r){return o.formCode=r})("ngModelChange",function(){return o.run()}),t.qZA()(),t.TgZ(30,"nz-tab",21),t.NdJ("nzClick",function(){return o.refreshLayout("uiEditor")}),t.TgZ(31,"nu-monaco-editor",17,22),t.NdJ("ngModelChange",function(r){return o.uiCode=r})("ngModelChange",function(){return o.run()}),t.qZA()()()(),t.YNc(33,P,2,5,"div",23),t.qZA()),2&e&&(t.xp6(1),t.Q6J("nzSpan",18),t.xp6(1),t.Q6J("ngModel",o.name),t.xp6(1),t.Q6J("ngForOf",o.files),t.xp6(1),t.Q6J("ngModel",o.layout),t.xp6(7),t.Q6J("nzSpan",6),t.xp6(2),t.Q6J("nzTooltipTitle",o.expand?"Hide Code":"Show Code"),t.xp6(1),t.MGl("nzType","vertical-",o.expand?"right":"left",""),t.xp6(1),t.Q6J("nzTooltipTitle",t.lcZ(16,19,"app.demo.stackblitz")),t.xp6(3),t.Q6J("nzTooltipTitle",t.lcZ(19,21,"app.demo.copy")),t.xp6(3),t.Q6J("nzGutter",24),t.xp6(1),t.Q6J("nzSpan",12)("hidden",!o.expand),t.xp6(3),t.Q6J("ngModel",o.schema)("options",o.editorOptions),t.xp6(3),t.Q6J("ngModel",o.formCode)("options",o.editorOptions),t.xp6(3),t.Q6J("ngModel",o.uiCode)("options",o.editorOptions),t.xp6(2),t.Q6J("ngIf",o.schemaData))},dependencies:[m.sg,m.O5,h.JJ,h.On,Q.k,T.ix,T.fY,U.w,L.dQ,b.t3,b.SK,G.SY,O.Ip,O.Vq,j.Ls,F.xH,F.xw,f.Of,f.Bq,f.Dg,y,R.C],encapsulation:2,changeDetection:0}),l})();var k=s(93285),K=s(89359);const X=[{path:"",component:k.S,children:[{path:"validator/:lang",component:E,data:{titleI18n:"app.header.menu.form.validator"}}]}];let W=(()=>{var n;class l{}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[K.m,J.forRoot({defaultOptions:{scrollBeyondLastLine:!1}}),D.Bz.forChild(X)]}),l})()}}]);