import{$a as M,Da as C,Fa as x,Ja as z,Ka as s,La as _,Md as q,Na as T,Oa as E,Qb as R,Ra as N,Rb as V,Sa as o,Ta as w,Tb as B,Ua as A,ae as k,be as f,bg as H,cg as U,da as d,fb as m,gb as u,ha as g,hb as D,ia as S,ic as P,kd as W,lb as j,ld as Z,ma as v,na as y,oa as I,pb as G,q as p,rb as h,rd as b,uc as Q,yb as F,zb as O}from"./chunk-7RYH264L.js";var L=["textEl"];function X(n,i){if(n&1&&D(0,"span",3),n&2){let e=h();o("nzType",e.nzIcon)}}function $(n,i){if(n&1){let e=j();m(0,"img",4),G("error",function(r){y(e);let c=h();return I(c.imgError(r))}),u()}if(n&2){let e=h();o("src",e.nzSrc,C),N("srcset",e.nzSrcSet)("alt",e.nzAlt)}}function J(n,i){if(n&1&&(m(0,"span",5,6),F(2),u()),n&2){let e=h();z(2),O(e.nzText)}}var K="avatar",a=class a{constructor(i,e,t,r,c){this.nzConfigService=i,this.elementRef=e,this.cdr=t,this.platform=r,this.ngZone=c,this._nzModuleName=K,this.nzShape="circle",this.nzSize="default",this.nzGap=4,this.nzError=new T,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.classMap={},this.customSize=null,this.el=this.elementRef.nativeElement}imgError(i){this.nzError.emit(i),i.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.cdr.detectChanges(),this.setSizeStyle(),this.notifyCalc())}ngOnChanges(){this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setSizeStyle(),this.notifyCalc()}calcStringSize(){if(!this.hasText)return;let i=this.textEl.nativeElement,e=i.offsetWidth,t=this.el.getBoundingClientRect().width,r=this.nzGap*2<t?this.nzGap*2:8,c=t-r<e?(t-r)/e:1;i.style.transform=`scale(${c}) translateX(-50%)`,i.style.lineHeight=this.customSize||""}notifyCalc(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.calcStringSize()})})}setSizeStyle(){typeof this.nzSize=="number"?this.customSize=`${this.nzSize}px`:this.customSize=null,this.cdr.markForCheck()}};a.\u0275fac=function(e){return new(e||a)(s(k),s(x),s(_),s(W),s(E))},a.\u0275cmp=g({type:a,selectors:[["nz-avatar"]],viewQuery:function(e,t){if(e&1&&V(L,5),e&2){let r;R(r=B())&&(t.textEl=r.first)}},hostAttrs:[1,"ant-avatar"],hostVars:20,hostBindings:function(e,t){e&2&&(w("width",t.customSize)("height",t.customSize)("line-height",t.customSize)("font-size",t.hasIcon&&t.customSize?t.nzSize/2:null,"px"),A("ant-avatar-lg",t.nzSize==="large")("ant-avatar-sm",t.nzSize==="small")("ant-avatar-square",t.nzShape==="square")("ant-avatar-circle",t.nzShape==="circle")("ant-avatar-icon",t.nzIcon)("ant-avatar-image",t.hasSrc))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzGap:"nzGap",nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],features:[v],decls:3,vars:3,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[3,"src","error",4,"ngIf"],["class","ant-avatar-string",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"src","error"],[1,"ant-avatar-string"],["textEl",""]],template:function(e,t){e&1&&M(0,X,1,1,"span",0)(1,$,1,3,"img",1)(2,J,3,1,"span",2),e&2&&(o("ngIf",t.nzIcon&&t.hasIcon),z(1),o("ngIf",t.nzSrc&&t.hasSrc),z(1),o("ngIf",t.nzText&&t.hasText))},dependencies:[P,H],encapsulation:2,changeDetection:0});var l=a;p([f()],l.prototype,"nzShape",void 0);p([f()],l.prototype,"nzSize",void 0);p([f(),q()],l.prototype,"nzGap",void 0);var It=(()=>{let i=class i{};i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=S({type:i}),i.\u0275inj=d({imports:[b,Q,U,Z]});let n=i;return n})();export{l as a,It as b};
