import{Aa as A,Ab as k,Bb as q,C as L,F as N,Ka as h,Kh as st,Lb as V,Ld as S,Na as _,Pd as v,Sa as $,Te as it,X as y,Z as I,a as u,ae as w,b,ca as j,cc as X,fa as P,ge as Y,h as C,ha as B,hb as W,he as z,ia as D,ib as Z,jc as G,k as T,m as x,pa as F,pe as J,q as g,qe as K,tb as H,te as tt,ub as Q,ve as et,w as E,xa as M,ya as R,zb as U}from"./chunk-FML4Y3RM.js";var rt=["fixedEl"],lt=["*"],O=function(i){return i.resize="resize",i.scroll="scroll",i.touchstart="touchstart",i.touchmove="touchmove",i.touchend="touchend",i.pageshow="pageshow",i.load="LOAD",i}(O||{});function ht(i){return typeof window<"u"&&i===window}function ot(i){return ht(i)?{top:0,left:0,bottom:0}:i.getBoundingClientRect()}var ct="affix",d="ant-affix",ft=20,at=(()=>{let o=class o{get target(){let e=this.nzTarget;return(typeof e=="string"?this.document.querySelector(e):e)||window}constructor(e,t,s,n,r,l,a,c,f){this.nzConfigService=t,this.scrollSrv=s,this.ngZone=n,this.platform=r,this.renderer=l,this.nzResizeObserver=a,this.cdr=c,this.directionality=f,this._nzModuleName=ct,this.nzChange=new M,this.dir="ltr",this.positionChangeSubscription=C.EMPTY,this.offsetChanged$=new x(1),this.destroy$=new T,this.document=P(G),this.placeholderNode=e.nativeElement}ngOnInit(){this.directionality.change?.pipe(y(this.destroy$)).subscribe(e=>{this.dir=e,this.registerListeners(),this.updatePosition({}),this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){let{nzOffsetBottom:t,nzOffsetTop:s,nzTarget:n}=e;(t||s)&&this.offsetChanged$.next(),n&&this.registerListeners()}ngAfterViewInit(){this.registerListeners()}ngOnDestroy(){this.removeListeners()}registerListeners(){if(!this.platform.isBrowser)return;this.removeListeners();let e=this.target===window?this.document.body:this.target;this.positionChangeSubscription=this.ngZone.runOutsideAngular(()=>N(...Object.keys(O).map(t=>L(this.target,t)),this.offsetChanged$.pipe(E(()=>({}))),this.nzResizeObserver.observe(e)).pipe(I(ft,void 0,{trailing:!0}),y(this.destroy$)).subscribe(t=>this.updatePosition(t))),this.timeout=setTimeout(()=>this.updatePosition({}))}removeListeners(){clearTimeout(this.timeout),this.positionChangeSubscription.unsubscribe(),this.destroy$.next(!0),this.destroy$.complete()}getOffset(e,t){let s=e.getBoundingClientRect(),n=ot(t),r=this.scrollSrv.getScroll(t,!0),l=this.scrollSrv.getScroll(t,!1),a=this.document.body,c=a.clientTop||0,f=a.clientLeft||0;return{top:s.top-n.top+r-c,left:s.left-n.left+l-f,width:s.width,height:s.height}}setAffixStyle(e,t){let s=this.affixStyle,n=this.target===window;if(e.type==="scroll"&&s&&t&&n||S(s,t))return;let r=!!t,l=this.fixedEl.nativeElement;this.renderer.setStyle(l,"cssText",w(t)),this.affixStyle=t,r?l.classList.add(d):l.classList.remove(d),this.updateRtlClass(),(t&&!s||!t&&s)&&this.nzChange.emit(r)}setPlaceholderStyle(e){let t=this.placeholderStyle;S(e,t)||(this.renderer.setStyle(this.placeholderNode,"cssText",w(e)),this.placeholderStyle=e)}syncPlaceholderStyle(e){if(!this.affixStyle)return;this.renderer.setStyle(this.placeholderNode,"cssText",""),this.placeholderStyle=void 0;let t={width:this.placeholderNode.offsetWidth,height:this.fixedEl.nativeElement.offsetHeight};this.setAffixStyle(e,u(u({},this.affixStyle),t)),this.setPlaceholderStyle(t)}updatePosition(e){if(!this.platform.isBrowser)return;let t=this.target,s=this.nzOffsetTop,n=this.scrollSrv.getScroll(t,!0),r=this.getOffset(this.placeholderNode,t),l=this.fixedEl.nativeElement,a={width:l.offsetWidth,height:l.offsetHeight},c={top:!1,bottom:!1};typeof s!="number"&&typeof this.nzOffsetBottom!="number"?(c.top=!0,s=0):(c.top=typeof s=="number",c.bottom=typeof this.nzOffsetBottom=="number");let f=ot(t),nt=t.innerHeight||t.clientHeight;if(n>=r.top-s&&c.top){let p=r.width,m=f.top+s;this.setAffixStyle(e,{position:"fixed",top:m,left:f.left+r.left,width:p}),this.setPlaceholderStyle({width:p,height:a.height})}else if(n<=r.top+a.height+this.nzOffsetBottom-nt&&c.bottom){let p=t===window?0:window.innerHeight-f.bottom,m=r.width;this.setAffixStyle(e,{position:"fixed",bottom:p+this.nzOffsetBottom,left:f.left+r.left,width:m}),this.setPlaceholderStyle({width:m,height:r.height})}else e.type===O.resize&&this.affixStyle&&this.affixStyle.position==="fixed"&&this.placeholderNode.offsetWidth?this.setAffixStyle(e,b(u({},this.affixStyle),{width:this.placeholderNode.offsetWidth})):this.setAffixStyle(e),this.setPlaceholderStyle();e.type==="resize"&&this.syncPlaceholderStyle(e)}updateRtlClass(){let e=this.fixedEl.nativeElement;this.dir==="rtl"?e.classList.contains(d)?e.classList.add(`${d}-rtl`):e.classList.remove(`${d}-rtl`):e.classList.remove(`${d}-rtl`)}};o.\u0275fac=function(t){return new(t||o)(h(A),h(Y),h(it),h(R),h(J),h(_),h(st),h(X),h(tt))},o.\u0275cmp=B({type:o,selectors:[["nz-affix"]],viewQuery:function(t,s){if(t&1&&U(rt,7),t&2){let n;k(n=q())&&(s.fixedEl=n.first)}},inputs:{nzTarget:"nzTarget",nzOffsetTop:[2,"nzOffsetTop","nzOffsetTop",v],nzOffsetBottom:[2,"nzOffsetBottom","nzOffsetBottom",v]},outputs:{nzChange:"nzChange"},exportAs:["nzAffix"],standalone:!0,features:[$,F,V],ngContentSelectors:lt,decls:3,vars:0,consts:[["fixedEl",""]],template:function(t,s){t&1&&(H(),W(0,"div",null,0),Q(2),Z())},dependencies:[et,K],encapsulation:2,changeDetection:0});let i=o;return g([z()],i.prototype,"nzOffsetTop",void 0),g([z()],i.prototype,"nzOffsetBottom",void 0),i})(),Dt=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=D({type:o}),o.\u0275inj=j({imports:[at]});let i=o;return i})();export{at as a,Dt as b};
