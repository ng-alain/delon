import{a as lt,b as ht}from"./chunk-ETQXOSI7.js";import{$a as Q,C as k,Fa as M,H as f,Ja as w,Ka as c,L as E,La as G,Na as y,Oa as Z,Pa as A,Qb as Y,Rb as tt,Sa as H,Ta as R,Tb as et,Ug as v,Wg as x,Xg as D,Y as g,a as z,ab as P,ca as T,da as _,dd as ot,ed as nt,fa as I,fb as V,gb as W,ha as $,hb as O,ia as N,ib as U,ja as L,jb as q,k as u,kd as rt,ma as B,mf as at,nf as st,q as a,ra as F,rb as J,uc as it,yb as K,zb as X}from"./chunk-7RYH264L.js";var ct=(()=>{let t=class t{get cog(){return this._cog}set cog(i){this._cog=this.cogSrv.merge("chart",{theme:"",libs:["https://gw.alipayobjects.com/os/lib/antv/g2/4.1.46/dist/g2.min.js","https://gw.alipayobjects.com/os/lib/antv/data-set/0.11.8/dist/data-set.js"]},i)}constructor(i,n){this.cogSrv=i,this.lazySrv=n,this.loading=!1,this.loaded=!1,this.notify$=new u,this.cog={theme:""}}libLoad(){return this.loading?(this.loaded&&this.notify$.next(),this):(this.loading=!0,this.lazySrv.load(this.cog.libs).then(()=>{this.loaded=!0,this.notify$.next()}),this)}get notify(){return this.notify$.asObservable()}ngOnDestroy(){this.notify$.unsubscribe()}};t.\u0275fac=function(n){return new(n||t)(I(nt),I(ot))},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var dt=["container"],p=class p{get chart(){return this._chart}get winG2(){return window.G2}constructor(t,e,i,n,d){this.srv=t,this.el=e,this.ngZone=i,this.platform=n,this.cdr=d,this.repaint=!0,this.destroy$=new u,this.loaded=!1,this.delay=0,this.ready=new y,this.theme=t.cog.theme,this.srv.notify.pipe(g(this.destroy$),f(()=>!this.loaded)).subscribe(()=>this.load())}changeData(){}onInit(){}onChanges(t){}load(){this.ngZone.run(()=>{this.loaded=!0,this.cdr.detectChanges()}),setTimeout(()=>this.install(),this.delay)}ngOnInit(){this.platform.isBrowser&&(this.onInit(),this.winG2?this.load():this.srv.libLoad())}ngOnChanges(t){if(this.onChanges(t),this.onlyChangeData?this.onlyChangeData(t):Object.keys(t).length===1&&!!t.data){this.changeData();return}!this.chart||!this.repaint||this.ngZone.runOutsideAngular(()=>{this.destroyChart().install()})}destroyChart(){return this._chart&&this._chart.destroy(),this}ngOnDestroy(){this.resize$&&this.resize$.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.destroyChart()}};p.\u0275fac=function(e){return new(e||p)(c(ct),c(M),c(Z),c(rt),c(G))},p.\u0275dir=L({type:p,viewQuery:function(e,i){if(e&1&&tt(dt,7),e&2){let n;Y(n=et())&&(i.node=n.first)}},inputs:{repaint:"repaint",delay:"delay",theme:"theme"},outputs:{ready:"ready"},features:[B]});var s=p;a([v()],s.prototype,"repaint",void 0);a([x()],s.prototype,"delay",void 0);a([D()],s.prototype,"load",null);a([D()],s.prototype,"destroyChart",null);function kt(o,t){let e=z({showTitle:!1,showMarkers:!0,enterable:!0,domStyles:{"g2-tooltip":{padding:"0px"},"g2-tooltip-title":{display:"none"},"g2-tooltip-list-item":{margin:"4px"}}},t);return o==="mini"&&(e.position="top",e.domStyles["g2-tooltip"]={padding:"0px",backgroundColor:"transparent",boxShadow:"none"},e.itemTpl="<li>{value}</li>",e.offset=8),e}function mt(o,t){if(o&1&&(U(0),V(1,"h4",2),K(2),W(),q()),o&2){let e=J();w(2),X(e.title)}}function ut(o,t){o&1&&O(0,"nz-skeleton")}var ft=41,l=class l extends s{constructor(){super(...arguments),this.color="rgba(24, 144, 255, 0.85)",this.height=0,this.padding="auto",this.data=[],this.autoLabel=!0,this.interaction="none",this.clickItem=new y}getHeight(){return this.title?this.height-ft:this.height}install(){let{node:t,padding:e,interaction:i,theme:n}=this,d=t.nativeElement,r=this._chart=new this.winG2.Chart({container:d,autoFit:!0,height:this.getHeight(),padding:e,theme:n});this.updatelabel(),r.axis("y",{title:null,line:null,tickLine:null}),r.scale({x:{type:"cat"},y:{min:0}}),r.tooltip({showTitle:!1}),i!=="none"&&r.interaction(i),r.legend(!1),r.interval().position("x*y").color("x*y",(h,b)=>{let C=this.data.find(j=>j.x===h&&j.y===b);return C&&C.color?C.color:this.color}).tooltip("x*y",(h,b)=>({name:h,value:b})),r.on("interval:click",h=>{this.ngZone.run(()=>this.clickItem.emit({item:h.data?.data,ev:h}))}),this.ready.next(r),this.changeData(),r.render(),this.installResizeEvent()}changeData(){let{_chart:t,data:e}=this;!t||!Array.isArray(e)||e.length<=0||t.changeData(e)}updatelabel(){let{node:t,data:e,_chart:i}=this,n=t.nativeElement.clientWidth,d=e.length*30;i.axis("x",n>d).render()}installResizeEvent(){!this.autoLabel||this.resize$||(this.resize$=k(window,"resize").pipe(g(this.destroy$),f(()=>!!this._chart),E(200)).subscribe(()=>this.ngZone.runOutsideAngular(()=>this.updatelabel())))}};l.\u0275fac=(()=>{let t;return function(i){return(t||(t=F(l)))(i||l)}})(),l.\u0275cmp=$({type:l,selectors:[["g2-bar"]],hostVars:2,hostBindings:function(e,i){e&2&&R("height",i.height,"px")},inputs:{title:"title",color:"color",height:"height",padding:"padding",data:"data",autoLabel:"autoLabel",interaction:"interaction"},outputs:{clickItem:"clickItem"},exportAs:["g2Bar"],features:[A],decls:4,vars:2,consts:[[4,"nzStringTemplateOutlet"],["container",""],[2,"margin-bottom","20px"]],template:function(e,i){e&1&&(Q(0,mt,3,1,"ng-container",0)(1,ut,1,0,"nz-skeleton"),O(2,"div",null,1)),e&2&&(H("nzStringTemplateOutlet",i.title),w(1),P(1,i.loaded?-1:1))},dependencies:[at,lt],encapsulation:2,changeDetection:0});var m=l;a([x()],m.prototype,"height",void 0);a([v()],m.prototype,"autoLabel",void 0);var oe=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=N({type:t}),t.\u0275inj=_({imports:[it,st,ht]});let o=t;return o})();export{s as a,kt as b,m as c,oe as d};
