import{Ae as T,Db as q,Eb as V,Fe as ot,Gb as X,Gc as J,H as P,Hb as G,Ib as Y,Ke as st,Ld as w,Me as x,Na as H,Qa as $,Ra as k,Rd as K,Ud as tt,Xd as et,Ya as Q,Zd as it,_ as R,a as y,b as B,ea as M,gi as nt,h as O,ha as r,j as L,ke as b,me as v,nb as U,o as A,ob as Z,qa as I,ra as F,s as S,t as m,ti as rt,wa as j,ya as W,z as D}from"./chunk-VMLETMXK.js";var at=["fixedEl"],ct=["*"],C=(function(o){return o.resize="resize",o.scroll="scroll",o.touchstart="touchstart",o.touchmove="touchmove",o.touchend="touchend",o.pageshow="pageshow",o.load="LOAD",o})(C||{});function ht(o){return typeof window<"u"&&o===window}function lt(o){return ht(o)?{top:0,left:0,bottom:0}:o.getBoundingClientRect()}var dt="affix",h="ant-affix",mt=20,pt=(()=>{var l;let o,_=[],z=[],p,N=[],E=[];return l=class{nzConfigService=r(st);scrollSrv=r(nt);platform=r(K);renderer=r(H);nzResizeObserver=r(rt);cdr=r(J);directionality=r(et);destroyRef=r(F);_nzModuleName=dt;fixedEl;nzTarget;nzOffsetTop=m(this,_,void 0);nzOffsetBottom=(m(this,z),m(this,N,void 0));nzChange=(m(this,E),new Q);dir="ltr";placeholderNode=r(W).nativeElement;affixStyle;placeholderStyle;positionChangeSubscription=L.EMPTY;offsetChanged$=new A(1);timeout;document=r(I);get target(){let e=this.nzTarget;return(typeof e=="string"?this.document.querySelector(e):e)||window}constructor(){this.destroyRef.onDestroy(()=>{this.removeListeners()})}ngOnInit(){this.directionality.change?.pipe(w(this.destroyRef)).subscribe(e=>{this.dir=e,this.registerListeners(),this.updatePosition({}),this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){let{nzOffsetBottom:t,nzOffsetTop:i,nzTarget:s}=e;(t||i)&&this.offsetChanged$.next(),s&&this.registerListeners()}ngAfterViewInit(){this.registerListeners()}registerListeners(){if(!this.platform.isBrowser)return;this.removeListeners();let e=this.target===window?this.document.body:this.target;this.positionChangeSubscription=P(...Object.keys(C).map(t=>ot(this.target,t)),this.offsetChanged$.pipe(D(()=>({}))),this.nzResizeObserver.observe(e)).pipe(R(mt,void 0,{trailing:!0}),w(this.destroyRef)).subscribe(t=>this.updatePosition(t)),this.timeout=setTimeout(()=>this.updatePosition({}))}removeListeners(){clearTimeout(this.timeout),this.positionChangeSubscription.unsubscribe()}getOffset(e,t){let i=e.getBoundingClientRect(),s=lt(t),n=this.scrollSrv.getScroll(t,!0),f=this.scrollSrv.getScroll(t,!1),d=this.document.body,a=d.clientTop||0,c=d.clientLeft||0;return{top:i.top-s.top+n-a,left:i.left-s.left+f-c,width:i.width,height:i.height}}setAffixStyle(e,t){let i=this.affixStyle,s=this.target===window;if(e.type==="scroll"&&i&&t&&s||b(i,t))return;let n=!!t,f=this.fixedEl.nativeElement;this.renderer.setStyle(f,"cssText",T(t)),this.affixStyle=t,n?f.classList.add(h):f.classList.remove(h),this.updateRtlClass(),(t&&!i||!t&&i)&&this.nzChange.emit(n)}setPlaceholderStyle(e){let t=this.placeholderStyle;b(e,t)||(this.renderer.setStyle(this.placeholderNode,"cssText",T(e)),this.placeholderStyle=e)}syncPlaceholderStyle(e){if(!this.affixStyle)return;this.renderer.setStyle(this.placeholderNode,"cssText",""),this.placeholderStyle=void 0;let t={width:this.placeholderNode.offsetWidth,height:this.fixedEl.nativeElement.offsetHeight};this.setAffixStyle(e,y(y({},this.affixStyle),t)),this.setPlaceholderStyle(t)}updatePosition(e){if(!this.platform.isBrowser)return;let t=this.target,i=this.nzOffsetTop,s=this.scrollSrv.getScroll(t,!0),n=this.getOffset(this.placeholderNode,t),f=this.fixedEl.nativeElement,d={width:f.offsetWidth,height:f.offsetHeight},a={top:!1,bottom:!1};typeof i!="number"&&typeof this.nzOffsetBottom!="number"?(a.top=!0,i=0):(a.top=typeof i=="number",a.bottom=typeof this.nzOffsetBottom=="number");let c=lt(t),ft=t.innerHeight||t.clientHeight;if(s>=n.top-i&&a.top){let u=n.width,g=c.top+i;this.setAffixStyle(e,{position:"fixed",top:g,left:c.left+n.left,width:u}),this.setPlaceholderStyle({width:u,height:d.height})}else if(s<=n.top+d.height+this.nzOffsetBottom-ft&&a.bottom){let u=t===window?0:window.innerHeight-c.bottom,g=n.width;this.setAffixStyle(e,{position:"fixed",bottom:u+this.nzOffsetBottom,left:c.left+n.left,width:g}),this.setPlaceholderStyle({width:g,height:n.height})}else e.type===C.resize&&this.affixStyle&&this.affixStyle.position==="fixed"&&this.placeholderNode.offsetWidth?this.setAffixStyle(e,B(y({},this.affixStyle),{width:this.placeholderNode.offsetWidth})):this.setAffixStyle(e),this.setPlaceholderStyle();e.type==="resize"&&this.syncPlaceholderStyle(e)}updateRtlClass(){let e=this.fixedEl.nativeElement;this.dir==="rtl"?e.classList.contains(h)?e.classList.add(`${h}-rtl`):e.classList.remove(`${h}-rtl`):e.classList.remove(`${h}-rtl`)}},(()=>{let e=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[x()],p=[x()],S(null,null,o,{kind:"field",name:"nzOffsetTop",static:!1,private:!1,access:{has:t=>"nzOffsetTop"in t,get:t=>t.nzOffsetTop,set:(t,i)=>{t.nzOffsetTop=i}},metadata:e},_,z),S(null,null,p,{kind:"field",name:"nzOffsetBottom",static:!1,private:!1,access:{has:t=>"nzOffsetBottom"in t,get:t=>t.nzOffsetBottom,set:(t,i)=>{t.nzOffsetBottom=i}},metadata:e},N,E),e&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e})})(),O(l,"\u0275fac",function(t){return new(t||l)}),O(l,"\u0275cmp",$({type:l,selectors:[["nz-affix"]],viewQuery:function(t,i){if(t&1&&X(at,7),t&2){let s;G(s=Y())&&(i.fixedEl=s.first)}},inputs:{nzTarget:"nzTarget",nzOffsetTop:[2,"nzOffsetTop","nzOffsetTop",v],nzOffsetBottom:[2,"nzOffsetBottom","nzOffsetBottom",v]},outputs:{nzChange:"nzChange"},exportAs:["nzAffix"],features:[j],ngContentSelectors:ct,decls:3,vars:0,consts:[["fixedEl",""]],template:function(t,i){t&1&&(q(),U(0,"div",null,0),V(2),Z())},dependencies:[it,tt],encapsulation:2,changeDetection:0})),l})(),Pt=(()=>{class o{static \u0275fac=function(p){return new(p||o)};static \u0275mod=k({type:o});static \u0275inj=M({imports:[pt]})}return o})();export{pt as a,Pt as b};
