import{d as $t,f as Yt,h as jt,i as ct}from"./chunk-OYEF4SD2.js";import{a as Ut,b as Vt}from"./chunk-WJZV53O5.js";import{a as Bt,g as Pt,m as Lt,v as kt}from"./chunk-GTVNFQLK.js";import{Aa as K,Ab as q,Bb as J,Da as Ct,Db as T,Eb as Q,Fb as at,Fg as Ot,Ja as z,Ka as I,Kb as Mt,Lb as O,Mb as Nt,Ob as tt,Qa as zt,Ra as G,Sa as R,Tg as Dt,Va as N,X as $,Xa as X,Xf as it,Yf as nt,Zf as At,aa as ft,ca as Y,cb as y,cc as et,dc as k,eb as Et,ec as lt,fa as pt,fb as wt,fg as Tt,gb as _t,ha as F,hb as w,hg as xt,ia as j,ib as M,ie as yt,ig as vt,jb as b,je as bt,jg as Ft,k as V,kb as st,lb as rt,nb as L,nc as St,pa as W,q as mt,qa as B,qb as A,ra as P,sb as E,ua as gt,xa as H,yd as Rt,zb as Z,zc as It}from"./chunk-PQ76J5IX.js";var qt=["itemLabels"],Jt=()=>({"ant-segmented-thumb":!0,"ant-segmented-thumb-motion":!0}),Qt=(n,h)=>({"ant-segmented-item":!0,"ant-segmented-item-selected":n,"ant-segmented-item-disabled":h}),Kt=(n,h)=>({$implicit:n,index:h});function te(n,h){if(n&1){let o=L();w(0,"div",2),A("@thumbMotion.done",function(c){B(o);let u=E();return P(u.handleThumbAnimationDone(c))}),M()}if(n&2){let o=E();N("ngClass",Nt(2,Jt))("@thumbMotion",o.animationState)}}function ee(n,h){if(n&1&&(st(0),T(1),rt()),n&2){let o=E(2).$implicit;z(),at(" ",o.label," ")}}function ie(n,h){if(n&1&&(w(0,"span",5),b(1,"span",6),M(),w(2,"span"),R(3,ee,2,1,"ng-container",7),M()),n&2){let o=E(),a=o.$implicit,c=o.$index,u=E();z(),N("nzType",a.icon),z(2),N("nzStringTemplateOutlet",a.useTemplate&&u.nzLabelTemplate)("nzStringTemplateOutletContext",tt(3,Kt,a,c))}}function ne(n,h){if(n&1&&(st(0),T(1),rt()),n&2){let o=E(2).$implicit;z(),at(" ",o.label," ")}}function oe(n,h){if(n&1&&R(0,ne,2,1,"ng-container",7),n&2){let o=E(),a=o.$implicit,c=o.$index,u=E();N("nzStringTemplateOutlet",a.useTemplate&&u.nzLabelTemplate)("nzStringTemplateOutletContext",tt(2,Kt,a,c))}}function se(n,h){if(n&1){let o=L();w(0,"label",2,0),b(2,"input",3),w(3,"div",4),A("click",function(){let c=B(o),u=c.$implicit,r=c.$index,C=E();return P(!u.disabled&&C.handleOptionClick(r))}),R(4,ie,4,6)(5,oe,1,5,"ng-container"),M()()}if(n&2){let o=h.$implicit,a=h.$index,c=E();N("ngClass",tt(3,Qt,a===c.selectedIndex,!!c.nzDisabled||o.disabled)),z(2),N("checked",a===c.selectedIndex),z(2),y(o.icon?4:5)}}function re(n){return n.map(h=>typeof h=="string"||typeof h=="number"?{label:`${h}`,value:h}:h)}var ae="segmented",dt=(()=>{class n{constructor(o,a,c){this.nzConfigService=o,this.cdr=a,this.directionality=c,this._nzModuleName=ae,this.nzBlock=!1,this.nzDisabled=!1,this.nzOptions=[],this.nzSize="default",this.nzLabelTemplate=null,this.nzValueChange=new H,this.dir="ltr",this.selectedIndex=0,this.transitionedToIndex=-1,this.animationState=null,this.normalizedOptions=[],this.destroy$=new V,this.onChange=()=>{},this.onTouched=()=>{},this.directionality.change?.pipe($(this.destroy$)).subscribe(u=>{this.dir=u,this.cdr.detectChanges()})}ngOnChanges(o){let{nzOptions:a}=o;a&&(this.normalizedOptions=re(a.currentValue))}handleOptionClick(o){this.nzDisabled||(this.changeSelectedIndex(o),this.onChange(o),this.nzValueChange.emit(o))}handleThumbAnimationDone(o){o.fromState==="from"&&(this.selectedIndex=this.transitionedToIndex,this.transitionedToIndex=-1,this.animationState=null,this.cdr.detectChanges())}writeValue(o){typeof o=="number"&&o>-1&&(this.changeSelectedIndex(o),this.cdr.markForCheck())}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}changeSelectedIndex(o){!this.listOfOptions||this.selectedIndex===-1||this.selectedIndex===o||(this.animationState={value:"from",params:Wt(this.listOfOptions.get(this.selectedIndex).nativeElement)},this.selectedIndex=-1,this.cdr.detectChanges(),this.animationState={value:"to",params:Wt(this.listOfOptions.get(o).nativeElement)},this.transitionedToIndex=o,this.cdr.detectChanges())}static{this.\u0275fac=function(a){return new(a||n)(I(yt),I(et),I(Rt))}}static{this.\u0275cmp=F({type:n,selectors:[["nz-segmented"]],viewQuery:function(a,c){if(a&1&&Z(qt,5,K),a&2){let u;q(u=J())&&(c.listOfOptions=u)}},hostAttrs:[1,"ant-segmented"],hostVars:10,hostBindings:function(a,c){a&2&&X("ant-segmented-disabled",!!c.nzDisabled)("ant-segmented-rtl",c.dir==="rtl")("ant-segmented-lg",c.nzSize==="large")("ant-segmented-sm",c.nzSize==="small")("ant-segmented-block",!!c.nzBlock)},inputs:{nzBlock:[2,"nzBlock","nzBlock",k],nzDisabled:[2,"nzDisabled","nzDisabled",k],nzOptions:"nzOptions",nzSize:"nzSize",nzLabelTemplate:"nzLabelTemplate"},outputs:{nzValueChange:"nzValueChange"},exportAs:["nzSegmented"],standalone:!0,features:[Mt([{provide:Bt,useExisting:ft(()=>n),multi:!0}]),G,W,O],decls:4,vars:1,consts:[["itemLabels",""],[1,"ant-segmented-group"],[3,"ngClass"],["type","radio",1,"ant-segmented-item-input",3,"checked"],[1,"ant-segmented-item-label",3,"click"],[1,"ant-segmented-item-icon"],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(a,c){a&1&&(w(0,"div",1),R(1,te,1,3,"div",2),wt(2,se,6,6,"label",2,Et),M()),a&2&&(z(),y(c.animationState?1:-1),z(),_t(c.normalizedOptions))},dependencies:[St,nt,it,Ft,vt],encapsulation:2,data:{animation:[Dt]},changeDetection:0})}}return mt([bt()],n.prototype,"nzSize",void 0),n})();function Wt(n){return{transform:n.offsetLeft,width:n.clientWidth}}var Gt=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=j({type:n})}static{this.\u0275inj=Y({imports:[dt]})}}return n})();var ot=(()=>{class n extends jt{static{this.KEY="segmented"}get list(){return this._list??[]}reset(o){$t(this.schema,this.ui,o).subscribe(a=>{this._list=a,this.detectChanges()})}valueChange(o){this.ui.valueChange&&this.ui.valueChange({index:o,item:this.list[o]})}static{this.\u0275fac=(()=>{let o;return function(c){return(o||(o=gt(n)))(c||n)}})()}static{this.\u0275cmp=F({type:n,selectors:[["sf-segmented"]],standalone:!0,features:[zt,O],decls:2,vars:12,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngModelChange","nzValueChange","ngModel","nzDisabled","nzSize","nzBlock","nzOptions","nzLabelTemplate"]],template:function(a,c){if(a&1&&(w(0,"sf-item-wrap",0)(1,"nz-segmented",1),A("ngModelChange",function(r){return c.setValue(r)})("nzValueChange",function(r){return c.valueChange(r)}),M()()),a&2){let u,r;N("id",c.id)("schema",c.schema)("ui",c.ui)("showError",c.showError)("error",c.error)("showTitle",c.schema.title),z(),N("ngModel",c.value)("nzDisabled",c.disabled)("nzSize",c.ui.size)("nzBlock",(u=c.ui.block)!==null&&u!==void 0?u:!1)("nzOptions",c.list)("nzLabelTemplate",(r=c.ui.labelTemplate)!==null&&r!==void 0?r:null)}},dependencies:[kt,Pt,Lt,ct,Yt,Gt,dt],encapsulation:2})}}return n})();function si(){return{KEY:ot.KEY,type:ot}}var ce=["canvas"];function de(n,h){n&1&&b(0,"nz-spin")}function he(n,h){if(n&1){let o=L();w(0,"div")(1,"p",2),T(2),M(),w(3,"button",3),A("click",function(){B(o);let c=E(2);return P(c.reloadQRCode())}),b(4,"span",4),w(5,"span"),T(6),M()()()}if(n&2){let o=E(2);z(2),Q(o.locale.expired),z(4),Q(o.locale.refresh)}}function ue(n,h){if(n&1&&(w(0,"div")(1,"p",2),T(2),M()()),n&2){let o=E(2);z(2),Q(o.locale.scanned)}}function me(n,h){if(n&1&&(w(0,"div",1),R(1,de,1,0,"nz-spin")(2,he,7,2,"div")(3,ue,3,1,"div"),M()),n&2){let o,a=E();z(),y((o=a.nzStatus)==="loading"?1:o==="expired"?2:o==="scanned"?3:-1)}}function fe(n,h){n&1&&b(0,"canvas",null,0)}var x;(function(n){let h=(()=>{class r{static encodeText(t,e){let i=n.QrSegment.makeSegments(t);return r.encodeSegments(i,e)}static encodeBinary(t,e){let i=n.QrSegment.makeBytes(t);return r.encodeSegments([i],e)}static encodeSegments(t,e,i=1,s=40,l=-1,m=!0){if(!(r.MIN_VERSION<=i&&i<=s&&s<=r.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let d,p;for(d=i;;d++){let g=r.getNumDataCodewords(d,e)*8,_=u.getTotalBits(t,d);if(_<=g){p=_;break}if(d>=s)throw new RangeError("Data too long")}for(let g of[r.Ecc.MEDIUM,r.Ecc.QUARTILE,r.Ecc.HIGH])m&&p<=r.getNumDataCodewords(d,g)*8&&(e=g);let f=[];for(let g of t){o(g.mode.modeBits,4,f),o(g.numChars,g.mode.numCharCountBits(d),f);for(let _ of g.getData())f.push(_)}c(f.length==p);let D=r.getNumDataCodewords(d,e)*8;c(f.length<=D),o(0,Math.min(4,D-f.length),f),o(0,(8-f.length%8)%8,f),c(f.length%8==0);for(let g=236;f.length<D;g^=253)o(g,8,f);let S=[];for(;S.length*8<f.length;)S.push(0);return f.forEach((g,_)=>S[_>>>3]|=g<<7-(_&7)),new r(d,e,S,l)}constructor(t,e,i,s){if(this.version=t,this.errorCorrectionLevel=e,this.modules=[],this.isFunction=[],t<r.MIN_VERSION||t>r.MAX_VERSION)throw new RangeError("Version value out of range");if(s<-1||s>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let l=[];for(let d=0;d<this.size;d++)l.push(!1);for(let d=0;d<this.size;d++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();let m=this.addEccAndInterleave(i);if(this.drawCodewords(m),s==-1){let d=1e9;for(let p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);let f=this.getPenaltyScore();f<d&&(s=p,d=f),this.applyMask(p)}}c(s>=0&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}getModule(t,e){return t>=0&&t<this.size&&e>=0&&e<this.size&&this.modules[e][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let i=0;i<this.size;i++)this.setFunctionModule(6,i,i%2==0),this.setFunctionModule(i,6,i%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let t=this.getAlignmentPatternPositions(),e=t.length;for(let i=0;i<e;i++)for(let s=0;s<e;s++)i==0&&s==0||i==0&&s==e-1||i==e-1&&s==0||this.drawAlignmentPattern(t[i],t[s]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){let e=this.errorCorrectionLevel.formatBits<<3|t,i=e;for(let l=0;l<10;l++)i=i<<1^(i>>>9)*1335;let s=(e<<10|i)^21522;c(s>>>15==0);for(let l=0;l<=5;l++)this.setFunctionModule(8,l,a(s,l));this.setFunctionModule(8,7,a(s,6)),this.setFunctionModule(8,8,a(s,7)),this.setFunctionModule(7,8,a(s,8));for(let l=9;l<15;l++)this.setFunctionModule(14-l,8,a(s,l));for(let l=0;l<8;l++)this.setFunctionModule(this.size-1-l,8,a(s,l));for(let l=8;l<15;l++)this.setFunctionModule(8,this.size-15+l,a(s,l));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let i=0;i<12;i++)t=t<<1^(t>>>11)*7973;let e=this.version<<12|t;c(e>>>18==0);for(let i=0;i<18;i++){let s=a(e,i),l=this.size-11+i%3,m=Math.floor(i/3);this.setFunctionModule(l,m,s),this.setFunctionModule(m,l,s)}}drawFinderPattern(t,e){for(let i=-4;i<=4;i++)for(let s=-4;s<=4;s++){let l=Math.max(Math.abs(s),Math.abs(i)),m=t+s,d=e+i;m>=0&&m<this.size&&d>=0&&d<this.size&&this.setFunctionModule(m,d,l!=2&&l!=4)}}drawAlignmentPattern(t,e){for(let i=-2;i<=2;i++)for(let s=-2;s<=2;s++)this.setFunctionModule(t+s,e+i,Math.max(Math.abs(s),Math.abs(i))!=1)}setFunctionModule(t,e,i){this.modules[e][t]=i,this.isFunction[e][t]=!0}addEccAndInterleave(t){let e=this.version,i=this.errorCorrectionLevel;if(t.length!=r.getNumDataCodewords(e,i))throw new RangeError("Invalid argument");let s=r.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][e],l=r.ECC_CODEWORDS_PER_BLOCK[i.ordinal][e],m=Math.floor(r.getNumRawDataModules(e)/8),d=s-m%s,p=Math.floor(m/s),f=[],D=r.reedSolomonComputeDivisor(l);for(let g=0,_=0;g<s;g++){let v=t.slice(_,_+p-l+(g<d?0:1));_+=v.length;let Xt=r.reedSolomonComputeRemainder(v,D);g<d&&v.push(0),f.push(v.concat(Xt))}let S=[];for(let g=0;g<f[0].length;g++)f.forEach((_,v)=>{(g!=p-l||v>=d)&&S.push(_[g])});return c(S.length==m),S}drawCodewords(t){if(t.length!=Math.floor(r.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let e=0;for(let i=this.size-1;i>=1;i-=2){i==6&&(i=5);for(let s=0;s<this.size;s++)for(let l=0;l<2;l++){let m=i-l,p=(i+1&2)==0?this.size-1-s:s;!this.isFunction[p][m]&&e<t.length*8&&(this.modules[p][m]=a(t[e>>>3],7-(e&7)),e++)}}c(e==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let e=0;e<this.size;e++)for(let i=0;i<this.size;i++){let s;switch(t){case 0:s=(i+e)%2==0;break;case 1:s=e%2==0;break;case 2:s=i%3==0;break;case 3:s=(i+e)%3==0;break;case 4:s=(Math.floor(i/3)+Math.floor(e/2))%2==0;break;case 5:s=i*e%2+i*e%3==0;break;case 6:s=(i*e%2+i*e%3)%2==0;break;case 7:s=((i+e)%2+i*e%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[e][i]&&s&&(this.modules[e][i]=!this.modules[e][i])}}getPenaltyScore(){let t=0;for(let l=0;l<this.size;l++){let m=!1,d=0,p=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[l][f]==m?(d++,d==5?t+=r.PENALTY_N1:d>5&&t++):(this.finderPenaltyAddHistory(d,p),m||(t+=this.finderPenaltyCountPatterns(p)*r.PENALTY_N3),m=this.modules[l][f],d=1);t+=this.finderPenaltyTerminateAndCount(m,d,p)*r.PENALTY_N3}for(let l=0;l<this.size;l++){let m=!1,d=0,p=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[f][l]==m?(d++,d==5?t+=r.PENALTY_N1:d>5&&t++):(this.finderPenaltyAddHistory(d,p),m||(t+=this.finderPenaltyCountPatterns(p)*r.PENALTY_N3),m=this.modules[f][l],d=1);t+=this.finderPenaltyTerminateAndCount(m,d,p)*r.PENALTY_N3}for(let l=0;l<this.size-1;l++)for(let m=0;m<this.size-1;m++){let d=this.modules[l][m];d==this.modules[l][m+1]&&d==this.modules[l+1][m]&&d==this.modules[l+1][m+1]&&(t+=r.PENALTY_N2)}let e=0;for(let l of this.modules)e=l.reduce((m,d)=>m+(d?1:0),e);let i=this.size*this.size,s=Math.ceil(Math.abs(e*20-i*10)/i)-1;return c(s>=0&&s<=9),t+=s*r.PENALTY_N4,c(t>=0&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{let t=Math.floor(this.version/7)+2,e=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2,i=[6];for(let s=this.size-7;i.length<t;s-=e)i.splice(1,0,s);return i}}static getNumRawDataModules(t){if(t<r.MIN_VERSION||t>r.MAX_VERSION)throw new RangeError("Version number out of range");let e=(16*t+128)*t+64;if(t>=2){let i=Math.floor(t/7)+2;e-=(25*i-10)*i-55,t>=7&&(e-=36)}return c(e>=208&&e<=29648),e}static getNumDataCodewords(t,e){return Math.floor(r.getNumRawDataModules(t)/8)-r.ECC_CODEWORDS_PER_BLOCK[e.ordinal][t]*r.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let e=[];for(let s=0;s<t-1;s++)e.push(0);e.push(1);let i=1;for(let s=0;s<t;s++){for(let l=0;l<e.length;l++)e[l]=r.reedSolomonMultiply(e[l],i),l+1<e.length&&(e[l]^=e[l+1]);i=r.reedSolomonMultiply(i,2)}return e}static reedSolomonComputeRemainder(t,e){let i=e.map(s=>0);for(let s of t){let l=s^i.shift();i.push(0),e.forEach((m,d)=>i[d]^=r.reedSolomonMultiply(m,l))}return i}static reedSolomonMultiply(t,e){if(t>>>8||e>>>8)throw new RangeError("Byte out of range");let i=0;for(let s=7;s>=0;s--)i=i<<1^(i>>>7)*285,i^=(e>>>s&1)*t;return c(i>>>8==0),i}finderPenaltyCountPatterns(t){let e=t[1];c(e<=this.size*3);let i=e>0&&t[2]==e&&t[3]==e*3&&t[4]==e&&t[5]==e;return(i&&t[0]>=e*4&&t[6]>=e?1:0)+(i&&t[6]>=e*4&&t[0]>=e?1:0)}finderPenaltyTerminateAndCount(t,e,i){return t&&(this.finderPenaltyAddHistory(e,i),e=0),e+=this.size,this.finderPenaltyAddHistory(e,i),this.finderPenaltyCountPatterns(i)}finderPenaltyAddHistory(t,e){e[0]==0&&(t+=this.size),e.pop(),e.unshift(t)}static{this.MIN_VERSION=1}static{this.MAX_VERSION=40}static{this.PENALTY_N1=3}static{this.PENALTY_N2=3}static{this.PENALTY_N3=40}static{this.PENALTY_N4=10}static{this.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]]}static{this.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]}}return r})();n.QrCode=h;function o(r,C,t){if(C<0||C>31||r>>>C)throw new RangeError("Value out of range");for(let e=C-1;e>=0;e--)t.push(r>>>e&1)}function a(r,C){return(r>>>C&1)!=0}function c(r){if(!r)throw new Error("Assertion error")}let u=(()=>{class r{static makeBytes(t){let e=[];for(let i of t)o(i,8,e);return new r(r.Mode.BYTE,t.length,e)}static makeNumeric(t){if(!r.isNumeric(t))throw new RangeError("String contains non-numeric characters");let e=[];for(let i=0;i<t.length;){let s=Math.min(t.length-i,3);o(parseInt(t.substring(i,i+s),10),s*3+1,e),i+=s}return new r(r.Mode.NUMERIC,t.length,e)}static makeAlphanumeric(t){if(!r.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let e=[],i;for(i=0;i+2<=t.length;i+=2){let s=r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i))*45;s+=r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i+1)),o(s,11,e)}return i<t.length&&o(r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(i)),6,e),new r(r.Mode.ALPHANUMERIC,t.length,e)}static makeSegments(t){return t==""?[]:r.isNumeric(t)?[r.makeNumeric(t)]:r.isAlphanumeric(t)?[r.makeAlphanumeric(t)]:[r.makeBytes(r.toUtf8ByteArray(t))]}static makeEci(t){let e=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)o(t,8,e);else if(t<16384)o(2,2,e),o(t,14,e);else if(t<1e6)o(6,3,e),o(t,21,e);else throw new RangeError("ECI assignment value out of range");return new r(r.Mode.ECI,0,e)}static isNumeric(t){return r.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return r.ALPHANUMERIC_REGEX.test(t)}constructor(t,e,i){if(this.mode=t,this.numChars=e,this.bitData=i,e<0)throw new RangeError("Invalid argument");this.bitData=i.slice()}getData(){return this.bitData.slice()}static getTotalBits(t,e){let i=0;for(let s of t){let l=s.mode.numCharCountBits(e);if(s.numChars>=1<<l)return 1/0;i+=4+l+s.bitData.length}return i}static toUtf8ByteArray(t){t=encodeURI(t);let e=[];for(let i=0;i<t.length;i++)t.charAt(i)!="%"?e.push(t.charCodeAt(i)):(e.push(parseInt(t.substring(i+1,i+3),16)),i+=2);return e}static{this.NUMERIC_REGEX=/^[0-9]*$/}static{this.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/}static{this.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:"}}return r})();n.QrSegment=u})(x||(x={}));(function(n){var h;(function(o){class a{static{this.LOW=new a(0,1)}static{this.MEDIUM=new a(1,0)}static{this.QUARTILE=new a(2,3)}static{this.HIGH=new a(3,2)}constructor(u,r){this.ordinal=u,this.formatBits=r}}o.Ecc=a})(h=n.QrCode||(n.QrCode={}))})(x||(x={}));(function(n){var h;(function(o){class a{static{this.NUMERIC=new a(1,[10,12,14])}static{this.ALPHANUMERIC=new a(2,[9,11,13])}static{this.BYTE=new a(4,[8,16,16])}static{this.KANJI=new a(8,[8,10,12])}static{this.ECI=new a(7,[0,0,0])}constructor(u,r){this.modeBits=u,this.numBitsCharCount=r}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}}o.Mode=a})(h=n.QrSegment||(n.QrSegment={}))})(x||(x={}));var U=x,pe={L:U.QrCode.Ecc.LOW,M:U.QrCode.Ecc.MEDIUM,Q:U.QrCode.Ecc.QUARTILE,H:U.QrCode.Ecc.HIGH},ge=160,Ce=10,ze=10,Ee="#000000",we="#FFFFFF",_e=40,Me="M",Ne=(n,h=Me)=>n?U.QrCode.encodeText(n,pe[h]):null;function Se(n,h,o=ge,a=Ce,c=ze,u=Ee,r=we,C=_e,t){let e=n.getContext("2d"),i=Ie(c);if(n.style.width=`${o}px`,n.style.height=`${o}px`,!h){e.fillStyle="rgba(0, 0, 0, 0)",e.fillRect(0,0,n.width,n.height);return}if(n.width=h.size*a+i[1]+i[3],n.height=h.size*a+i[0]+i[2],!t)ut(e,n.width,n.height,a,r),ht(e,h,a,i,r,u);else{let s=new Image;s.src=t,s.crossOrigin="anonymous",s.width=C*(n.width/o),s.height=C*(n.width/o),s.onload=()=>{ut(e,n.width,n.height,a,r),ht(e,h,a,i,r,u);let l=n.width/2-C*(n.width/o)/2;e.fillRect(l,l,C*(n.width/o),C*(n.width/o)),e.drawImage(s,l,l,C*(n.width/o),C*(n.width/o))},s.onerror=()=>{ut(e,n.width,n.height,a,r),ht(e,h,a,i,r,u)}}}function ht(n,h,o,a,c,u){for(let r=0;r<h.size;r++)for(let C=0;C<h.size;C++)n.fillStyle=h.getModule(C,r)?u:c,n.fillRect(a[3]+C*o,a[0]+r*o,o,o)}function ut(n,h,o,a,c){n.fillStyle=c,n.fillRect(0,0,h*a,o*a)}function Ie(n){return Array.isArray(n)?Array(4).fill(0).map((h,o)=>n[o%n.length]):[n,n,n,n]}var Re=(()=>{class n{constructor(o,a,c){this.i18n=o,this.el=a,this.cdr=c,this.nzValue="",this.nzPadding=0,this.nzColor="#000000",this.nzBgColor="#FFFFFF",this.nzSize=160,this.nzIcon="",this.nzIconSize=40,this.nzBordered=!0,this.nzStatus="active",this.nzLevel="M",this.nzRefresh=new H,this.isBrowser=!0,this.destroy$=new V,this.platformId=pt(Ct),this.isBrowser=It(this.platformId),this.cdr.markForCheck()}ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe($(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(o){let{nzValue:a,nzIcon:c,nzLevel:u,nzSize:r,nzIconSize:C,nzColor:t,nzPadding:e,nzBgColor:i}=o;(a||c||u||r||C||t||e||i)&&this.canvas&&this.drawCanvasQRCode(),i&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&Se(this.canvas.nativeElement,Ne(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(a){return new(a||n)(I(Ot),I(K),I(et))}}static{this.\u0275cmp=F({type:n,selectors:[["nz-qrcode"]],viewQuery:function(a,c){if(a&1&&Z(ce,5),a&2){let u;q(u=J())&&(c.canvas=u.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(a,c){a&2&&X("ant-qrcode-border",c.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:[2,"nzSize","nzSize",lt],nzIcon:"nzIcon",nzIconSize:[2,"nzIconSize","nzIconSize",lt],nzBordered:[2,"nzBordered","nzBordered",k],nzStatus:"nzStatus",nzLevel:"nzLevel"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],standalone:!0,features:[G,W,O],decls:2,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"]],template:function(a,c){a&1&&R(0,me,4,1,"div",1)(1,fe,2,0,"canvas"),a&2&&(y(c.nzStatus!=="active"?0:-1),z(),y(c.isBrowser?1:-1))},dependencies:[Vt,Ut,xt,Tt,At,nt,it],encapsulation:2,changeDetection:0})}}return n})(),yi=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=j({type:n})}static{this.\u0275inj=Y({imports:[Re]})}}return n})();export{Re as a,yi as b,ot as c,si as d};
