import{d as $t,f as Yt,h as jt,i as dt}from"./chunk-W3UVR76X.js";import{a as Vt,b as Qt}from"./chunk-ENNZ44D3.js";import{a as Pt,g as Lt,m as kt,v as Ut}from"./chunk-GK4IRTK3.js";import{Aa as K,Ab as q,Bb as J,Cc as Rt,Da as zt,Db as T,Dg as Dt,Eb as tt,Fb as lt,Ja as z,Ka as y,Kb as It,Lb as D,Mb as Nt,Ob as et,Ra as wt,Sa as G,Ta as R,Va as I,Vf as nt,Wf as ot,X as $,Xa as X,Xf as Tt,Yg as Bt,aa as pt,ca as Y,cb as b,cc as it,dc as U,dg as xt,eb as Et,ec as ct,fa as gt,fb as St,fg as vt,gb as Mt,ge as bt,gg as Ft,ha as O,hb as E,he as At,hg as Ot,ia as j,ib as M,jb as A,k as Q,kb as st,lb as at,nb as k,nc as yt,pa as H,q as ft,qa as P,qb as _,ra as L,sb as w,te as _t,ua as Ct,xa as W,zb as Z}from"./chunk-FML4Y3RM.js";var qt=["itemLabels"],Jt=()=>({"ant-segmented-thumb":!0,"ant-segmented-thumb-motion":!0}),te=(n,l)=>({"ant-segmented-item":!0,"ant-segmented-item-selected":n,"ant-segmented-item-disabled":l}),Kt=(n,l)=>({$implicit:n,index:l});function ee(n,l){if(n&1){let d=k();E(0,"div",2),_("@thumbMotion.done",function(s){P(d);let h=w();return L(h.handleThumbAnimationDone(s))}),M()}if(n&2){let d=w();I("ngClass",Nt(2,Jt))("@thumbMotion",d.animationState)}}function ie(n,l){if(n&1&&(st(0),T(1),at()),n&2){let d=w(2).$implicit;z(),lt(" ",d.label," ")}}function ne(n,l){if(n&1&&(E(0,"span",5),A(1,"span",6),M(),E(2,"span"),R(3,ie,2,1,"ng-container",7),M()),n&2){let d=w(),a=d.$implicit,s=d.$index,h=w();z(),I("nzType",a.icon),z(2),I("nzStringTemplateOutlet",a.useTemplate&&h.nzLabelTemplate)("nzStringTemplateOutletContext",et(3,Kt,a,s))}}function oe(n,l){if(n&1&&(st(0),T(1),at()),n&2){let d=w(2).$implicit;z(),lt(" ",d.label," ")}}function re(n,l){if(n&1&&R(0,oe,2,1,"ng-container",7),n&2){let d=w(),a=d.$implicit,s=d.$index,h=w();I("nzStringTemplateOutlet",a.useTemplate&&h.nzLabelTemplate)("nzStringTemplateOutletContext",et(2,Kt,a,s))}}function se(n,l){if(n&1){let d=k();E(0,"label",2,0),A(2,"input",3),E(3,"div",4),_("click",function(){let s=P(d),h=s.$implicit,m=s.$index,o=w();return L(!h.disabled&&o.handleOptionClick(m))}),R(4,ne,4,6)(5,re,1,5,"ng-container"),M()()}if(n&2){let d=l.$implicit,a=l.$index,s=w();I("ngClass",et(3,te,a===s.selectedIndex,!!s.nzDisabled||d.disabled)),z(2),I("checked",a===s.selectedIndex),z(2),b(d.icon?4:5)}}function ae(n){return n.map(l=>typeof l=="string"||typeof l=="number"?{label:`${l}`,value:l}:l)}var le="segmented",ht=(()=>{let l=class l{constructor(a,s,h){this.nzConfigService=a,this.cdr=s,this.directionality=h,this._nzModuleName=le,this.nzBlock=!1,this.nzDisabled=!1,this.nzOptions=[],this.nzSize="default",this.nzLabelTemplate=null,this.nzValueChange=new W,this.dir="ltr",this.selectedIndex=0,this.transitionedToIndex=-1,this.animationState=null,this.normalizedOptions=[],this.destroy$=new Q,this.onChange=()=>{},this.onTouched=()=>{},this.directionality.change?.pipe($(this.destroy$)).subscribe(m=>{this.dir=m,this.cdr.detectChanges()})}ngOnChanges(a){let{nzOptions:s}=a;s&&(this.normalizedOptions=ae(s.currentValue))}handleOptionClick(a){this.nzDisabled||(this.changeSelectedIndex(a),this.onChange(a),this.nzValueChange.emit(a))}handleThumbAnimationDone(a){a.fromState==="from"&&(this.selectedIndex=this.transitionedToIndex,this.transitionedToIndex=-1,this.animationState=null,this.cdr.detectChanges())}writeValue(a){typeof a=="number"&&a>-1&&(this.changeSelectedIndex(a),this.cdr.markForCheck())}registerOnChange(a){this.onChange=a}registerOnTouched(a){this.onTouched=a}changeSelectedIndex(a){!this.listOfOptions||this.selectedIndex===-1||this.selectedIndex===a||(this.animationState={value:"from",params:Ht(this.listOfOptions.get(this.selectedIndex).nativeElement)},this.selectedIndex=-1,this.cdr.detectChanges(),this.animationState={value:"to",params:Ht(this.listOfOptions.get(a).nativeElement)},this.transitionedToIndex=a,this.cdr.detectChanges())}};l.\u0275fac=function(s){return new(s||l)(y(bt),y(it),y(_t))},l.\u0275cmp=O({type:l,selectors:[["nz-segmented"]],viewQuery:function(s,h){if(s&1&&Z(qt,5,K),s&2){let m;q(m=J())&&(h.listOfOptions=m)}},hostAttrs:[1,"ant-segmented"],hostVars:10,hostBindings:function(s,h){s&2&&X("ant-segmented-disabled",!!h.nzDisabled)("ant-segmented-rtl",h.dir==="rtl")("ant-segmented-lg",h.nzSize==="large")("ant-segmented-sm",h.nzSize==="small")("ant-segmented-block",!!h.nzBlock)},inputs:{nzBlock:[2,"nzBlock","nzBlock",U],nzDisabled:[2,"nzDisabled","nzDisabled",U],nzOptions:"nzOptions",nzSize:"nzSize",nzLabelTemplate:"nzLabelTemplate"},outputs:{nzValueChange:"nzValueChange"},exportAs:["nzSegmented"],standalone:!0,features:[It([{provide:Pt,useExisting:pt(()=>l),multi:!0}]),G,H,D],decls:4,vars:1,consts:[["itemLabels",""],[1,"ant-segmented-group"],[3,"ngClass"],["type","radio",1,"ant-segmented-item-input",3,"checked"],[1,"ant-segmented-item-label",3,"click"],[1,"ant-segmented-item-icon"],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(s,h){s&1&&(E(0,"div",1),R(1,ee,1,3,"div",2),St(2,se,6,6,"label",2,Et),M()),s&2&&(z(),b(h.animationState?1:-1),z(),Mt(h.normalizedOptions))},dependencies:[yt,ot,nt,Ot,Ft],encapsulation:2,data:{animation:[Bt]},changeDetection:0});let n=l;return ft([At()],n.prototype,"nzSize",void 0),n})();function Ht(n){return{transform:n.offsetLeft,width:n.clientWidth}}var Gt=(()=>{let l=class l{};l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=j({type:l}),l.\u0275inj=Y({imports:[ht]});let n=l;return n})();var rt=(()=>{let l=class l extends jt{get list(){return this._list??[]}reset(a){$t(this.schema,this.ui,a).subscribe(s=>{this._list=s,this.detectChanges()})}valueChange(a){this.ui.valueChange&&this.ui.valueChange({index:a,item:this.list[a]})}};l.KEY="segmented",l.\u0275fac=(()=>{let a;return function(h){return(a||(a=Ct(l)))(h||l)}})(),l.\u0275cmp=O({type:l,selectors:[["sf-segmented"]],standalone:!0,features:[wt,D],decls:2,vars:12,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngModelChange","nzValueChange","ngModel","nzDisabled","nzSize","nzBlock","nzOptions","nzLabelTemplate"]],template:function(s,h){if(s&1&&(E(0,"sf-item-wrap",0)(1,"nz-segmented",1),_("ngModelChange",function(o){return h.setValue(o)})("nzValueChange",function(o){return h.valueChange(o)}),M()()),s&2){let m,o;I("id",h.id)("schema",h.schema)("ui",h.ui)("showError",h.showError)("error",h.error)("showTitle",h.schema.title),z(),I("ngModel",h.value)("nzDisabled",h.disabled)("nzSize",h.ui.size)("nzBlock",(m=h.ui.block)!==null&&m!==void 0?m:!1)("nzOptions",h.list)("nzLabelTemplate",(o=h.ui.labelTemplate)!==null&&o!==void 0?o:null)}},dependencies:[Ut,Lt,kt,dt,Yt,Gt,ht],encapsulation:2});let n=l;return n})();function si(){return{KEY:rt.KEY,type:rt}}var de=["canvas"];function he(n,l){n&1&&A(0,"nz-spin")}function me(n,l){if(n&1){let d=k();E(0,"div")(1,"p",2),T(2),M(),E(3,"button",3),_("click",function(){P(d);let s=w(2);return L(s.reloadQRCode())}),A(4,"span",4),E(5,"span"),T(6),M()()()}if(n&2){let d=w(2);z(2),tt(d.locale.expired),z(4),tt(d.locale.refresh)}}function ue(n,l){if(n&1&&(E(0,"div")(1,"p",2),T(2),M()()),n&2){let d=w(2);z(2),tt(d.locale.scanned)}}function fe(n,l){if(n&1&&(E(0,"div",1),R(1,he,1,0,"nz-spin")(2,me,7,2,"div")(3,ue,3,1,"div"),M()),n&2){let d,a=w();z(),b((d=a.nzStatus)==="loading"?1:d==="expired"?2:d==="scanned"?3:-1)}}function pe(n,l){n&1&&A(0,"canvas",null,0)}var x;(function(n){let l=(()=>{let o=class o{static encodeText(t,i){let e=n.QrSegment.makeSegments(t);return o.encodeSegments(e,i)}static encodeBinary(t,i){let e=n.QrSegment.makeBytes(t);return o.encodeSegments([e],i)}static encodeSegments(t,i,e=1,r=40,c=-1,f=!0){if(!(o.MIN_VERSION<=e&&e<=r&&r<=o.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let u,g;for(u=e;;u++){let C=o.getNumDataCodewords(u,i)*8,S=h.getTotalBits(t,u);if(S<=C){g=S;break}if(u>=r)throw new RangeError("Data too long")}for(let C of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])f&&g<=o.getNumDataCodewords(u,C)*8&&(i=C);let p=[];for(let C of t){d(C.mode.modeBits,4,p),d(C.numChars,C.mode.numCharCountBits(u),p);for(let S of C.getData())p.push(S)}s(p.length==g);let B=o.getNumDataCodewords(u,i)*8;s(p.length<=B),d(0,Math.min(4,B-p.length),p),d(0,(8-p.length%8)%8,p),s(p.length%8==0);for(let C=236;p.length<B;C^=253)d(C,8,p);let N=[];for(;N.length*8<p.length;)N.push(0);return p.forEach((C,S)=>N[S>>>3]|=C<<7-(S&7)),new o(u,i,N,c)}constructor(t,i,e,r){if(this.version=t,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],t<o.MIN_VERSION||t>o.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let c=[];for(let u=0;u<this.size;u++)c.push(!1);for(let u=0;u<this.size;u++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();let f=this.addEccAndInterleave(e);if(this.drawCodewords(f),r==-1){let u=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);let p=this.getPenaltyScore();p<u&&(r=g,u=p),this.applyMask(g)}}s(r>=0&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}getModule(t,i){return t>=0&&t<this.size&&i>=0&&i<this.size&&this.modules[i][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let t=this.getAlignmentPatternPositions(),i=t.length;for(let e=0;e<i;e++)for(let r=0;r<i;r++)e==0&&r==0||e==0&&r==i-1||e==i-1&&r==0||this.drawAlignmentPattern(t[e],t[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){let i=this.errorCorrectionLevel.formatBits<<3|t,e=i;for(let c=0;c<10;c++)e=e<<1^(e>>>9)*1335;let r=(i<<10|e)^21522;s(r>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,a(r,c));this.setFunctionModule(8,7,a(r,6)),this.setFunctionModule(8,8,a(r,7)),this.setFunctionModule(7,8,a(r,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,a(r,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,a(r,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,a(r,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let e=0;e<12;e++)t=t<<1^(t>>>11)*7973;let i=this.version<<12|t;s(i>>>18==0);for(let e=0;e<18;e++){let r=a(i,e),c=this.size-11+e%3,f=Math.floor(e/3);this.setFunctionModule(c,f,r),this.setFunctionModule(f,c,r)}}drawFinderPattern(t,i){for(let e=-4;e<=4;e++)for(let r=-4;r<=4;r++){let c=Math.max(Math.abs(r),Math.abs(e)),f=t+r,u=i+e;f>=0&&f<this.size&&u>=0&&u<this.size&&this.setFunctionModule(f,u,c!=2&&c!=4)}}drawAlignmentPattern(t,i){for(let e=-2;e<=2;e++)for(let r=-2;r<=2;r++)this.setFunctionModule(t+r,i+e,Math.max(Math.abs(r),Math.abs(e))!=1)}setFunctionModule(t,i,e){this.modules[i][t]=e,this.isFunction[i][t]=!0}addEccAndInterleave(t){let i=this.version,e=this.errorCorrectionLevel;if(t.length!=o.getNumDataCodewords(i,e))throw new RangeError("Invalid argument");let r=o.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][i],c=o.ECC_CODEWORDS_PER_BLOCK[e.ordinal][i],f=Math.floor(o.getNumRawDataModules(i)/8),u=r-f%r,g=Math.floor(f/r),p=[],B=o.reedSolomonComputeDivisor(c);for(let C=0,S=0;C<r;C++){let F=t.slice(S,S+g-c+(C<u?0:1));S+=F.length;let Xt=o.reedSolomonComputeRemainder(F,B);C<u&&F.push(0),p.push(F.concat(Xt))}let N=[];for(let C=0;C<p[0].length;C++)p.forEach((S,F)=>{(C!=g-c||F>=u)&&N.push(S[C])});return s(N.length==f),N}drawCodewords(t){if(t.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let e=this.size-1;e>=1;e-=2){e==6&&(e=5);for(let r=0;r<this.size;r++)for(let c=0;c<2;c++){let f=e-c,g=(e+1&2)==0?this.size-1-r:r;!this.isFunction[g][f]&&i<t.length*8&&(this.modules[g][f]=a(t[i>>>3],7-(i&7)),i++)}}s(i==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let e=0;e<this.size;e++){let r;switch(t){case 0:r=(e+i)%2==0;break;case 1:r=i%2==0;break;case 2:r=e%3==0;break;case 3:r=(e+i)%3==0;break;case 4:r=(Math.floor(e/3)+Math.floor(i/2))%2==0;break;case 5:r=e*i%2+e*i%3==0;break;case 6:r=(e*i%2+e*i%3)%2==0;break;case 7:r=((e+i)%2+e*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][e]&&r&&(this.modules[i][e]=!this.modules[i][e])}}getPenaltyScore(){let t=0;for(let c=0;c<this.size;c++){let f=!1,u=0,g=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[c][p]==f?(u++,u==5?t+=o.PENALTY_N1:u>5&&t++):(this.finderPenaltyAddHistory(u,g),f||(t+=this.finderPenaltyCountPatterns(g)*o.PENALTY_N3),f=this.modules[c][p],u=1);t+=this.finderPenaltyTerminateAndCount(f,u,g)*o.PENALTY_N3}for(let c=0;c<this.size;c++){let f=!1,u=0,g=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[p][c]==f?(u++,u==5?t+=o.PENALTY_N1:u>5&&t++):(this.finderPenaltyAddHistory(u,g),f||(t+=this.finderPenaltyCountPatterns(g)*o.PENALTY_N3),f=this.modules[p][c],u=1);t+=this.finderPenaltyTerminateAndCount(f,u,g)*o.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let f=0;f<this.size-1;f++){let u=this.modules[c][f];u==this.modules[c][f+1]&&u==this.modules[c+1][f]&&u==this.modules[c+1][f+1]&&(t+=o.PENALTY_N2)}let i=0;for(let c of this.modules)i=c.reduce((f,u)=>f+(u?1:0),i);let e=this.size*this.size,r=Math.ceil(Math.abs(i*20-e*10)/e)-1;return s(r>=0&&r<=9),t+=r*o.PENALTY_N4,s(t>=0&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{let t=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2,e=[6];for(let r=this.size-7;e.length<t;r-=i)e.splice(1,0,r);return e}}static getNumRawDataModules(t){if(t<o.MIN_VERSION||t>o.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*t+128)*t+64;if(t>=2){let e=Math.floor(t/7)+2;i-=(25*e-10)*e-55,t>=7&&(i-=36)}return s(i>=208&&i<=29648),i}static getNumDataCodewords(t,i){return Math.floor(o.getNumRawDataModules(t)/8)-o.ECC_CODEWORDS_PER_BLOCK[i.ordinal][t]*o.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let i=[];for(let r=0;r<t-1;r++)i.push(0);i.push(1);let e=1;for(let r=0;r<t;r++){for(let c=0;c<i.length;c++)i[c]=o.reedSolomonMultiply(i[c],e),c+1<i.length&&(i[c]^=i[c+1]);e=o.reedSolomonMultiply(e,2)}return i}static reedSolomonComputeRemainder(t,i){let e=i.map(r=>0);for(let r of t){let c=r^e.shift();e.push(0),i.forEach((f,u)=>e[u]^=o.reedSolomonMultiply(f,c))}return e}static reedSolomonMultiply(t,i){if(t>>>8||i>>>8)throw new RangeError("Byte out of range");let e=0;for(let r=7;r>=0;r--)e=e<<1^(e>>>7)*285,e^=(i>>>r&1)*t;return s(e>>>8==0),e}finderPenaltyCountPatterns(t){let i=t[1];s(i<=this.size*3);let e=i>0&&t[2]==i&&t[3]==i*3&&t[4]==i&&t[5]==i;return(e&&t[0]>=i*4&&t[6]>=i?1:0)+(e&&t[6]>=i*4&&t[0]>=i?1:0)}finderPenaltyTerminateAndCount(t,i,e){return t&&(this.finderPenaltyAddHistory(i,e),i=0),i+=this.size,this.finderPenaltyAddHistory(i,e),this.finderPenaltyCountPatterns(e)}finderPenaltyAddHistory(t,i){i[0]==0&&(t+=this.size),i.pop(),i.unshift(t)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];let m=o;return m})();n.QrCode=l;function d(m,o,v){if(o<0||o>31||m>>>o)throw new RangeError("Value out of range");for(let t=o-1;t>=0;t--)v.push(m>>>t&1)}function a(m,o){return(m>>>o&1)!=0}function s(m){if(!m)throw new Error("Assertion error")}let h=(()=>{let o=class o{static makeBytes(t){let i=[];for(let e of t)d(e,8,i);return new o(o.Mode.BYTE,t.length,i)}static makeNumeric(t){if(!o.isNumeric(t))throw new RangeError("String contains non-numeric characters");let i=[];for(let e=0;e<t.length;){let r=Math.min(t.length-e,3);d(parseInt(t.substring(e,e+r),10),r*3+1,i),e+=r}return new o(o.Mode.NUMERIC,t.length,i)}static makeAlphanumeric(t){if(!o.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],e;for(e=0;e+2<=t.length;e+=2){let r=o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e))*45;r+=o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e+1)),d(r,11,i)}return e<t.length&&d(o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e)),6,i),new o(o.Mode.ALPHANUMERIC,t.length,i)}static makeSegments(t){return t==""?[]:o.isNumeric(t)?[o.makeNumeric(t)]:o.isAlphanumeric(t)?[o.makeAlphanumeric(t)]:[o.makeBytes(o.toUtf8ByteArray(t))]}static makeEci(t){let i=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)d(t,8,i);else if(t<16384)d(2,2,i),d(t,14,i);else if(t<1e6)d(6,3,i),d(t,21,i);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,i)}static isNumeric(t){return o.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return o.ALPHANUMERIC_REGEX.test(t)}constructor(t,i,e){if(this.mode=t,this.numChars=i,this.bitData=e,i<0)throw new RangeError("Invalid argument");this.bitData=e.slice()}getData(){return this.bitData.slice()}static getTotalBits(t,i){let e=0;for(let r of t){let c=r.mode.numCharCountBits(i);if(r.numChars>=1<<c)return 1/0;e+=4+c+r.bitData.length}return e}static toUtf8ByteArray(t){t=encodeURI(t);let i=[];for(let e=0;e<t.length;e++)t.charAt(e)!="%"?i.push(t.charCodeAt(e)):(i.push(parseInt(t.substring(e+1,e+3),16)),e+=2);return i}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let m=o;return m})();n.QrSegment=h})(x||(x={}));(function(n){var l;(function(d){let s=class s{constructor(m,o){this.ordinal=m,this.formatBits=o}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2);let a=s;d.Ecc=a})(l=n.QrCode||(n.QrCode={}))})(x||(x={}));(function(n){var l;(function(d){let s=class s{constructor(m,o){this.modeBits=m,this.numBitsCharCount=o}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]);let a=s;d.Mode=a})(l=n.QrSegment||(n.QrSegment={}))})(x||(x={}));var V=x,ge={L:V.QrCode.Ecc.LOW,M:V.QrCode.Ecc.MEDIUM,Q:V.QrCode.Ecc.QUARTILE,H:V.QrCode.Ecc.HIGH},Ce=160,ze=10,we=10,Ee="#000000",Se="#FFFFFF",Me=40,Ie="M",Ne=(n,l=Ie)=>n?V.QrCode.encodeText(n,ge[l]):null;function ye(n,l,d=Ce,a=ze,s=we,h=Ee,m=Se,o=Me,v){let t=n.getContext("2d"),i=Re(s);if(n.style.width=`${d}px`,n.style.height=`${d}px`,!l){t.fillStyle="rgba(0, 0, 0, 0)",t.fillRect(0,0,n.width,n.height);return}if(n.width=l.size*a+i[1]+i[3],n.height=l.size*a+i[0]+i[2],!v)ut(t,n.width,n.height,a,m),mt(t,l,a,i,m,h);else{let e=new Image;e.src=v,e.crossOrigin="anonymous",e.width=o*(n.width/d),e.height=o*(n.width/d),e.onload=()=>{ut(t,n.width,n.height,a,m),mt(t,l,a,i,m,h);let r=n.width/2-o*(n.width/d)/2;t.fillRect(r,r,o*(n.width/d),o*(n.width/d)),t.drawImage(e,r,r,o*(n.width/d),o*(n.width/d))},e.onerror=()=>{ut(t,n.width,n.height,a,m),mt(t,l,a,i,m,h)}}}function mt(n,l,d,a,s,h){for(let m=0;m<l.size;m++)for(let o=0;o<l.size;o++)n.fillStyle=l.getModule(o,m)?h:s,n.fillRect(a[3]+o*d,a[0]+m*d,d,d)}function ut(n,l,d,a,s){n.fillStyle=s,n.fillRect(0,0,l*a,d*a)}function Re(n){return Array.isArray(n)?Array(4).fill(0).map((l,d)=>n[d%n.length]):[n,n,n,n]}var be=(()=>{let l=class l{constructor(a,s,h){this.i18n=a,this.el=s,this.cdr=h,this.nzValue="",this.nzPadding=0,this.nzColor="#000000",this.nzBgColor="#FFFFFF",this.nzSize=160,this.nzIcon="",this.nzIconSize=40,this.nzBordered=!0,this.nzStatus="active",this.nzLevel="M",this.nzRefresh=new W,this.isBrowser=!0,this.destroy$=new Q,this.platformId=gt(zt),this.isBrowser=Rt(this.platformId),this.cdr.markForCheck()}ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe($(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(a){let{nzValue:s,nzIcon:h,nzLevel:m,nzSize:o,nzIconSize:v,nzColor:t,nzPadding:i,nzBgColor:e}=a;(s||h||m||o||v||t||i||e)&&this.canvas&&this.drawCanvasQRCode(),e&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&ye(this.canvas.nativeElement,Ne(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(s){return new(s||l)(y(Dt),y(K),y(it))},l.\u0275cmp=O({type:l,selectors:[["nz-qrcode"]],viewQuery:function(s,h){if(s&1&&Z(de,5),s&2){let m;q(m=J())&&(h.canvas=m.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(s,h){s&2&&X("ant-qrcode-border",h.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:[2,"nzSize","nzSize",ct],nzIcon:"nzIcon",nzIconSize:[2,"nzIconSize","nzIconSize",ct],nzBordered:[2,"nzBordered","nzBordered",U],nzStatus:"nzStatus",nzLevel:"nzLevel"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],standalone:!0,features:[G,H,D],decls:2,vars:2,consts:[["canvas",""],[1,"ant-qrcode-mask"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"]],template:function(s,h){s&1&&R(0,fe,4,1,"div",1)(1,pe,2,0,"canvas"),s&2&&(b(h.nzStatus!=="active"?0:-1),z(),b(h.isBrowser?1:-1))},dependencies:[Qt,Vt,vt,xt,Tt,ot,nt],encapsulation:2,changeDetection:0});let n=l;return n})(),Ai=(()=>{let l=class l{};l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=j({type:l}),l.\u0275inj=Y({imports:[be]});let n=l;return n})();export{be as a,Ai as b,rt as c,si as d};
