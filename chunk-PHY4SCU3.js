import{d as Ut,f as Vt,h as Qt,i as ct}from"./chunk-YFXPNWQA.js";import{q as Lt,r as kt}from"./chunk-PVWD4DCM.js";import{a as xt,g as Ft,m as Dt,v as Bt}from"./chunk-HFT7WQJM.js";import{Ab as Z,Ac as Mt,Ba as G,Bb as J,Ca as pt,Cb as Ct,Db as D,Eb as st,Fb as at,Fg as Ot,Ja as E,Ka as N,Kb as zt,Lb as B,Mb as Et,Ob as tt,Ra as gt,Ta as R,Ud as lt,Va as z,Wb as wt,Xa as X,Y as j,ba as Y,bg as it,cc as et,cg as ot,da as O,dg as bt,ea as H,gg as vt,ha as L,hb as I,ia as k,ib as M,ig as At,jb as b,je as yt,jg as _t,k as Q,kb as x,ke as Rt,kg as Tt,la as W,lb as F,lc as It,mc as St,nb as U,nc as nt,oa as K,q as $,qb as v,ra as ut,sb as w,sh as Pt,ta as ft,yd as Nt,zb as q}from"./chunk-CDEDXUOP.js";var Gt=["itemLabels"],Xt=()=>({"ant-segmented-thumb":!0,"ant-segmented-thumb-motion":!0});function qt(i,l){if(i&1){let h=U();I(0,"div",3),v("@thumbMotion.done",function(s){L(h);let d=w();return k(d.handleThumbAnimationDone(s))}),M()}if(i&2){let h=w();z("ngClass",Et(2,Xt))("@thumbMotion",h.animationState)}}function Zt(i,l){if(i&1&&(x(0),D(1),F()),i&2){let h=w(2).$implicit;E(),at(" ",h.label," ")}}var Yt=(i,l)=>({$implicit:i,index:l});function Jt(i,l){if(i&1&&(x(0),I(1,"span",9),b(2,"span",10),M(),I(3,"span"),R(4,Zt,2,1,"ng-container",11),M(),F()),i&2){let h=w(),a=h.$implicit,s=h.index,d=w();E(2),z("nzType",a.icon),E(2),z("nzStringTemplateOutlet",a.useTemplate&&d.nzLabelTemplate)("nzStringTemplateOutletContext",tt(3,Yt,a,s))}}function te(i,l){if(i&1&&(x(0),D(1),F()),i&2){let h=w(2).$implicit;E(),at(" ",h.label," ")}}function ee(i,l){if(i&1&&R(0,te,2,1,"ng-container",11),i&2){let h=w(),a=h.$implicit,s=h.index,d=w();z("nzStringTemplateOutlet",a.useTemplate&&d.nzLabelTemplate)("nzStringTemplateOutletContext",tt(2,Yt,a,s))}}var ne=(i,l)=>({"ant-segmented-item":!0,"ant-segmented-item-selected":i,"ant-segmented-item-disabled":l});function ie(i,l){if(i&1){let h=U();I(0,"label",3,4),b(2,"input",5),I(3,"div",6),v("click",function(){let s=L(h),d=s.$implicit,m=s.index,o=w();return k(!d.disabled&&o.handleOptionClick(m))}),R(4,Jt,5,6,"ng-container",7)(5,ee,1,5,"ng-template",null,8,wt),M()()}if(i&2){let h=l.$implicit,a=l.index,s=Ct(6),d=w();z("ngClass",tt(4,ne,a===d.selectedIndex,!!d.nzDisabled||h.disabled)),E(2),z("checked",a===d.selectedIndex),E(2),z("ngIf",h.icon)("ngIfElse",s)}}function oe(i){return i.map(l=>typeof l=="string"||typeof l=="number"?{label:`${l}`,value:l}:l)}var re="segmented",dt=(()=>{let l=class l{constructor(a,s,d){this.nzConfigService=a,this.cdr=s,this.directionality=d,this._nzModuleName=re,this.nzBlock=!1,this.nzDisabled=!1,this.nzOptions=[],this.nzSize="default",this.nzLabelTemplate=null,this.nzValueChange=new Y,this.dir="ltr",this.selectedIndex=0,this.transitionedToIndex=-1,this.animationState=null,this.normalizedOptions=[],this.destroy$=new Q,this.onChange=()=>{},this.onTouched=()=>{},this.directionality.change?.pipe(j(this.destroy$)).subscribe(m=>{this.dir=m,this.cdr.detectChanges()})}ngOnChanges(a){let{nzOptions:s}=a;s&&(this.normalizedOptions=oe(s.currentValue))}handleOptionClick(a){this.nzDisabled||(this.changeSelectedIndex(a),this.onChange(a),this.nzValueChange.emit(a))}handleThumbAnimationDone(a){a.fromState==="from"&&(this.selectedIndex=this.transitionedToIndex,this.transitionedToIndex=-1,this.animationState=null,this.cdr.detectChanges())}writeValue(a){typeof a=="number"&&a>-1&&(this.changeSelectedIndex(a),this.cdr.markForCheck())}registerOnChange(a){this.onChange=a}registerOnTouched(a){this.onTouched=a}changeSelectedIndex(a){!this.listOfOptions||this.selectedIndex===-1||this.selectedIndex===a||(this.animationState={value:"from",params:$t(this.listOfOptions.get(this.selectedIndex).nativeElement)},this.selectedIndex=-1,this.cdr.detectChanges(),this.animationState={value:"to",params:$t(this.listOfOptions.get(a).nativeElement)},this.transitionedToIndex=a,this.cdr.detectChanges())}};l.\u0275fac=function(s){return new(s||l)(N(yt),N(et),N(Nt,8))},l.\u0275cmp=O({type:l,selectors:[["nz-segmented"]],viewQuery:function(s,d){if(s&1&&q(Gt,5,W),s&2){let m;Z(m=J())&&(d.listOfOptions=m)}},hostAttrs:[1,"ant-segmented"],hostVars:10,hostBindings:function(s,d){s&2&&X("ant-segmented-disabled",!!d.nzDisabled)("ant-segmented-rtl",d.dir==="rtl")("ant-segmented-lg",d.nzSize==="large")("ant-segmented-sm",d.nzSize==="small")("ant-segmented-block",!!d.nzBlock)},inputs:{nzBlock:"nzBlock",nzDisabled:"nzDisabled",nzOptions:"nzOptions",nzSize:"nzSize",nzLabelTemplate:"nzLabelTemplate"},outputs:{nzValueChange:"nzValueChange"},exportAs:["nzSegmented"],standalone:!0,features:[zt([{provide:xt,useExisting:ft(()=>l),multi:!0}]),G,B],decls:3,vars:2,consts:[[1,"ant-segmented-group"],[3,"ngClass",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["itemLabels",""],["type","radio",1,"ant-segmented-item-input",3,"checked"],[1,"ant-segmented-item-label",3,"click"],[4,"ngIf","ngIfElse"],["else_template",""],[1,"ant-segmented-item-icon"],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(s,d){s&1&&(I(0,"div",0),R(1,qt,1,3,"div",1)(2,ie,7,7,"label",2),M()),s&2&&(E(),z("ngIf",d.animationState),E(),z("ngForOf",d.normalizedOptions))},dependencies:[nt,It,St,ot,it,Tt,_t],encapsulation:2,data:{animation:[Pt]},changeDetection:0});let i=l;return $([lt()],i.prototype,"nzBlock",void 0),$([lt()],i.prototype,"nzDisabled",void 0),$([Rt()],i.prototype,"nzSize",void 0),i})();function $t(i){return{transform:i.offsetLeft,width:i.clientWidth}}var Ht=(()=>{let l=class l{};l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=H({type:l}),l.\u0275inj=K({imports:[dt]});let i=l;return i})();var rt=(()=>{let l=class l extends Qt{get list(){return this._list??[]}reset(a){Ut(this.schema,this.ui,a).subscribe(s=>{this._list=s,this.detectChanges()})}valueChange(a){this.ui.valueChange&&this.ui.valueChange({index:a,item:this.list[a]})}};l.KEY="segmented",l.\u0275fac=(()=>{let a;return function(d){return(a||(a=pt(l)))(d||l)}})(),l.\u0275cmp=O({type:l,selectors:[["sf-segmented"]],standalone:!0,features:[gt,B],decls:2,vars:12,consts:[[3,"id","schema","ui","showError","error","showTitle"],[3,"ngModel","nzDisabled","nzSize","nzBlock","nzOptions","nzLabelTemplate","ngModelChange","nzValueChange"]],template:function(s,d){if(s&1&&(I(0,"sf-item-wrap",0)(1,"nz-segmented",1),v("ngModelChange",function(o){return d.setValue(o)})("nzValueChange",function(o){return d.valueChange(o)}),M()()),s&2){let m,o;z("id",d.id)("schema",d.schema)("ui",d.ui)("showError",d.showError)("error",d.error)("showTitle",d.schema.title),E(),z("ngModel",d.value)("nzDisabled",d.disabled)("nzSize",d.ui.size)("nzBlock",(m=d.ui.block)!==null&&m!==void 0?m:!1)("nzOptions",d.list)("nzLabelTemplate",(o=d.ui.labelTemplate)!==null&&o!==void 0?o:null)}},dependencies:[Bt,Ft,Dt,ct,Vt,Ht,dt],encapsulation:2});let i=l;return i})();function rn(){return{KEY:rt.KEY,type:rt}}var ae=["canvas"];function le(i,l){i&1&&b(0,"nz-spin")}function ce(i,l){if(i&1){let h=U();I(0,"div")(1,"p",3),D(2),M(),I(3,"button",4),v("click",function(){L(h);let s=w(2);return k(s.reloadQRCode())}),b(4,"span",5),I(5,"span"),D(6),M()()()}if(i&2){let h=w(2);E(2),st(h.locale.expired),E(4),st(h.locale.refresh)}}function de(i,l){if(i&1&&(I(0,"div",2),R(1,le,1,0,"nz-spin",1)(2,ce,7,2,"div",1),M()),i&2){let h=w();E(),z("ngIf",h.nzStatus==="loading"),E(),z("ngIf",h.nzStatus==="expired")}}function he(i,l){i&1&&(x(0),b(1,"canvas",null,6),F())}var A;(function(i){let l=(()=>{let o=class o{static encodeText(t,n){let e=i.QrSegment.makeSegments(t);return o.encodeSegments(e,n)}static encodeBinary(t,n){let e=i.QrSegment.makeBytes(t);return o.encodeSegments([e],n)}static encodeSegments(t,n,e=1,r=40,c=-1,f=!0){if(!(o.MIN_VERSION<=e&&e<=r&&r<=o.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let u,g;for(u=e;;u++){let C=o.getNumDataCodewords(u,n)*8,S=d.getTotalBits(t,u);if(S<=C){g=S;break}if(u>=r)throw new RangeError("Data too long")}for(let C of[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH])f&&g<=o.getNumDataCodewords(u,C)*8&&(n=C);let p=[];for(let C of t){h(C.mode.modeBits,4,p),h(C.numChars,C.mode.numCharCountBits(u),p);for(let S of C.getData())p.push(S)}s(p.length==g);let P=o.getNumDataCodewords(u,n)*8;s(p.length<=P),h(0,Math.min(4,P-p.length),p),h(0,(8-p.length%8)%8,p),s(p.length%8==0);for(let C=236;p.length<P;C^=253)h(C,8,p);let y=[];for(;y.length*8<p.length;)y.push(0);return p.forEach((C,S)=>y[S>>>3]|=C<<7-(S&7)),new o(u,n,y,c)}constructor(t,n,e,r){if(this.version=t,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],t<o.MIN_VERSION||t>o.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let c=[];for(let u=0;u<this.size;u++)c.push(!1);for(let u=0;u<this.size;u++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();let f=this.addEccAndInterleave(e);if(this.drawCodewords(f),r==-1){let u=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);let p=this.getPenaltyScore();p<u&&(r=g,u=p),this.applyMask(g)}}s(r>=0&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}getModule(t,n){return t>=0&&t<this.size&&n>=0&&n<this.size&&this.modules[n][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let t=this.getAlignmentPatternPositions(),n=t.length;for(let e=0;e<n;e++)for(let r=0;r<n;r++)e==0&&r==0||e==0&&r==n-1||e==n-1&&r==0||this.drawAlignmentPattern(t[e],t[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){let n=this.errorCorrectionLevel.formatBits<<3|t,e=n;for(let c=0;c<10;c++)e=e<<1^(e>>>9)*1335;let r=(n<<10|e)^21522;s(r>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,a(r,c));this.setFunctionModule(8,7,a(r,6)),this.setFunctionModule(8,8,a(r,7)),this.setFunctionModule(7,8,a(r,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,a(r,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,a(r,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,a(r,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let e=0;e<12;e++)t=t<<1^(t>>>11)*7973;let n=this.version<<12|t;s(n>>>18==0);for(let e=0;e<18;e++){let r=a(n,e),c=this.size-11+e%3,f=Math.floor(e/3);this.setFunctionModule(c,f,r),this.setFunctionModule(f,c,r)}}drawFinderPattern(t,n){for(let e=-4;e<=4;e++)for(let r=-4;r<=4;r++){let c=Math.max(Math.abs(r),Math.abs(e)),f=t+r,u=n+e;f>=0&&f<this.size&&u>=0&&u<this.size&&this.setFunctionModule(f,u,c!=2&&c!=4)}}drawAlignmentPattern(t,n){for(let e=-2;e<=2;e++)for(let r=-2;r<=2;r++)this.setFunctionModule(t+r,n+e,Math.max(Math.abs(r),Math.abs(e))!=1)}setFunctionModule(t,n,e){this.modules[n][t]=e,this.isFunction[n][t]=!0}addEccAndInterleave(t){let n=this.version,e=this.errorCorrectionLevel;if(t.length!=o.getNumDataCodewords(n,e))throw new RangeError("Invalid argument");let r=o.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][n],c=o.ECC_CODEWORDS_PER_BLOCK[e.ordinal][n],f=Math.floor(o.getNumRawDataModules(n)/8),u=r-f%r,g=Math.floor(f/r),p=[],P=o.reedSolomonComputeDivisor(c);for(let C=0,S=0;C<r;C++){let T=t.slice(S,S+g-c+(C<u?0:1));S+=T.length;let Wt=o.reedSolomonComputeRemainder(T,P);C<u&&T.push(0),p.push(T.concat(Wt))}let y=[];for(let C=0;C<p[0].length;C++)p.forEach((S,T)=>{(C!=g-c||T>=u)&&y.push(S[C])});return s(y.length==f),y}drawCodewords(t){if(t.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let e=this.size-1;e>=1;e-=2){e==6&&(e=5);for(let r=0;r<this.size;r++)for(let c=0;c<2;c++){let f=e-c,g=(e+1&2)==0?this.size-1-r:r;!this.isFunction[g][f]&&n<t.length*8&&(this.modules[g][f]=a(t[n>>>3],7-(n&7)),n++)}}s(n==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let e=0;e<this.size;e++){let r;switch(t){case 0:r=(e+n)%2==0;break;case 1:r=n%2==0;break;case 2:r=e%3==0;break;case 3:r=(e+n)%3==0;break;case 4:r=(Math.floor(e/3)+Math.floor(n/2))%2==0;break;case 5:r=e*n%2+e*n%3==0;break;case 6:r=(e*n%2+e*n%3)%2==0;break;case 7:r=((e+n)%2+e*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][e]&&r&&(this.modules[n][e]=!this.modules[n][e])}}getPenaltyScore(){let t=0;for(let c=0;c<this.size;c++){let f=!1,u=0,g=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[c][p]==f?(u++,u==5?t+=o.PENALTY_N1:u>5&&t++):(this.finderPenaltyAddHistory(u,g),f||(t+=this.finderPenaltyCountPatterns(g)*o.PENALTY_N3),f=this.modules[c][p],u=1);t+=this.finderPenaltyTerminateAndCount(f,u,g)*o.PENALTY_N3}for(let c=0;c<this.size;c++){let f=!1,u=0,g=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[p][c]==f?(u++,u==5?t+=o.PENALTY_N1:u>5&&t++):(this.finderPenaltyAddHistory(u,g),f||(t+=this.finderPenaltyCountPatterns(g)*o.PENALTY_N3),f=this.modules[p][c],u=1);t+=this.finderPenaltyTerminateAndCount(f,u,g)*o.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let f=0;f<this.size-1;f++){let u=this.modules[c][f];u==this.modules[c][f+1]&&u==this.modules[c+1][f]&&u==this.modules[c+1][f+1]&&(t+=o.PENALTY_N2)}let n=0;for(let c of this.modules)n=c.reduce((f,u)=>f+(u?1:0),n);let e=this.size*this.size,r=Math.ceil(Math.abs(n*20-e*10)/e)-1;return s(r>=0&&r<=9),t+=r*o.PENALTY_N4,s(t>=0&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{let t=Math.floor(this.version/7)+2,n=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2,e=[6];for(let r=this.size-7;e.length<t;r-=n)e.splice(1,0,r);return e}}static getNumRawDataModules(t){if(t<o.MIN_VERSION||t>o.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*t+128)*t+64;if(t>=2){let e=Math.floor(t/7)+2;n-=(25*e-10)*e-55,t>=7&&(n-=36)}return s(n>=208&&n<=29648),n}static getNumDataCodewords(t,n){return Math.floor(o.getNumRawDataModules(t)/8)-o.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t]*o.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let n=[];for(let r=0;r<t-1;r++)n.push(0);n.push(1);let e=1;for(let r=0;r<t;r++){for(let c=0;c<n.length;c++)n[c]=o.reedSolomonMultiply(n[c],e),c+1<n.length&&(n[c]^=n[c+1]);e=o.reedSolomonMultiply(e,2)}return n}static reedSolomonComputeRemainder(t,n){let e=n.map(r=>0);for(let r of t){let c=r^e.shift();e.push(0),n.forEach((f,u)=>e[u]^=o.reedSolomonMultiply(f,c))}return e}static reedSolomonMultiply(t,n){if(t>>>8||n>>>8)throw new RangeError("Byte out of range");let e=0;for(let r=7;r>=0;r--)e=e<<1^(e>>>7)*285,e^=(n>>>r&1)*t;return s(e>>>8==0),e}finderPenaltyCountPatterns(t){let n=t[1];s(n<=this.size*3);let e=n>0&&t[2]==n&&t[3]==n*3&&t[4]==n&&t[5]==n;return(e&&t[0]>=n*4&&t[6]>=n?1:0)+(e&&t[6]>=n*4&&t[0]>=n?1:0)}finderPenaltyTerminateAndCount(t,n,e){return t&&(this.finderPenaltyAddHistory(n,e),n=0),n+=this.size,this.finderPenaltyAddHistory(n,e),this.finderPenaltyCountPatterns(e)}finderPenaltyAddHistory(t,n){n[0]==0&&(t+=this.size),n.pop(),n.unshift(t)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];let m=o;return m})();i.QrCode=l;function h(m,o,_){if(o<0||o>31||m>>>o)throw new RangeError("Value out of range");for(let t=o-1;t>=0;t--)_.push(m>>>t&1)}function a(m,o){return(m>>>o&1)!=0}function s(m){if(!m)throw new Error("Assertion error")}let d=(()=>{let o=class o{static makeBytes(t){let n=[];for(let e of t)h(e,8,n);return new o(o.Mode.BYTE,t.length,n)}static makeNumeric(t){if(!o.isNumeric(t))throw new RangeError("String contains non-numeric characters");let n=[];for(let e=0;e<t.length;){let r=Math.min(t.length-e,3);h(parseInt(t.substring(e,e+r),10),r*3+1,n),e+=r}return new o(o.Mode.NUMERIC,t.length,n)}static makeAlphanumeric(t){if(!o.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n=[],e;for(e=0;e+2<=t.length;e+=2){let r=o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e))*45;r+=o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e+1)),h(r,11,n)}return e<t.length&&h(o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e)),6,n),new o(o.Mode.ALPHANUMERIC,t.length,n)}static makeSegments(t){return t==""?[]:o.isNumeric(t)?[o.makeNumeric(t)]:o.isAlphanumeric(t)?[o.makeAlphanumeric(t)]:[o.makeBytes(o.toUtf8ByteArray(t))]}static makeEci(t){let n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)h(t,8,n);else if(t<16384)h(2,2,n),h(t,14,n);else if(t<1e6)h(6,3,n),h(t,21,n);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,n)}static isNumeric(t){return o.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return o.ALPHANUMERIC_REGEX.test(t)}constructor(t,n,e){if(this.mode=t,this.numChars=n,this.bitData=e,n<0)throw new RangeError("Invalid argument");this.bitData=e.slice()}getData(){return this.bitData.slice()}static getTotalBits(t,n){let e=0;for(let r of t){let c=r.mode.numCharCountBits(n);if(r.numChars>=1<<c)return 1/0;e+=4+c+r.bitData.length}return e}static toUtf8ByteArray(t){t=encodeURI(t);let n=[];for(let e=0;e<t.length;e++)t.charAt(e)!="%"?n.push(t.charCodeAt(e)):(n.push(parseInt(t.substring(e+1,e+3),16)),e+=2);return n}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let m=o;return m})();i.QrSegment=d})(A||(A={}));(function(i){var l;(function(h){let s=class s{constructor(m,o){this.ordinal=m,this.formatBits=o}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2);let a=s;h.Ecc=a})(l=i.QrCode||(i.QrCode={}))})(A||(A={}));(function(i){var l;(function(h){let s=class s{constructor(m,o){this.modeBits=m,this.numBitsCharCount=o}numCharCountBits(m){return this.numBitsCharCount[Math.floor((m+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]);let a=s;h.Mode=a})(l=i.QrSegment||(i.QrSegment={}))})(A||(A={}));var V=A,me={L:V.QrCode.Ecc.LOW,M:V.QrCode.Ecc.MEDIUM,Q:V.QrCode.Ecc.QUARTILE,H:V.QrCode.Ecc.HIGH},ue=160,fe=10,pe=10,ge="#000000",Ce="#FFFFFF",ze=40,Ee="M",we=(i,l=Ee)=>i?V.QrCode.encodeText(i,me[l]):null;function Ie(i,l,h=ue,a=fe,s=pe,d=ge,m=Ce,o=ze,_){let t=i.getContext("2d"),n=Se(s);if(i.style.width=`${h}px`,i.style.height=`${h}px`,!l){t.fillStyle="rgba(0, 0, 0, 0)",t.fillRect(0,0,i.width,i.height);return}if(i.width=l.size*a+n[1]+n[3],i.height=l.size*a+n[0]+n[2],!_)mt(t,i.width,i.height,a,m),ht(t,l,a,n,m,d);else{let e=new Image;e.src=_,e.crossOrigin="anonymous",e.width=o*(i.width/h),e.height=o*(i.width/h),e.onload=()=>{mt(t,i.width,i.height,a,m),ht(t,l,a,n,m,d);let r=i.width/2-o*(i.width/h)/2;t.fillRect(r,r,o*(i.width/h),o*(i.width/h)),t.drawImage(e,r,r,o*(i.width/h),o*(i.width/h))},e.onerror=()=>{mt(t,i.width,i.height,a,m),ht(t,l,a,n,m,d)}}}function ht(i,l,h,a,s,d){for(let m=0;m<l.size;m++)for(let o=0;o<l.size;o++)i.fillStyle=l.getModule(o,m)?d:s,i.fillRect(a[3]+o*h,a[0]+m*h,h,h)}function mt(i,l,h,a,s){for(let d=0;d<h;d++)for(let m=0;m<l;m++)i.fillStyle=s,i.fillRect(m*a,d*a,a,a)}function Se(i){return Array.isArray(i)?Array(4).fill(0).map((l,h)=>i[h%i.length]):[i,i,i,i]}var Me=(()=>{let l=class l{constructor(a,s,d,m){this.i18n=a,this.el=s,this.cdr=d,this.platformId=m,this.nzValue="",this.nzPadding=0,this.nzColor="#000000",this.nzBgColor="#FFFFFF",this.nzSize=160,this.nzIcon="",this.nzIconSize=40,this.nzBordered=!0,this.nzStatus="active",this.nzLevel="M",this.nzRefresh=new Y,this.isBrowser=!0,this.destroy$=new Q,this.isBrowser=Mt(this.platformId),this.cdr.markForCheck()}ngOnInit(){this.el.nativeElement.style.backgroundColor=this.nzBgColor,this.i18n.localeChange.pipe(j(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("QRCode"),this.cdr.markForCheck()})}ngOnChanges(a){let{nzValue:s,nzIcon:d,nzLevel:m,nzSize:o,nzIconSize:_,nzColor:t,nzPadding:n,nzBgColor:e}=a;(s||d||m||o||_||t||n||e)&&this.canvas&&this.drawCanvasQRCode(),e&&(this.el.nativeElement.style.backgroundColor=this.nzBgColor)}ngAfterViewInit(){this.drawCanvasQRCode()}reloadQRCode(){this.drawCanvasQRCode(),this.nzRefresh.emit("refresh")}drawCanvasQRCode(){this.canvas&&Ie(this.canvas.nativeElement,we(this.nzValue,this.nzLevel),this.nzSize,10,this.nzPadding,this.nzColor,this.nzBgColor,this.nzIconSize,this.nzIcon)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};l.\u0275fac=function(s){return new(s||l)(N(Ot),N(W),N(et),N(ut))},l.\u0275cmp=O({type:l,selectors:[["nz-qrcode"]],viewQuery:function(s,d){if(s&1&&q(ae,5),s&2){let m;Z(m=J())&&(d.canvas=m.first)}},hostAttrs:[1,"ant-qrcode"],hostVars:2,hostBindings:function(s,d){s&2&&X("ant-qrcode-border",d.nzBordered)},inputs:{nzValue:"nzValue",nzPadding:"nzPadding",nzColor:"nzColor",nzBgColor:"nzBgColor",nzSize:"nzSize",nzIcon:"nzIcon",nzIconSize:"nzIconSize",nzBordered:"nzBordered",nzStatus:"nzStatus",nzLevel:"nzLevel"},outputs:{nzRefresh:"nzRefresh"},exportAs:["nzQRCode"],standalone:!0,features:[G,B],decls:2,vars:2,consts:[["class","ant-qrcode-mask",4,"ngIf"],[4,"ngIf"],[1,"ant-qrcode-mask"],[1,"ant-qrcode-expired"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],["canvas",""]],template:function(s,d){s&1&&R(0,de,3,2,"div",0)(1,he,3,0,"ng-container",1),s&2&&(z("ngIf",d.nzStatus!=="active"),E(),z("ngIf",d.isBrowser))},dependencies:[kt,Lt,nt,At,vt,bt,ot,it],encapsulation:2,changeDetection:0});let i=l;return i})(),vn=(()=>{let l=class l{};l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=H({type:l}),l.\u0275inj=K({imports:[Me]});let i=l;return i})();export{Me as a,vn as b,rt as c,rn as d};
